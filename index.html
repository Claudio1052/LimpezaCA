<!DOCTYPE html>
<html lang="en"> 
<head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover">
    <meta name="HandheldFriendly" content="true">
    <meta name="MobileOptimized" content="width">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="color-scheme" content="light dark">
    <meta name="theme-color" content="#2a6eff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#1a1a2e" media="(prefers-color-scheme: dark)">
    <meta name="apple-mobile-web-app-title" content="Rio Cleaning">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="description" content="Professional cleaning services in Calgary for homes, churches, commercial spaces, post-construction, and upholstery. Get your free quote today.">
    
    <title>Rio Cleaning - Professional Cleaning Services in Calgary</title>
    
    <style>
        :root {
            --primary-color: #2a6eff;
            --primary-dark: #1a56e0;
            --secondary-color: #00a896;
            --accent-color: #ff6b6b;
            --dark-color: #2d3748;
            --light-color: #f8f9fa;
            --gray-100: #f7fafc;
            --gray-200: #edf2f7;
            --gray-300: #e2e8f0;
            --gray-600: #718096;
            --gray-800: #2d3748;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
            --shadow-lg: 0 10px 25px rgba(0,0,0,0.1);
            --border-radius: 8px;
            --border-radius-lg: 16px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--gray-800);
            background-color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container { width: 100%; max-width: 1200px; margin: 0 auto; padding: 0 20px; }

        h1, h2, h3, h4 { font-weight: 700; line-height: 1.2; margin-bottom: 1.5rem; color: var(--dark-color); }
        h1 { font-size: clamp(2rem, 5vw, 3rem); color: var(--dark-color); }
        h2 { font-size: clamp(1.75rem, 4vw, 2.5rem); position: relative; display: inline-block; }
        h2.section-title { text-align: center; width: 100%; margin-bottom: 3rem; }
        h2.section-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }
        h3 { font-size: clamp(1.25rem, 3.5vw, 1.75rem); color: var(--dark-color); }
        h4 { font-size: clamp(1.125rem, 3vw, 1.25rem); color: var(--dark-color); }
        p { margin-bottom: 1rem; font-size: 1rem; line-height: 1.6; color: var(--gray-600); }
        a { text-decoration: none; color: var(--primary-color); transition: all 0.3s ease; }
        a:hover, a:focus { color: var(--primary-dark); }

        .navbar {
            background: white;
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 10px 0;
        }
        .navbar .container { display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; padding: 0 20px; }
        .logo { display: flex; align-items: center; }
        .logo-img { height: 50px; width: auto; object-fit: contain; }
        .nav-contact-info { display: flex; align-items: center; gap: 25px; margin-left: 20px; flex-wrap: wrap; }
        .nav-contact-item { display: flex; align-items: center; gap: 8px; font-size: 0.9rem; color: var(--gray-800); }
        .nav-contact-item i { color: var(--primary-color); font-size: 1rem; width: 16px; }
        .nav-contact-item a { color: var(--gray-800); text-decoration: none; white-space: nowrap; }
        .nav-contact-item a:hover { color: var(--primary-color); }
        .instagram-link { color: #e4405f !important; }
        .nav-links { display: flex; list-style: none; align-items: center; gap: 10px; margin-left: auto; }
        .nav-links a { color: var(--dark-color); font-weight: 500; font-size: 0.9rem; padding: 8px 12px; border-radius: var(--border-radius); white-space: nowrap; cursor: pointer; }
        .nav-links a:hover, .nav-links a.active { color: var(--primary-color); background-color: var(--gray-100); }
        .menu-toggle { display: none; font-size: 1.5rem; cursor: pointer; background: none; border: none; padding: 10px; border-radius: var(--border-radius); z-index: 1001; }

        .hero { position: relative; color: white; padding: clamp(60px, 12vh, 100px) 0; overflow: hidden; text-align: center; }
        .hero-video-container { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        .hero-video { width: 100%; height: 100%; object-fit: cover; }
        .hero-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.5) 100%); z-index: 2; }
        .hero-content { max-width: 800px; margin: 0 auto; position: relative; z-index: 3; }
        .hero h1 { color: white; font-size: clamp(2rem, 4vw, 3rem); margin-bottom: 1rem; }
        .hero h1 span { color: #ffd700; }
        .hero p { color: rgba(255,255,255,0.95); font-size: 1.1rem; margin-bottom: 2rem; }
        .hero-btn-container { margin: 2rem 0; }
        .hero-btn { padding: 16px 40px; font-size: 1.1rem; font-weight: 700; }
        .hero-contact { background: rgba(255,255,255,0.15); backdrop-filter: blur(10px); border-radius: var(--border-radius-lg); padding: 25px; display: inline-block; max-width: 700px; width: 100%; }
        .hero-contact-info { display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; }
        .hero-contact-info p { margin: 0; display: flex; align-items: center; gap: 8px; }
        .contact-link { color: white; display: flex; align-items: center; gap: 8px; padding: 6px 12px; border-radius: 8px; background: rgba(255,255,255,0.1); }
        .contact-link:hover { background: rgba(255,255,255,0.2); }

        .carpet-gallery-section { padding: 60px 0; background: linear-gradient(135deg, #f8fafc 0%, #f0f7ff 100%); }
        .gallery-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; margin-top: 40px; }
        .gallery-card { background: white; border-radius: var(--border-radius-lg); overflow: hidden; box-shadow: var(--shadow-lg); transition: all 0.3s ease; border: 1px solid var(--gray-200); position: relative; }
        .gallery-card:hover { transform: translateY(-10px); box-shadow: 0 20px 30px rgba(42,110,255,0.15); }
        .gallery-card.featured { grid-column: span 3; display: grid; grid-template-columns: 1fr 1fr; gap: 0; background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%); }
        .gallery-card.featured .gallery-image { height: 100%; min-height: 350px; }
        .gallery-image { width: 100%; height: 250px; object-fit: cover; transition: transform 0.5s ease; border-bottom: 3px solid var(--primary-color); }
        .gallery-card:hover .gallery-image { transform: scale(1.05); }
        .gallery-content { padding: 25px; }
        .gallery-card.featured .gallery-content { display: flex; flex-direction: column; justify-content: center; padding: 40px; background: linear-gradient(135deg, rgba(42,110,255,0.03), rgba(0,168,150,0.03)); }
        .gallery-badge { display: inline-block; padding: 6px 12px; background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); color: white; border-radius: 50px; font-size: 0.8rem; font-weight: 600; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px; }
        .gallery-content h3 { font-size: 1.5rem; margin-bottom: 15px; color: var(--dark-color); }
        .gallery-content p { color: var(--gray-600); margin-bottom: 20px; font-size: 1rem; }
        .gallery-stats { display: flex; gap: 20px; margin-top: 20px; }
        .stat-item { display: flex; align-items: center; gap: 8px; font-size: 0.95rem; color: var(--gray-800); }
        .stat-item i { color: var(--primary-color); font-size: 1.2rem; }
        .before-after-label { position: absolute; top: 20px; right: 20px; background: rgba(0,0,0,0.7); color: white; padding: 5px 10px; border-radius: 50px; font-size: 0.8rem; font-weight: 600; z-index: 2; backdrop-filter: blur(5px); }
        .before-after-label i { margin-right: 5px; color: #ffd700; }
        .carpet-testimonials { margin-top: 60px; padding: 40px; background: white; border-radius: var(--border-radius-lg); box-shadow: var(--shadow-lg); border: 1px solid var(--gray-200); }
        .carpet-testimonials h3 { text-align: center; margin-bottom: 40px; font-size: 2rem; color: var(--dark-color); }
        .testimonials-carpet-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px; }
        .testimonial-carpet-card { display: flex; align-items: center; gap: 20px; padding: 25px; background: linear-gradient(135deg, #f8fafc 0%, #f0f7ff 100%); border-radius: var(--border-radius-lg); border-left: 4px solid var(--primary-color); }
        .testimonial-avatar { width: 80px; height: 80px; border-radius: 50%; overflow: hidden; border: 3px solid white; box-shadow: var(--shadow-md); flex-shrink: 0; }
        .testimonial-avatar img { width: 100%; height: 100%; object-fit: cover; }
        .testimonial-carpet-content { flex: 1; }
        .testimonial-carpet-content p { font-style: italic; margin-bottom: 10px; color: var(--gray-800); }
        .testimonial-carpet-author { font-weight: 700; color: var(--primary-color); }
        .testimonial-carpet-date { font-size: 0.85rem; color: var(--gray-600); }
        .carpet-cta { text-align: center; margin-top: 50px; }
        .carpet-cta .btn { padding: 16px 50px; font-size: 1.2rem; }

        .different-section { padding: 60px 0; background: linear-gradient(135deg, #f8fafc 0%, #f0f7ff 100%); }
        .different-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; margin-top: 40px; }
        .different-card { background: white; border-radius: var(--border-radius-lg); padding: 30px 25px; text-align: center; box-shadow: var(--shadow-md); transition: all 0.3s ease; border: 1px solid var(--gray-200); position: relative; overflow: hidden; }
        .different-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, var(--primary-color), var(--secondary-color)); }
        .different-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-lg); }
        .different-card .card-icon { width: 160px; height: 160px; margin: 0 auto 20px; border-radius: 20px; overflow: hidden; background: linear-gradient(135deg, rgba(42,110,255,0.1), rgba(0,168,150,0.1)); padding: 10px; border: 3px solid white; box-shadow: 0 8px 20px rgba(42,110,255,0.15); }
        .different-card .card-icon img { width: 100%; height: 100%; object-fit: cover; border-radius: 15px; }
        .different-card h3 { font-size: 1.3rem; margin-bottom: 12px; }
        .different-card p { font-size: 0.95rem; color: var(--gray-600); }

        .testimonials-section { padding: 60px 0; background: white; }
        .testimonials-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; margin-top: 40px; }
        .testimonial-card { background: linear-gradient(135deg, #f8fafc 0%, #f0f7ff 100%); border-radius: var(--border-radius-lg); padding: 30px 25px; box-shadow: var(--shadow-md); border: 1px solid var(--gray-200); position: relative; }
        .testimonial-card::before { content: '"'; position: absolute; top: 10px; left: 20px; font-size: 5rem; color: var(--primary-color); opacity: 0.2; font-family: serif; }
        .testimonial-rating { color: #ffc107; margin-bottom: 15px; }
        .testimonial-text { font-style: italic; color: var(--gray-800); margin-bottom: 20px; position: relative; z-index: 1; }
        .testimonial-author { font-weight: 700; color: var(--dark-color); margin-bottom: 5px; }
        .testimonial-date { font-size: 0.85rem; color: var(--gray-600); }
        .google-reviews-link { text-align: center; margin-top: 40px; }

        .services-carousel-section { padding: 60px 0; background: linear-gradient(135deg, #f8fafc 0%, #f0f7ff 100%); overflow: hidden; }
        .carousel-container { position: relative; max-width: 1200px; margin: 0 auto; padding: 0 40px; }
        .services-carousel { display: flex; gap: 20px; overflow-x: auto; scroll-behavior: smooth; scrollbar-width: none; -ms-overflow-style: none; padding: 20px 5px; }
        .services-carousel::-webkit-scrollbar { display: none; }
        .carousel-item { flex: 0 0 280px; background: white; border-radius: var(--border-radius-lg); padding: 25px 20px; text-align: center; box-shadow: var(--shadow-md); border: 1px solid var(--gray-200); transition: all 0.3s ease; }
        .carousel-item:hover { transform: translateY(-5px); box-shadow: var(--shadow-lg); border-color: var(--primary-color); }
        .carousel-item .carousel-icon { width: 160px; height: 160px; margin: 0 auto 20px; border-radius: 20px; overflow: hidden; background: linear-gradient(135deg, rgba(42,110,255,0.1), rgba(0,168,150,0.1)); padding: 10px; border: 3px solid white; box-shadow: 0 8px 20px rgba(42,110,255,0.15); }
        .carousel-item .carousel-icon img { width: 100%; height: 100%; object-fit: cover; border-radius: 15px; }
        .carousel-item h3 { font-size: 1.2rem; margin-bottom: 10px; }
        .carousel-item p { font-size: 0.9rem; color: var(--gray-600); }
        .carousel-arrow { position: absolute; top: 50%; transform: translateY(-50%); width: 40px; height: 40px; background: white; border: 2px solid var(--gray-200); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s ease; color: var(--primary-color); font-size: 1.2rem; z-index: 10; }
        .carousel-arrow:hover { background: var(--primary-color); border-color: var(--primary-color); color: white; }
        .carousel-arrow.left { left: 0; }
        .carousel-arrow.right { right: 0; }

        .about { padding: 60px 0; background: white; }
        .about-content { max-width: 800px; margin: 0 auto; text-align: center; }
        .about-content p { font-size: 1rem; line-height: 1.8; margin-bottom: 20px; }
        .contact-info { margin-top: 30px; padding: 25px; background: linear-gradient(135deg, rgba(42,110,255,0.05), rgba(0,168,150,0.05)); border-radius: var(--border-radius-lg); border-left: 4px solid var(--primary-color); }
        .contact-info p { display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 12px; }
        .contact-info i { color: var(--primary-color); width: 20px; }

        footer { background: var(--dark-color); color: white; padding: 50px 0 20px; margin-top: auto; }
        .footer-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; margin-bottom: 30px; }
        .footer-logo img { height: 60px; width: auto; margin-bottom: 15px; }
        .footer-logo p { color: rgba(255,255,255,0.8); font-size: 0.95rem; }
        .footer-contact h4, .footer-links h4 { color: white; margin-bottom: 20px; }
        .footer-contact p { display: flex; align-items: flex-start; gap: 10px; color: rgba(255,255,255,0.8); margin-bottom: 12px; font-size: 0.95rem; }
        .footer-contact i { color: var(--primary-color); width: 20px; }
        .footer-contact a { color: white; }
        .footer-contact a:hover { color: var(--primary-color); }
        .footer-links ul { list-style: none; }
        .footer-links li { margin-bottom: 10px; }
        .footer-links a { color: rgba(255,255,255,0.8); }
        .footer-links a:hover { color: var(--primary-color); }
        .footer-bottom { text-align: center; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); color: rgba(255,255,255,0.6); font-size: 0.9rem; }
        .admin-discreet { margin-top: 15px; font-size: 0.8rem; opacity: 0.6; transition: opacity 0.3s; }
        .admin-discreet:hover { opacity: 1; }
        .admin-discreet a { color: rgba(255,255,255,0.5); text-decoration: none; border-bottom: 1px dotted rgba(255,255,255,0.3); }
        .admin-discreet a:hover { color: white; border-bottom-color: white; }

        .btn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 12px 28px; border: none; border-radius: var(--border-radius); cursor: pointer; font-size: 1rem; font-weight: 600; transition: all 0.3s ease; }
        .btn-primary { background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); color: white; box-shadow: 0 4px 12px rgba(42,110,255,0.3); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(42,110,255,0.4); }
        .btn-secondary { background: white; color: var(--primary-color); border: 2px solid var(--primary-color); }
        .btn-secondary:hover { background: var(--gray-100); }
        .btn-small { padding: 8px 16px; font-size: 0.9rem; }
        .btn-danger { background: var(--accent-color); color: white; }
        .btn-success { background: #00a896; color: white; }
        .btn-warning { background: #ff9800; color: white; }

        .schedule-form { padding: 40px 0; background: linear-gradient(135deg, var(--gray-100) 0%, #f0f2f5 100%); min-height: calc(100vh - 80px); }
        .form-container { max-width: 800px; margin: 0 auto; background: white; border-radius: var(--border-radius-lg); box-shadow: var(--shadow-lg); }
        .form-header { background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); color: white; padding: 30px; text-align: center; border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0; }
        .form-header h2 { color: white; margin-bottom: 10px; }
        .form-content { padding: 30px; }
        .form-section { background: var(--gray-100); border-radius: var(--border-radius-lg); padding: 25px; margin-bottom: 25px; border: 1px solid var(--gray-200); }
        .form-section h3 { margin-bottom: 20px; color: var(--primary-color); font-size: 1.2rem; display: flex; align-items: center; gap: 10px; }
        .form-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        .form-group { margin-bottom: 0; }
        .form-group label { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; font-weight: 600; font-size: 0.9rem; }
        .form-group label i { color: var(--primary-color); width: 16px; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 12px 15px; border: 2px solid var(--gray-300); border-radius: var(--border-radius); font-size: 0.95rem; transition: all 0.3s ease; }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus { border-color: var(--primary-color); outline: none; box-shadow: 0 0 0 3px rgba(42,110,255,0.1); }
        .form-group textarea { min-height: 100px; resize: vertical; }
        .required { color: var(--accent-color); margin-left: 4px; }
        .form-actions { display: flex; gap: 15px; margin-top: 20px; }
        .form-actions .btn { flex: 1; }
        .form-message { margin-top: 20px; padding: 15px; border-radius: var(--border-radius); display: none; }
        .form-message.success { background: rgba(0,200,83,0.1); color: #00c853; border: 1px solid rgba(0,200,83,0.2); display: block; }
        .form-message.error { background: rgba(255,107,107,0.1); color: var(--accent-color); border: 1px solid rgba(255,107,107,0.2); display: block; }
        .form-footer { text-align: center; margin-top: 30px; padding: 20px; background: linear-gradient(135deg, rgba(42,110,255,0.05), rgba(0,168,150,0.05)); border-radius: var(--border-radius); border-left: 4px solid var(--primary-color); }
        .conditional-field { display: none; }
        .dimension-group { display: flex; gap: 10px; }
        .dimension-group input { width: 50%; }

        .estimated-price-box { background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); color: white; padding: 20px; border-radius: var(--border-radius-lg); margin-bottom: 25px; text-align: center; box-shadow: var(--shadow-lg); position: relative; overflow: hidden; }
        .estimated-price-box::before { content: ''; position: absolute; top: -50%; right: -50%; width: 200%; height: 200%; background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%); animation: rotate 20s linear infinite; }
        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .estimated-price-box h4 { color: white; font-size: 1.1rem; margin-bottom: 10px; position: relative; z-index: 1; }
        .estimated-price-box .price-value { font-size: 2.5rem; font-weight: 800; line-height: 1; margin: 10px 0; position: relative; z-index: 1; }
        .estimated-price-box .price-detail { font-size: 0.9rem; opacity: 0.9; position: relative; z-index: 1; }
        /* Price loading indicator */
        .price-loading-badge { display: inline-block; background: rgba(255,193,7,0.15); color: #ff9800; border: 1px solid rgba(255,193,7,0.3); padding: 4px 10px; border-radius: 50px; font-size: 0.78rem; font-weight: 600; margin-bottom: 8px; }

        .admin-container { min-height: calc(100vh - 80px); padding: 40px 0; background: linear-gradient(135deg, var(--gray-100) 0%, #f0f2f5 100%); }
        .admin-login { display: flex; justify-content: center; align-items: center; min-height: calc(100vh - 80px); }
        .login-container { background: white; border-radius: var(--border-radius-lg); padding: 40px; box-shadow: var(--shadow-lg); max-width: 400px; width: 100%; text-align: center; }
        .admin-dashboard { padding: 20px 0; }
        .dashboard-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 20px; }
        .dashboard-tabs { display: flex; gap: 10px; margin-bottom: 30px; border-bottom: 2px solid var(--gray-200); padding-bottom: 10px; }
        .dashboard-tab { padding: 10px 20px; cursor: pointer; border-radius: var(--border-radius) var(--border-radius) 0 0; font-weight: 600; color: var(--gray-600); transition: all 0.3s ease; }
        .dashboard-tab:hover { color: var(--primary-color); }
        .dashboard-tab.active { color: var(--primary-color); border-bottom: 3px solid var(--primary-color); }
        .dashboard-tab-content { display: none; }
        .dashboard-tab-content.active { display: block; }
        .dashboard-stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 30px 0; }
        .stat-card { background: white; border-radius: var(--border-radius-lg); padding: 25px; display: flex; align-items: center; box-shadow: var(--shadow-md); border: 1px solid var(--gray-200); }
        .stat-icon { width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 15px; font-size: 1.5rem; color: white; }
        .stat-icon.pending { background: linear-gradient(135deg, #ffb74d, #ff9800); }
        .stat-icon.confirmed { background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)); }
        .stat-icon.completed { background: linear-gradient(135deg, #00c853, #00a896); }
        .stat-icon.total { background: linear-gradient(135deg, #9c27b0, #7b1fa2); }
        .stat-info h3 { font-size: 2rem; margin: 0 0 5px 0; }
        .stat-info p { color: var(--gray-600); margin: 0; }
        .filters { background: white; border-radius: var(--border-radius-lg); padding: 25px; margin-bottom: 30px; box-shadow: var(--shadow-md); }
        .filter-controls { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px; }

        /* Price Settings - Enhanced */
        .price-settings { background: white; border-radius: var(--border-radius-lg); padding: 30px; box-shadow: var(--shadow-md); }
        .price-settings-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; flex-wrap: wrap; gap: 15px; }
        .price-settings-header h3 { margin-bottom: 0; color: var(--primary-color); }
        .price-db-status { display: flex; align-items: center; gap: 8px; padding: 8px 16px; border-radius: 50px; font-size: 0.85rem; font-weight: 600; }
        .price-db-status.loading { background: rgba(255,193,7,0.1); color: #ff9800; border: 1px solid rgba(255,193,7,0.3); }
        .price-db-status.loaded { background: rgba(0,200,83,0.1); color: #00c853; border: 1px solid rgba(0,200,83,0.3); }
        .price-db-status.error { background: rgba(255,107,107,0.1); color: var(--accent-color); border: 1px solid rgba(255,107,107,0.3); }
        .price-last-updated { font-size: 0.8rem; color: var(--gray-600); margin-bottom: 25px; text-align: right; }

        .price-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; }
        .price-card { background: linear-gradient(135deg, #f8fafc 0%, #f0f7ff 100%); border-radius: var(--border-radius-lg); padding: 25px; border: 1px solid var(--gray-200); transition: all 0.3s ease; }
        .price-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-lg); border-color: var(--primary-color); }
        .price-card h4 { color: var(--primary-color); margin-bottom: 20px; display: flex; align-items: center; gap: 10px; border-bottom: 2px solid var(--primary-color); padding-bottom: 10px; }
        .price-card h4 i { font-size: 1.3rem; }
        .price-item { margin-bottom: 15px; }
        .price-item label { display: block; margin-bottom: 5px; font-weight: 600; color: var(--gray-800); font-size: 0.95rem; }
        .price-item input { width: 100%; padding: 10px; border: 2px solid var(--gray-300); border-radius: var(--border-radius); font-size: 1rem; transition: all 0.3s ease; }
        .price-item input:focus { border-color: var(--primary-color); outline: none; box-shadow: 0 0 0 3px rgba(42,110,255,0.1); }
        .price-item input.changed { border-color: #ff9800; background: rgba(255,193,7,0.05); }

        /* SQL Setup Info Box */
        .sql-info-box { background: #1a1a2e; color: #e2e8f0; border-radius: var(--border-radius-lg); padding: 20px; margin-bottom: 25px; }
        .sql-info-box h4 { color: #ffd700; margin-bottom: 10px; font-size: 1rem; display: flex; align-items: center; gap: 8px; }
        .sql-info-box pre { background: rgba(255,255,255,0.05); padding: 15px; border-radius: var(--border-radius); font-size: 0.8rem; overflow-x: auto; color: #a0e6a0; white-space: pre-wrap; word-break: break-word; }
        .sql-info-box p { color: rgba(255,255,255,0.7); font-size: 0.85rem; margin-bottom: 8px; }

        .service-requests { background: white; border-radius: var(--border-radius-lg); overflow: hidden; box-shadow: var(--shadow-md); }
        .table-header { padding: 20px 25px; border-bottom: 1px solid var(--gray-200); display: flex; justify-content: space-between; align-items: center; }
        .table-container { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; min-width: 1000px; }
        thead { background: linear-gradient(135deg, var(--dark-color), #1a202c); }
        th { padding: 15px 16px; text-align: left; color: white; font-weight: 600; font-size: 0.9rem; }
        tbody tr { border-bottom: 1px solid var(--gray-200); }
        tbody tr:hover { background-color: var(--gray-100); }
        td { padding: 15px 16px; color: var(--gray-800); }
        .status-badge { display: inline-flex; align-items: center; gap: 6px; padding: 6px 12px; border-radius: 50px; font-size: 0.85rem; font-weight: 600; border: 2px solid transparent; }
        .status-pending { background: rgba(255,183,77,0.1); color: #ff9800; border-color: rgba(255,183,77,0.3); }
        .status-confirmed { background: rgba(42,110,255,0.1); color: var(--primary-color); border-color: rgba(42,110,255,0.3); }
        .status-completed { background: rgba(0,200,83,0.1); color: #00c853; border-color: rgba(0,200,83,0.3); }
        .status-cancelled { background: rgba(255,107,107,0.1); color: var(--accent-color); border-color: rgba(255,107,107,0.3); }
        .action-buttons { display: flex; gap: 8px; }
        .pagination { display: flex; gap: 8px; justify-content: center; padding: 20px; flex-wrap: wrap; }
        .pagination button { padding: 8px 12px; border: 2px solid var(--gray-300); background: white; border-radius: var(--border-radius); cursor: pointer; min-width: 40px; transition: all 0.3s ease; }
        .pagination button:hover { background: var(--gray-100); border-color: var(--primary-color); }
        .pagination button.active { background: var(--primary-color); color: white; border-color: var(--primary-color); }

        .debug-panel { background: #1a1a2e; color: #fff; padding: 20px; border-radius: var(--border-radius-lg); margin-bottom: 30px; font-family: monospace; }
        .debug-panel h4 { color: #fff; margin-bottom: 15px; }
        .debug-info { background: rgba(255,255,255,0.1); padding: 15px; border-radius: var(--border-radius); margin-bottom: 15px; font-size: 0.9rem; white-space: pre-wrap; word-break: break-word; }
        .debug-success { color: #00c853; }
        .debug-error { color: #ff6b6b; }
        .debug-warning { color: #ff9800; }

        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); z-index: 1100; justify-content: center; align-items: center; padding: 20px; }
        .modal-content { background: white; width: 100%; max-width: 700px; border-radius: var(--border-radius-lg); max-height: 90vh; overflow-y: auto; }
        .modal-header { display: flex; justify-content: space-between; align-items: center; padding: 20px 25px; border-bottom: 1px solid var(--gray-200); }
        .modal-header h3 { margin: 0; font-size: 1.3rem; }
        .close-modal { font-size: 1.8rem; cursor: pointer; color: var(--gray-600); background: none; border: none; }
        .modal-body { padding: 25px; }
        .modal-form-group { margin-bottom: 20px; }
        .modal-form-group label { display: block; margin-bottom: 8px; font-weight: 600; }
        .modal-form-group input, .modal-form-group select, .modal-form-group textarea { width: 100%; padding: 12px 15px; border: 2px solid var(--gray-300); border-radius: var(--border-radius); }
        .modal-actions { display: flex; gap: 15px; margin-top: 25px; }
        .modal-actions .btn { flex: 1; }

        @media (max-width: 992px) {
            .nav-contact-info { display: none; }
            .menu-toggle { display: block; }
            .nav-links { position: fixed; top: 70px; left: 0; width: 100%; background: white; flex-direction: column; align-items: stretch; padding: 20px; box-shadow: var(--shadow-lg); transform: translateX(-100%); transition: transform 0.3s ease; z-index: 1000; max-height: calc(100vh - 70px); overflow-y: auto; }
            .nav-links.active { transform: translateX(0); }
            .nav-links a { display: block; padding: 15px; border-bottom: 1px solid var(--gray-200); }
            .different-grid, .testimonials-grid, .dashboard-stats, .price-grid { grid-template-columns: repeat(2, 1fr); }
            .gallery-grid { grid-template-columns: repeat(2, 1fr); }
            .gallery-card.featured { grid-column: span 2; grid-template-columns: 1fr; }
            .testimonials-carpet-grid { grid-template-columns: 1fr; }
        }
        @media (max-width: 768px) {
            .different-grid, .testimonials-grid, .gallery-grid, .price-grid { grid-template-columns: 1fr; }
            .gallery-card.featured { grid-column: span 1; }
            .form-grid { grid-template-columns: 1fr; }
            .dashboard-stats { grid-template-columns: 1fr; }
            .filter-controls { grid-template-columns: 1fr; }
            .carousel-item { flex: 0 0 240px; }
            .testimonial-carpet-card { flex-direction: column; text-align: center; }
            .price-settings-header { flex-direction: column; align-items: flex-start; }
        }
        @media (max-width: 480px) {
            .hero-btn { padding: 14px 30px; font-size: 1rem; }
            .hero-contact-info { flex-direction: column; gap: 10px; }
            .carousel-item { flex: 0 0 200px; }
            .carousel-item .carousel-icon { width: 140px; height: 140px; }
        }

        .text-center { text-align: center; }
        .mt-20 { margin-top: 20px; }
        .mb-20 { margin-bottom: 20px; }
        .hidden { display: none !important; }
        .toast { position: fixed; bottom: 20px; right: 20px; background: white; padding: 15px 20px; border-radius: var(--border-radius); box-shadow: var(--shadow-lg); display: flex; align-items: center; gap: 12px; max-width: 400px; z-index: 9999; border-left: 4px solid; animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { transform: translateX(100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
    </style>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <a href="#" onclick="showHomePage()">
                    <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/logo_marca_fundo.png" alt="Rio Cleaning" class="logo-img">
                </a>
            </div>
            <div class="nav-contact-info">
                <div class="nav-contact-item"><i class="fas fa-phone"></i><a href="tel:5192806261">519-280-6261</a></div>
                <div class="nav-contact-item"><i class="fas fa-map-marker-alt"></i><span>Calgary, Chestermere, Airdrie, Okotoks</span></div>
                <div class="nav-contact-item"><i class="fab fa-instagram instagram-link"></i><a href="https://www.instagram.com/riocleaningyyc" target="_blank">@riocleaningyyc</a></div>
            </div>
            <button class="menu-toggle" id="menuToggle"><i class="fas fa-bars"></i></button>
            <ul class="nav-links" id="navLinks">
                <li><a href="#home" onclick="scrollToSection('home')">Home</a></li>
                <li><a href="#different" onclick="scrollToSection('different')">Why Choose Us</a></li>
                <li><a href="#services-carousel" onclick="scrollToSection('services-carousel')">Services</a></li>
                <li><a href="#carpet-gallery" onclick="scrollToSection('carpet-gallery')">Carpet</a></li>
                <li><a href="#testimonials" onclick="scrollToSection('testimonials')">Reviews</a></li>
                <li><a href="#about" onclick="scrollToSection('about')">About</a></li>
                <li><a href="#" onclick="showScheduleForm()">Schedule</a></li>
            </ul>
        </div>
    </nav>

    <div id="mainContent">
        <section id="home" class="hero">
            <div class="hero-video-container">
                <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/website%20rio%20cleaning.png" alt="Rio Cleaning" class="hero-video">
                <div class="hero-overlay"></div>
            </div>
            <div class="container">
                <div class="hero-content">
                    <h1>Professional Cleaning Services <span>in Calgary</span></h1>
                    <p>Residential, Commercial, Post-Construction, Church Cleaning and more. Quality service with guaranteed satisfaction.</p>
                    <div class="hero-btn-container">
                        <button class="btn btn-primary hero-btn" onclick="showScheduleForm()"><i class="fas fa-calendar-check"></i> Free Quote</button>
                    </div>
                    <div class="hero-contact">
                        <div class="hero-contact-info">
                            <p><a href="tel:5192806261" class="contact-link"><i class="fas fa-phone"></i> 519-280-6261</a></p>
                            <p><a href="mailto:riocleaningyyc@gmail.com" class="contact-link"><i class="fas fa-envelope"></i> Email</a></p>
                            <p><a href="https://www.instagram.com/riocleaningyyc" target="_blank" class="contact-link"><i class="fab fa-instagram"></i> Instagram</a></p>
                            <p><i class="fas fa-map-marker-alt"></i> Calgary & Area</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="different" class="different-section">
            <div class="container">
                <h2 class="section-title">What Makes Rio Cleaning Different?</h2>
                <div class="different-grid">
                    <div class="different-card">
                        <div class="card-icon"><img src="https://images.unsplash.com/photo-1581578731548-c64695cc6952?w=500&h=500&fit=crop" alt="Deep Cleaning"></div>
                        <h3>A REAL CLEANING</h3>
                        <p>We don't believe that a quick wipe is enough. Our service goes beyond the surface and focuses on real, detailed deep cleaning.</p>
                    </div>
                    <div class="different-card">
                        <div class="card-icon"><img src="https://images.unsplash.com/photo-1600880292203-757bb62b4baf?w=500&h=500&fit=crop" alt="Affordable"></div>
                        <h3>AFFORDABLE</h3>
                        <p>High-quality service for a fair and honest price. We offer free quotes so you understand exactly what you're getting.</p>
                    </div>
                    <div class="different-card">
                        <div class="card-icon"><img src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=500&h=500&fit=crop" alt="Trustworthy"></div>
                        <h3>TRUSTWORTHY</h3>
                        <p>Trust is at the heart of everything we do. Professional, reliable, and responsible. Your home is treated with care.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="carpet-gallery" class="carpet-gallery-section">
            <div class="container">
                <h2 class="section-title">Carpet & Upholstery Cleaning</h2>
                <p class="text-center" style="max-width: 700px; margin: 0 auto 40px;">See the dramatic difference our professional cleaning makes. Before and after results that speak for themselves.</p>
                <div class="gallery-grid">
                    <div class="gallery-card featured">
                        <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/Ramon_foto.png" alt="Ramon - Satisfied Client" class="gallery-image">
                        <div class="gallery-content">
                            <span class="gallery-badge"><i class="fas fa-star"></i> Client Spotlight</span>
                            <h3>Ramon's Experience</h3>
                            <p>"I was amazed by the results! My carpets look brand new. The team was professional, on time, and paid attention to every detail. Highly recommend Rio Cleaning for anyone looking for quality carpet care."</p>
                            <div class="gallery-stats">
                                <div class="stat-item"><i class="fas fa-calendar-check"></i> 5+ years client</div>
                                <div class="stat-item"><i class="fas fa-thumbs-up"></i> 100% satisfied</div>
                            </div>
                        </div>
                    </div>
                    <div class="gallery-card">
                        <div class="before-after-label"><i class="fas fa-images"></i> Before & After</div>
                        <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/Capet_antes_depois.png" alt="Carpet Before and After" class="gallery-image">
                        <div class="gallery-content"><h3>Residential Carpet</h3><p>Deep cleaning removed years of embedded dirt and stains, restoring the carpet's original color and texture.</p></div>
                    </div>
                    <div class="gallery-card">
                        <div class="before-after-label"><i class="fas fa-images"></i> Before & After</div>
                        <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/Carpet_escritorio_antes_depois.png" alt="Office Carpet Before and After" class="gallery-image">
                        <div class="gallery-content"><h3>Commercial Office</h3><p>High-traffic office carpet revitalized, creating a fresh and professional environment for employees and clients.</p></div>
                    </div>
                    <div class="gallery-card">
                        <div class="before-after-label"><i class="fas fa-images"></i> Before & After</div>
                        <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/Estofado_antes_depois.png" alt="Upholstery Before and After" class="gallery-image">
                        <div class="gallery-content"><h3>Upholstery Cleaning</h3><p>Furniture deep cleaning that removes allergens, stains, and odors, extending the life of your pieces.</p></div>
                    </div>
                    <div class="gallery-card">
                        <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/Ramon.png" alt="Ramon's Clean Carpet" class="gallery-image">
                        <div class="gallery-content"><h3>Spotless Results</h3><p>Ramon's carpet after professional treatment - stain-free, fresh, and deeply cleaned.</p></div>
                    </div>
                    <div class="gallery-card">
                        <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/Resultado.png" alt="Final Cleaning Result" class="gallery-image">
                        <div class="gallery-content"><h3>Impeccable Finish</h3><p>The final result speaks for itself. Our process ensures every fiber is thoroughly cleaned and sanitized.</p></div>
                    </div>
                </div>
                <div class="carpet-testimonials">
                    <h3><i class="fas fa-quote-right"></i> What Clients Say About Our Carpet Cleaning</h3>
                    <div class="testimonials-carpet-grid">
                        <div class="testimonial-carpet-card">
                            <div class="testimonial-avatar"></div>
                            <div class="testimonial-carpet-content">
                                <p>"Incredible work! The Rio Cleaning team is extremely diligent, friendly and attentive to details. They did a fantastic job cleaning our carpet; when we got home everything smelled wonderful."</p>
                                <div class="testimonial-carpet-author">- Arthur de Oliveira Bandeira</div>
                                <div class="testimonial-carpet-date">4 days ago</div>
                            </div>
                        </div>
                        <div class="testimonial-carpet-card">
                            <div class="testimonial-avatar"></div>
                            <div class="testimonial-carpet-content">
                                <p>"Exceptional cleaning services! Total peace of mind during my recent move. They did a thorough deep cleaning of bathrooms and kitchen: that means cleaning literally every nook and cranny."</p>
                                <div class="testimonial-carpet-author">- Rodrigo Dal Ben</div>
                                <div class="testimonial-carpet-date">3 days ago</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="carpet-cta">
                    <button class="btn btn-primary" onclick="showScheduleForm()"><i class="fas fa-calendar-check"></i> Schedule Your Carpet Cleaning</button>
                </div>
            </div>
        </section>

        <section id="testimonials" class="testimonials-section">
            <div class="container">
                <h2 class="section-title">What Our Clients Say</h2>
                <div class="testimonials-grid">
                    <div class="testimonial-card"><div class="testimonial-rating"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div><p class="testimonial-text">"I hired Rio to make sure my apartment was perfect for the move‑out inspection. It was definitely the best investment – we got our full security deposit back and I could focus on unpacking in our new home. Thank you Sabrina and team for the incredible work!"</p><p class="testimonial-author">- Thais Gonçalves</p><p class="testimonial-date">5 months ago</p></div>
                    <div class="testimonial-card"><div class="testimonial-rating"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div><p class="testimonial-text">"Rio Cleaning YYC exceeded my expectations. The cleaning was impeccable and detailed, exactly what I needed for my home. I recommend their services without reservation."</p><p class="testimonial-author">- Marina Barreto</p><p class="testimonial-date">4 days ago (edited)</p></div>
                    <div class="testimonial-card"><div class="testimonial-rating"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div><p class="testimonial-text">"I highly recommend Rio Cleaning YYC for their reliable and trustworthy service. I couldn't be more satisfied. What really stood out was the comfort I felt trusting my home and belongings to them."</p><p class="testimonial-author">- Tata Miller</p><p class="testimonial-date">7 months ago</p></div>
                    <div class="testimonial-card"><div class="testimonial-rating"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div><p class="testimonial-text">"I was lucky to have Sabrina clean my house – I've never seen a house so clean!! She is extremely detail‑oriented, very experienced and professional. Also very fast and doesn't waste time. I will definitely hire Rio Cleaning again!"</p><p class="testimonial-author">- Gabriela Camarotti</p><p class="testimonial-date">8 months ago</p></div>
                    <div class="testimonial-card"><div class="testimonial-rating"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div><p class="testimonial-text">"Sabrina from Rio Cleaning is incredibly attentive to details and always goes the extra mile, cleaning areas most people wouldn't even think of. It's rare to find someone who takes such pride in their own work."</p><p class="testimonial-author">- Aghata Oliveira</p><p class="testimonial-date">8 months ago</p></div>
                    <div class="testimonial-card"><div class="testimonial-rating"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div><p class="testimonial-text">"A true lifesaver. The cleaning is done with great care and attention from start to finish. They really clean everything, on top and under cabinets; my bathrooms are unrecognizable."</p><p class="testimonial-author">- jozzi jordao</p><p class="testimonial-date">8 months ago</p></div>
                    <div class="testimonial-card"><div class="testimonial-rating"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div><p class="testimonial-text">"I had an amazing experience with the cleaning service provided by this company. Everything was absolutely perfect, they paid attention to every detail, worked quickly and efficiently and left the space spotless."</p><p class="testimonial-author">- Iris Specht</p><p class="testimonial-date">8 months ago</p></div>
                    <div class="testimonial-card"><div class="testimonial-rating"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div><p class="testimonial-text">"The best cleaning services in town! Highly recommend."</p><p class="testimonial-author">- Sandro Brito</p><p class="testimonial-date">2 days ago</p></div>
                    <div class="testimonial-card"><div class="testimonial-rating"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div><p class="testimonial-text">"Exceptional cleaning services! Total peace of mind during my recent move. They did a thorough deep cleaning of bathrooms and kitchen: that means cleaning literally every nook and cranny of tubs, showers, cabinets..."</p><p class="testimonial-author">- Rodrigo Dal Ben</p><p class="testimonial-date">3 days ago</p></div>
                    <div class="testimonial-card"><div class="testimonial-rating"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div><p class="testimonial-text">"Incredible work! The Rio Cleaning team is extremely diligent, friendly and attentive to details. They did a fantastic job cleaning our carpet; when we got home everything smelled wonderful."</p><p class="testimonial-author">- Arthur de Oliveira Bandeira</p><p class="testimonial-date">4 days ago</p></div>
                    <div class="testimonial-card"><div class="testimonial-rating"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div><p class="testimonial-text">"I recently hired Rio Cleaning for a deep cleaning of my house and was extremely impressed with the service. Attention to detail is exceptional — they didn't leave any corner uncleaned. The team went above and beyond."</p><p class="testimonial-author">- Heloisa0702</p><p class="testimonial-date">1 week ago</p></div>
                </div>
                <div class="google-reviews-link">
                    <a href="https://www.google.com/search?q=Rio+Cleaning+YYC" target="_blank" class="btn btn-primary"><i class="fab fa-google"></i> See All Reviews</a>
                </div>
            </div>
        </section>

        <section id="services-carousel" class="services-carousel-section">
            <div class="container">
                <h2 class="section-title">Our Services</h2>
                <div class="carousel-container">
                    <div class="carousel-arrow left" onclick="scrollCarousel(-1)"><i class="fas fa-chevron-left"></i></div>
                    <div class="services-carousel" id="servicesCarousel">
                        <div class="carousel-item"><div class="carousel-icon"><img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/Move%20in-%20move%20out.jpeg" alt="Move In/Out"></div><h3>Move In/Out</h3><p>Professional move-in and move-out cleaning with deposit guarantee.</p></div>
                        <div class="carousel-item"><div class="carousel-icon"><img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/post-construction.png" alt="Post-Construction"></div><h3>Post-Construction</h3><p>Detailed cleaning after construction or renovation.</p></div>
                        <div class="carousel-item"><div class="carousel-icon"><img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/limpeza1.jpg" alt="Commercial"></div><h3>Commercial</h3><p>Tailored cleaning for offices and businesses.</p></div>
                        <div class="carousel-item"><div class="carousel-icon"><img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/limpeza2.jpg" alt="Worship"></div><h3>Worship Facility</h3><p>Respectful cleaning for worship spaces.</p></div>
                        <div class="carousel-item"><div class="carousel-icon"><img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/limpeza5.jpg" alt="Residential"></div><h3>Residential</h3><p>High-quality home cleaning services.</p></div>
                        <div class="carousel-item"><div class="carousel-icon"><img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/carpet%20cleaning.png" alt="Carpet"></div><h3>Carpet Cleaning</h3><p>Deep clean with professional equipment.</p></div>
                        <div class="carousel-item"><div class="carousel-icon"><img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/RV%20cleaning.jpg.jpeg" alt="RV"></div><h3>RV Cleaning</h3><p>Detailed interior RV cleaning.</p></div>
                    </div>
                    <div class="carousel-arrow right" onclick="scrollCarousel(1)"><i class="fas fa-chevron-right"></i></div>
                </div>
            </div>
        </section>

        <section id="about" class="about">
            <div class="container">
                <div class="about-content">
                    <h2 class="section-title">About Rio Cleaning</h2>
                    <p>At Rio Cleaning, we believe in providing more than just a surface clean. We're committed to delivering real, detailed deep cleaning that makes a noticeable difference in your space.</p>
                    <p>Our team is professionally trained, bonded, and insured. We bring our own transportation and environmentally preferable cleaning products to every job.</p>
                    <p>We serve Calgary, Chestermere, Airdrie, and Okotoks with reliable, high-quality cleaning services.</p>
                    <div class="contact-info">
                        <p><i class="fas fa-phone"></i> <a href="tel:5192806261">519-280-6261</a></p>
                        <p><i class="fas fa-envelope"></i> <a href="mailto:riocleaningyyc@gmail.com">riocleaningyyc@gmail.com</a></p>
                        <p><i class="fab fa-instagram"></i> <a href="https://www.instagram.com/riocleaningyyc" target="_blank">@riocleaningyyc</a></p>
                        <p><i class="fas fa-map-marker-alt"></i> Calgary, Chestermere, Airdrie, Okotoks</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Schedule Form -->
    <div id="scheduleFormContainer" class="schedule-form" style="display: none;">
        <div class="container">
            <div class="form-container">
                <div class="form-header">
                    <h2>Schedule Your Cleaning</h2>
                    <p>Fill out the form and we'll contact you to confirm.</p>
                </div>
                <div class="form-content">
                    <form id="cleaningServiceForm">
                        <div class="form-section">
                            <h3><i class="fas fa-user"></i> Personal Information</h3>
                            <div class="form-grid">
                                <div class="form-group"><label><i class="fas fa-user-circle"></i> Full Name <span class="required">*</span></label><input type="text" id="fullName" required placeholder="Your name"></div>
                                <div class="form-group"><label><i class="fas fa-phone"></i> Phone <span class="required">*</span></label><input type="tel" id="phone" required placeholder="(519) 280-6261"></div>
                                <div class="form-group"><label><i class="fas fa-envelope"></i> Email <span class="required">*</span></label><input type="email" id="email" required placeholder="your@email.com"></div>
                                <div class="form-group"><label><i class="fas fa-map-marker-alt"></i> Address <span class="required">*</span></label><input type="text" id="address" required placeholder="Full address"></div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3><i class="fas fa-broom"></i> Service Details</h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label><i class="fas fa-tasks"></i> Service Type <span class="required">*</span></label>
                                    <select id="serviceType" required onchange="updateConditionalFields(); calculateEstimatedPrice();">
                                        <option value="">Select</option>
                                        <option value="move">Move In/Out Cleaning</option>
                                        <option value="construction">Post-Construction</option>
                                        <option value="commercial">Commercial Cleaning</option>
                                        <option value="church">Worship Facility</option>
                                        <option value="residential">Residential Cleaning</option>
                                        <option value="carpet">Carpet Cleaning</option>
                                        <option value="rv">RV Cleaning</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group conditional-field residential-fields" style="display:none">
                                    <label><i class="fas fa-bed"></i> Bedrooms</label>
                                    <select id="bedrooms" onchange="calculateEstimatedPrice()"><option value="0">None</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5+</option></select>
                                </div>
                                <div class="form-group conditional-field residential-fields" style="display:none">
                                    <label><i class="fas fa-bath"></i> Bathrooms</label>
                                    <select id="bathrooms" onchange="calculateEstimatedPrice()"><option value="0">None</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5+</option></select>
                                </div>
                                <div class="form-group conditional-field residential-fields" style="display:none">
                                    <label><i class="fas fa-shower"></i> Shower Box</label>
                                    <select id="showerBoxCount" onchange="calculateEstimatedPrice()"><option value="0">None</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4+</option></select>
                                </div>
                                <div class="form-group conditional-field carpet-field" style="display:none; grid-column: span 2;">
                                    <label><i class="fas fa-ruler"></i> Carpet Dimensions (sq ft)</label>
                                    <div class="dimension-group">
                                        <input type="number" id="carpetLength" placeholder="Length (ft)" min="0" step="0.1" onchange="calculateEstimatedPrice()">
                                        <input type="number" id="carpetWidth" placeholder="Width (ft)" min="0" step="0.1" onchange="calculateEstimatedPrice()">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label><i class="fas fa-paw"></i> Pets?</label>
                                    <select id="hasPets" onchange="togglePetCount(); calculateEstimatedPrice();"><option value="false">No</option><option value="true">Yes</option></select>
                                </div>
                                <div class="form-group" id="petCountGroup" style="display:none">
                                    <label><i class="fas fa-dog"></i> How many?</label>
                                    <input type="number" id="petCount" min="0" value="0" onchange="calculateEstimatedPrice()">
                                </div>
                                <div class="form-group">
                                    <label><i class="fas fa-child"></i> Children?</label>
                                    <select id="hasChildren" onchange="toggleChildrenCount(); calculateEstimatedPrice();"><option value="false">No</option><option value="true">Yes</option></select>
                                </div>
                                <div class="form-group" id="childrenCountGroup" style="display:none">
                                    <label><i class="fas fa-baby"></i> How many?</label>
                                    <input type="number" id="childrenCount" min="0" value="0" onchange="calculateEstimatedPrice()">
                                </div>
                                <div class="form-group"><label><i class="fas fa-calendar"></i> Date <span class="required">*</span></label><input type="text" id="cleaningDate" class="datepicker" required placeholder="Select date"></div>
                                <div class="form-group">
                                    <label><i class="fas fa-clock"></i> Time <span class="required">*</span></label>
                                    <select id="cleaningTime" required><option value="">Select</option><option value="morning">Morning (8-12)</option><option value="afternoon">Afternoon (1-5)</option><option value="evening">Evening (6-8)</option></select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3><i class="fas fa-file-alt"></i> Description</h3>
                            <div class="form-group"><textarea id="description" rows="4" required placeholder="Describe what you need cleaned..."></textarea></div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary"><i class="fas fa-paper-plane"></i> Submit</button>
                        </div>
                        <div id="formMessage" class="form-message"></div>
                        <div class="estimated-price-box" id="estimatedPriceBox" style="display: none;">
                            <h4><i class="fas fa-calculator"></i> Estimated Price</h4>
                            <div class="price-value" id="estimatedPriceValue">$0.00</div>
                            <div class="price-detail" id="estimatedPriceDetail">Based on current rates</div>
                        </div>
                    </form>
                    <div class="form-footer"><p><i class="fas fa-info-circle"></i> We'll contact you within 24 hours.</p></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="admin-container" style="display: none;">
        <div id="adminLogin" class="admin-login">
            <div class="login-container">
                <h2><i class="fas fa-lock"></i> Admin Login</h2>
                <p>Enter credentials</p>
                <div class="form-group"><input type="text" id="adminUsername" placeholder="Username"></div>
                <div class="form-group"><input type="password" id="adminPassword" placeholder="Password"></div>
                <button id="loginBtn" class="btn btn-primary">Login</button>
                <div id="loginMessage" class="form-message mt-20"></div>
                <button class="btn btn-secondary mt-20" onclick="showHomePage()">Back to Home</button>
            </div>
        </div>
        
        <div id="adminDashboard" class="admin-dashboard" style="display: none;">
            <div class="container">
                <div class="dashboard-header">
                    <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
                    <div style="display:flex; gap:10px; flex-wrap:wrap;">
                        <button id="testConnectionBtn" class="btn btn-warning"><i class="fas fa-vial"></i> Test Connection</button>
                        <button id="exportExcelBtn" class="btn btn-success"><i class="fas fa-file-excel"></i> Export</button>
                        <button class="btn btn-danger" onclick="logoutAdmin()"><i class="fas fa-sign-out-alt"></i> Logout</button>
                    </div>
                </div>
                
                <div id="debugPanel" class="debug-panel" style="display: none;">
                    <h4><i class="fas fa-bug"></i> Debug Information</h4>
                    <div id="debugInfo" class="debug-info">Loading debug information...</div>
                    <button class="btn btn-secondary btn-small" onclick="hideDebugPanel()">Hide Debug</button>
                </div>
                
                <div class="dashboard-tabs">
                    <div class="dashboard-tab active" onclick="switchAdminTab('requests')">Service Requests</div>
                    <div class="dashboard-tab" onclick="switchAdminTab('prices')">Price Settings</div>
                </div>
                
                <div id="requestsTab" class="dashboard-tab-content active">
                    <div class="dashboard-stats">
                        <div class="stat-card"><div class="stat-icon pending"><i class="fas fa-clock"></i></div><div class="stat-info"><h3 id="pendingCount">0</h3><p>Pending</p></div></div>
                        <div class="stat-card"><div class="stat-icon confirmed"><i class="fas fa-check-circle"></i></div><div class="stat-info"><h3 id="confirmedCount">0</h3><p>Confirmed</p></div></div>
                        <div class="stat-card"><div class="stat-icon completed"><i class="fas fa-flag-checkered"></i></div><div class="stat-info"><h3 id="completedCount">0</h3><p>Completed</p></div></div>
                        <div class="stat-card"><div class="stat-icon total"><i class="fas fa-dollar-sign"></i></div><div class="stat-info"><h3 id="totalValueConfirmed">$0</h3><p>Confirmed Value</p></div></div>
                    </div>
                    <div class="filters">
                        <h3>Service Requests</h3>
                        <div class="filter-controls">
                            <select id="statusFilter"><option value="all">All Status</option><option value="pending">Pending</option><option value="confirmed">Confirmed</option><option value="completed">Completed</option><option value="cancelled">Cancelled</option></select>
                            <select id="dateFilter"><option value="all">All Dates</option><option value="today">Today</option><option value="week">This Week</option><option value="month">This Month</option></select>
                            <input type="text" id="searchFilter" placeholder="Search...">
                            <button id="refreshBtn" class="btn btn-secondary"><i class="fas fa-sync-alt"></i> Refresh</button>
                        </div>
                    </div>
                    <div class="service-requests">
                        <div class="table-header"><h4>Requests</h4><span id="tableInfo">Showing 0 requests</span></div>
                        <div class="table-container">
                            <table id="requestsTable">
                                <thead><tr><th>Name</th><th>Contact</th><th>Service</th><th>Date/Time</th><th>Status</th><th>Value</th><th>Actions</th></tr></thead>
                                <tbody id="requestsTableBody"><tr><td colspan="7" style="text-align:center; padding: 40px;"><i class="fas fa-spinner fa-spin"></i> Loading requests...</td></tr></tbody>
                            </table>
                        </div>
                        <div class="pagination" id="pagination"></div>
                    </div>
                </div>
                
                <!-- Price Settings Tab - Enhanced with DB integration -->
                <div id="pricesTab" class="dashboard-tab-content">
                    <div class="price-settings">
                        <div class="price-settings-header">
                            <h3><i class="fas fa-tags"></i> Price Settings</h3>
                            <div id="priceDbStatus" class="price-db-status loading">
                                <i class="fas fa-sync-alt fa-spin"></i> Loading from database...
                            </div>
                        </div>
                        <p id="priceLastUpdated" class="price-last-updated" style="display:none;"></p>
                        
                        <!-- SQL Setup Info (shown only if table doesn't exist) -->
                        <div id="sqlInfoBox" class="sql-info-box" style="display:none;">
                            <h4><i class="fas fa-database"></i> Database Setup Required</h4>
                            <p>The <strong>price_settings</strong> table was not found or cannot be accessed. Run this SQL in your <strong>Supabase → SQL Editor</strong>:</p>
                            <pre>-- 1. Create the table
CREATE TABLE IF NOT EXISTS price_settings (
  id uuid DEFAULT gen_random_uuid() PRIMARY KEY,
  base numeric DEFAULT 50,
  bedroom numeric DEFAULT 35,
  bathroom numeric DEFAULT 40,
  shower numeric DEFAULT 25,
  carpet_sq_ft numeric DEFAULT 0.35,
  carpet_min numeric DEFAULT 50,
  move_base numeric DEFAULT 120,
  move_bedroom numeric DEFAULT 35,
  move_bathroom numeric DEFAULT 40,
  construction_base numeric DEFAULT 150,
  commercial_base numeric DEFAULT 100,
  church_base numeric DEFAULT 120,
  rv_medium numeric DEFAULT 200,
  pet_fee numeric DEFAULT 10,
  child_fee numeric DEFAULT 0,
  updated_at timestamptz DEFAULT now()
);

-- 2. Enable RLS and allow anonymous access
ALTER TABLE price_settings ENABLE ROW LEVEL SECURITY;
DROP POLICY IF EXISTS "anon_all_price" ON price_settings;
CREATE POLICY "anon_all_price" ON price_settings
  FOR ALL TO anon USING (true) WITH CHECK (true);

-- 3. Insert first row with defaults
INSERT INTO price_settings (base) VALUES (50)
ON CONFLICT DO NOTHING;</pre>
                            <p style="margin-top:10px;">After running, click <strong>Reload from Database</strong> below.</p>
                        </div>
                        
                        <div class="price-grid" id="priceGrid">
                            <div class="price-card">
                                <h4><i class="fas fa-home"></i> Residential Cleaning</h4>
                                <div class="price-item"><label>Base Rate ($)</label><input type="number" id="priceBase" class="price-input" value="50" min="0" step="5" onchange="markChanged(this)"></div>
                                <div class="price-item"><label>Per Bedroom ($)</label><input type="number" id="priceBedroom" class="price-input" value="35" min="0" step="5" onchange="markChanged(this)"></div>
                                <div class="price-item"><label>Per Bathroom ($)</label><input type="number" id="priceBathroom" class="price-input" value="40" min="0" step="5" onchange="markChanged(this)"></div>
                                <div class="price-item"><label>Per Shower Box ($)</label><input type="number" id="priceShower" class="price-input" value="25" min="0" step="5" onchange="markChanged(this)"></div>
                            </div>
                            <div class="price-card">
                                <h4><i class="fas fa-rug"></i> Carpet Cleaning</h4>
                                <div class="price-item"><label>Per Square Foot ($/sq ft)</label><input type="number" id="priceCarpetSqFt" class="price-input" value="0.35" min="0" step="0.05" onchange="markChanged(this)"></div>
                                <div class="price-item"><label>Minimum Charge ($)</label><input type="number" id="priceCarpetMin" class="price-input" value="50" min="0" step="5" onchange="markChanged(this)"></div>
                            </div>
                            <div class="price-card">
                                <h4><i class="fas fa-truck-moving"></i> Move In/Out</h4>
                                <div class="price-item"><label>Base Rate ($)</label><input type="number" id="priceMoveBase" class="price-input" value="120" min="0" step="10" onchange="markChanged(this)"></div>
                                <div class="price-item"><label>Per Bedroom ($)</label><input type="number" id="priceMoveBedroom" class="price-input" value="35" min="0" step="5" onchange="markChanged(this)"></div>
                                <div class="price-item"><label>Per Bathroom ($)</label><input type="number" id="priceMoveBathroom" class="price-input" value="40" min="0" step="5" onchange="markChanged(this)"></div>
                            </div>
                            <div class="price-card">
                                <h4><i class="fas fa-hard-hat"></i> Post-Construction</h4>
                                <div class="price-item"><label>Base Rate ($)</label><input type="number" id="priceConstructionBase" class="price-input" value="150" min="0" step="10" onchange="markChanged(this)"></div>
                            </div>
                            <div class="price-card">
                                <h4><i class="fas fa-building"></i> Commercial</h4>
                                <div class="price-item"><label>Base Rate ($)</label><input type="number" id="priceCommercialBase" class="price-input" value="100" min="0" step="10" onchange="markChanged(this)"></div>
                            </div>
                            <div class="price-card">
                                <h4><i class="fas fa-church"></i> Worship Facility</h4>
                                <div class="price-item"><label>Base Rate ($)</label><input type="number" id="priceChurchBase" class="price-input" value="120" min="0" step="10" onchange="markChanged(this)"></div>
                            </div>
                            <div class="price-card">
                                <h4><i class="fas fa-campground"></i> RV Cleaning</h4>
                                <div class="price-item"><label>Medium RV ($)</label><input type="number" id="priceRvMedium" class="price-input" value="200" min="0" step="10" onchange="markChanged(this)"></div>
                            </div>
                            <div class="price-card">
                                <h4><i class="fas fa-plus-circle"></i> Additional Fees</h4>
                                <div class="price-item"><label>Per Pet ($)</label><input type="number" id="pricePetFee" class="price-input" value="10" min="0" step="5" onchange="markChanged(this)"></div>
                                <div class="price-item"><label>Per Child ($)</label><input type="number" id="priceChildFee" class="price-input" value="0" min="0" step="5" onchange="markChanged(this)"></div>
                            </div>
                        </div>
                        
                        <div class="form-actions mt-20" style="display: flex; gap: 10px; justify-content: center;">
                            <button class="btn btn-primary" onclick="savePriceSettings()" id="savePricesBtn">
                                <i class="fas fa-save"></i> Save Prices to Database
                            </button>
                            <button class="btn btn-secondary" onclick="loadPriceSettings()">
                                <i class="fas fa-sync-alt"></i> Reload from Database
                            </button>
                            <button class="btn btn-warning" onclick="resetPriceSettings()">
                                <i class="fas fa-undo"></i> Reset to Defaults
                            </button>
                        </div>
                        
                        <div class="form-message" id="priceSettingsMessage" style="margin-top: 20px; display: none;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-edit"></i> Edit Service Request</h3>
                <button class="close-modal" onclick="closeEditModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editServiceForm">
                    <input type="hidden" id="editRequestId">
                    <div class="modal-form-group"><label>Full Name *</label><input type="text" id="editFullName" required></div>
                    <div class="modal-form-group"><label>Phone Number *</label><input type="tel" id="editPhone" required></div>
                    <div class="modal-form-group"><label>Email Address *</label><input type="email" id="editEmail" required></div>
                    <div class="modal-form-group"><label>Address *</label><input type="text" id="editAddress" required></div>
                    <div class="modal-form-group"><label>Service Type *</label><select id="editServiceType" required><option value="">Select</option><option value="move">Move In/Out</option><option value="construction">Post-Construction</option><option value="commercial">Commercial</option><option value="church">Worship Facility</option><option value="residential">Residential</option><option value="carpet">Carpet</option><option value="rv">RV</option><option value="other">Other</option></select></div>
                    <div class="modal-form-group"><label>Bedrooms</label><select id="editBedrooms"><option value="0">None</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5+</option></select></div>
                    <div class="modal-form-group"><label>Bathrooms</label><select id="editBathrooms"><option value="0">None</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5+</option></select></div>
                    <div class="modal-form-group"><label>Shower Box</label><select id="editShowerBoxCount"><option value="0">None</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4+</option></select></div>
                    <div class="modal-form-group"><label>Pets?</label><select id="editHasPets"><option value="false">No</option><option value="true">Yes</option></select></div>
                    <div class="modal-form-group"><label>Number of Pets</label><input type="number" id="editPetCount" value="0"></div>
                    <div class="modal-form-group"><label>Children?</label><select id="editHasChildren"><option value="false">No</option><option value="true">Yes</option></select></div>
                    <div class="modal-form-group"><label>Number of Children</label><input type="number" id="editChildrenCount" value="0"></div>
                    <div class="modal-form-group"><label>Cleaning Date *</label><input type="date" id="editCleaningDate" required></div>
                    <div class="modal-form-group"><label>Cleaning Time *</label><select id="editCleaningTime" required><option value="">Select</option><option value="morning">Morning</option><option value="afternoon">Afternoon</option><option value="evening">Evening</option></select></div>
                    <div class="modal-form-group"><label>Status *</label><select id="editStatus" required><option value="pending">Pending</option><option value="confirmed">Confirmed</option><option value="completed">Completed</option><option value="cancelled">Cancelled</option></select></div>
                    <div class="modal-form-group"><label>Agreed Value ($)</label><input type="number" id="editAgreedValue" step="0.01" value="0"></div>
                    <div class="modal-form-group"><label>Description *</label><textarea id="editDescription" rows="4" required></textarea></div>
                    <div class="modal-actions">
                        <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Save</button>
                        <button type="button" class="btn btn-secondary" onclick="closeEditModal()"><i class="fas fa-times"></i> Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/logo_marca_fundo.png" alt="Rio Cleaning">
                    <p>Professional cleaning services in Calgary and surrounding areas.</p>
                </div>
                <div class="footer-contact">
                    <h4>Contact</h4>
                    <p><i class="fas fa-phone"></i> <a href="tel:5192806261">519-280-6261</a></p>
                    <p><i class="fas fa-envelope"></i> <a href="mailto:riocleaningyyc@gmail.com">riocleaningyyc@gmail.com</a></p>
                    <p><i class="fab fa-instagram"></i> <a href="https://www.instagram.com/riocleaningyyc" target="_blank">@riocleaningyyc</a></p>
                    <p><i class="fas fa-map-marker-alt"></i> Calgary, Chestermere, Airdrie, Okotoks</p>
                </div>
                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#" onclick="showHomePage()">Home</a></li>
                        <li><a href="#different" onclick="scrollToSection('different')">Why Choose Us</a></li>
                        <li><a href="#services-carousel" onclick="scrollToSection('services-carousel')">Services</a></li>
                        <li><a href="#carpet-gallery" onclick="scrollToSection('carpet-gallery')">Carpet</a></li>
                        <li><a href="#testimonials" onclick="scrollToSection('testimonials')">Reviews</a></li>
                        <li><a href="#" onclick="showScheduleForm()">Schedule</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; <span id="currentYear"></span> Rio Cleaning Services. All rights reserved.</p>
                <div class="admin-discreet"><a href="#" onclick="showAdminPanel()"><i class="fas fa-lock"></i> admin</a></div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <script>
        // ============================================================
        // CONFIG
        // ============================================================
        const ADMIN_CREDENTIALS = { username: "admin_rio_cleaning", password: "SecurePass2024!" };
        const SB_URL  = 'https://nekbbkenxcukoortusge.supabase.co';
        const SB_KEY  = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5la2Jia2VueGN1a29vcnR1c2dlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzOTU5MDIsImV4cCI6MjA3ODk3MTkwMn0.D72914Vyz1du1ZDKoNDdwT7YI-D8WPgZe38LbBV2bfc';

        // ============================================================
        // SUPABASE REST WRAPPER — no CDN library needed
        // ============================================================
        const sb = {
            _h: { 'apikey': SB_KEY, 'Authorization': 'Bearer ' + SB_KEY, 'Content-Type': 'application/json', 'Prefer': 'return=representation' },

            async select(table, query = '') {
                const r = await fetch(`${SB_URL}/rest/v1/${table}?${query}`, { headers: this._h });
                const d = await r.json();
                if (!r.ok) return { data: null, error: d, count: 0 };
                const count = parseInt(r.headers.get('content-range')?.split('/')[1]) || d.length;
                return { data: d, error: null, count };
            },

            async selectCount(table, query = '') {
                const r = await fetch(`${SB_URL}/rest/v1/${table}?${query}`, {
                    headers: { ...this._h, 'Prefer': 'count=exact', 'Range-Unit': 'items', 'Range': '0-0' }
                });
                const total = parseInt(r.headers.get('content-range')?.split('/')[1]) || 0;
                const d = await r.json();
                if (!r.ok) return { data: null, error: d, count: 0 };
                return { data: d, error: null, count: total };
            },

            async insert(table, row) {
                const r = await fetch(`${SB_URL}/rest/v1/${table}`, {
                    method: 'POST', headers: this._h, body: JSON.stringify(row)
                });
                const d = await r.json();
                if (!r.ok) return { data: null, error: d };
                return { data: Array.isArray(d) ? d : [d], error: null };
            },

            async update(table, row, match) {
                const qs = Object.entries(match).map(([k,v]) => `${k}=eq.${v}`).join('&');
                const r = await fetch(`${SB_URL}/rest/v1/${table}?${qs}`, {
                    method: 'PATCH', headers: this._h, body: JSON.stringify(row)
                });
                const d = await r.json();
                if (!r.ok) return { data: null, error: d };
                return { data: Array.isArray(d) ? d : [d], error: null };
            },

            async delete(table, match) {
                const qs = Object.entries(match).map(([k,v]) => `${k}=eq.${v}`).join('&');
                const r = await fetch(`${SB_URL}/rest/v1/${table}?${qs}`, {
                    method: 'DELETE', headers: { ...this._h, 'Prefer': '' }
                });
                return { error: r.ok ? null : await r.json() };
            }
        };

        // ============================================================
        // APP STATE
        // ============================================================
        var currentPage = 1;
        const pageSize  = 10;
        var currentFilters     = { status: 'all', date: 'all', search: '' };
        var flatpickrInstance  = null;
        var priceSettingsDbId  = null;
        var priceSettingsLoaded = false;
        var priceSettings = getDefaultPriceSettings();

        // ============================================================
        // DOM READY
        // ============================================================
        document.addEventListener('DOMContentLoaded', function() {
            initMobileMenu();
            initScheduleForm();
            initAdminPanel();
            initEditModal();
            initConditionalFields();
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            updateConditionalFields();
            loadPriceSettings(false); // load for schedule form estimate
        });

        // ============================================================
        // PRICE SETTINGS — DEFAULTS
        // ============================================================
        function getDefaultPriceSettings() {
            return {
                base: 50, bedroom: 35, bathroom: 40, shower: 25,
                carpetSqFt: 0.35, carpetMin: 50,
                moveBase: 120, moveBedroom: 35, moveBathroom: 40,
                constructionBase: 150, commercialBase: 100, churchBase: 120,
                rvMedium: 200, petFee: 10, childFee: 0
            };
        }

        function mapDbToSettings(row) {
            return {
                base:             parseFloat(row.base)              ?? 50,
                bedroom:          parseFloat(row.bedroom)           ?? 35,
                bathroom:         parseFloat(row.bathroom)          ?? 40,
                shower:           parseFloat(row.shower)            ?? 25,
                carpetSqFt:       parseFloat(row.carpet_sq_ft)      ?? 0.35,
                carpetMin:        parseFloat(row.carpet_min)        ?? 50,
                moveBase:         parseFloat(row.move_base)         ?? 120,
                moveBedroom:      parseFloat(row.move_bedroom)      ?? 35,
                moveBathroom:     parseFloat(row.move_bathroom)     ?? 40,
                constructionBase: parseFloat(row.construction_base) ?? 150,
                commercialBase:   parseFloat(row.commercial_base)   ?? 100,
                churchBase:       parseFloat(row.church_base)       ?? 120,
                rvMedium:         parseFloat(row.rv_medium)         ?? 200,
                petFee:           parseFloat(row.pet_fee)           ?? 10,
                childFee:         parseFloat(row.child_fee)         ?? 0
            };
        }

        function settingsToDbRow(s) {
            return {
                base: s.base, bedroom: s.bedroom, bathroom: s.bathroom, shower: s.shower,
                carpet_sq_ft: s.carpetSqFt, carpet_min: s.carpetMin,
                move_base: s.moveBase, move_bedroom: s.moveBedroom, move_bathroom: s.moveBathroom,
                construction_base: s.constructionBase, commercial_base: s.commercialBase,
                church_base: s.churchBase, rv_medium: s.rvMedium,
                pet_fee: s.petFee, child_fee: s.childFee,
                updated_at: new Date().toISOString()
            };
        }

        function readPriceFields() {
            return {
                base:             parseFloat(document.getElementById('priceBase')?.value)             || 0,
                bedroom:          parseFloat(document.getElementById('priceBedroom')?.value)          || 0,
                bathroom:         parseFloat(document.getElementById('priceBathroom')?.value)         || 0,
                shower:           parseFloat(document.getElementById('priceShower')?.value)           || 0,
                carpetSqFt:       parseFloat(document.getElementById('priceCarpetSqFt')?.value)       || 0,
                carpetMin:        parseFloat(document.getElementById('priceCarpetMin')?.value)        || 0,
                moveBase:         parseFloat(document.getElementById('priceMoveBase')?.value)         || 0,
                moveBedroom:      parseFloat(document.getElementById('priceMoveBedroom')?.value)      || 0,
                moveBathroom:     parseFloat(document.getElementById('priceMoveBathroom')?.value)     || 0,
                constructionBase: parseFloat(document.getElementById('priceConstructionBase')?.value) || 0,
                commercialBase:   parseFloat(document.getElementById('priceCommercialBase')?.value)   || 0,
                churchBase:       parseFloat(document.getElementById('priceChurchBase')?.value)       || 0,
                rvMedium:         parseFloat(document.getElementById('priceRvMedium')?.value)         || 0,
                petFee:           parseFloat(document.getElementById('pricePetFee')?.value)           || 0,
                childFee:         parseFloat(document.getElementById('priceChildFee')?.value)         || 0
            };
        }

        function updatePriceUI(status, msg) {
            const el = document.getElementById('priceDbStatus');
            if (!el) return;
            el.className = 'price-db-status ' + status;
            const icons = { loading: 'fas fa-sync-alt fa-spin', loaded: 'fas fa-check-circle', error: 'fas fa-exclamation-triangle' };
            el.innerHTML = `<i class="${icons[status] || 'fas fa-info-circle'}"></i> ${msg}`;
        }

        function updatePriceInputFields() {
            const map = {
                priceBase:'base', priceBedroom:'bedroom', priceBathroom:'bathroom',
                priceShower:'shower', priceCarpetSqFt:'carpetSqFt', priceCarpetMin:'carpetMin',
                priceMoveBase:'moveBase', priceMoveBedroom:'moveBedroom', priceMoveBathroom:'moveBathroom',
                priceConstructionBase:'constructionBase', priceCommercialBase:'commercialBase',
                priceChurchBase:'churchBase', priceRvMedium:'rvMedium',
                pricePetFee:'petFee', priceChildFee:'childFee'
            };
            Object.entries(map).forEach(([id, key]) => {
                const el = document.getElementById(id);
                if (el) { el.value = priceSettings[key] ?? 0; el.classList.remove('changed'); }
            });
        }

        // ============================================================
        // PRICE SETTINGS — LOAD FROM DB
        // ============================================================
        async function loadPriceSettings(showInAdmin = true) {
            if (showInAdmin) updatePriceUI('loading', 'Loading from database...');
            try {
                const { data, error } = await sb.select('price_settings', 'select=*&order=updated_at.desc&limit=1');
                if (error) {
                    const msg = error.message || error.hint || JSON.stringify(error);
                    console.error('❌ price_settings load error:', error);
                    priceSettings = getDefaultPriceSettings();
                    if (showInAdmin) {
                        updatePriceUI('error', 'Erro DB: ' + msg);
                        document.getElementById('sqlInfoBox').style.display = 'block';
                    }
                    updatePriceInputFields();
                    return;
                }
                if (showInAdmin) document.getElementById('sqlInfoBox').style.display = 'none';

                if (data && data.length > 0) {
                    const row = data[0];
                    priceSettingsDbId = row.id;
                    priceSettings = mapDbToSettings(row);
                    priceSettingsLoaded = true;
                    console.log('✅ Prices loaded from DB, id:', priceSettingsDbId);
                    if (showInAdmin) {
                        const ts = row.updated_at ? new Date(row.updated_at).toLocaleString() : 'N/A';
                        updatePriceUI('loaded', '✓ Carregado do banco de dados');
                        const el = document.getElementById('priceLastUpdated');
                        if (el) { el.textContent = `Última atualização: ${ts}`; el.style.display = 'block'; }
                    }
                } else {
                    // Table empty — insert defaults
                    console.log('price_settings vazio, inserindo padrões...');
                    priceSettings = getDefaultPriceSettings();
                    const { data: ins, error: insErr } = await sb.insert('price_settings', settingsToDbRow(priceSettings));
                    if (!insErr && ins && ins.length > 0) {
                        priceSettingsDbId = ins[0].id;
                        priceSettingsLoaded = true;
                    }
                    if (showInAdmin) updatePriceUI('loaded', '✓ Valores padrão criados no banco');
                }
                updatePriceInputFields();
            } catch (err) {
                console.error('❌ Unexpected loadPriceSettings error:', err);
                priceSettings = getDefaultPriceSettings();
                if (showInAdmin) updatePriceUI('error', 'Erro inesperado: ' + err.message);
                updatePriceInputFields();
            }
        }

        // ============================================================
        // PRICE SETTINGS — SAVE TO DB
        // ============================================================
        async function savePriceSettings() {
            const btn = document.getElementById('savePricesBtn');
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Salvando...';
            btn.disabled = true;

            const newSettings = readPriceFields();
            const dbRow = settingsToDbRow(newSettings);

            try {
                let savedId = null;

                // Try to find existing row first
                if (!priceSettingsDbId) {
                    const { data: existing } = await sb.select('price_settings', 'select=id&limit=1');
                    if (existing && existing.length > 0) priceSettingsDbId = existing[0].id;
                }

                if (priceSettingsDbId) {
                    const { data, error } = await sb.update('price_settings', dbRow, { id: priceSettingsDbId });
                    if (error) throw new Error(error.message || error.hint || JSON.stringify(error));
                    savedId = data?.[0]?.id || priceSettingsDbId;
                } else {
                    const { data, error } = await sb.insert('price_settings', dbRow);
                    if (error) throw new Error(error.message || error.hint || JSON.stringify(error));
                    savedId = data?.[0]?.id;
                    priceSettingsDbId = savedId;
                }

                priceSettings = newSettings;
                priceSettingsLoaded = true;
                document.querySelectorAll('.price-input.changed').forEach(el => el.classList.remove('changed'));

                updatePriceUI('loaded', '✓ Salvo com sucesso');
                const el = document.getElementById('priceLastUpdated');
                if (el) { el.textContent = `Última atualização: ${new Date().toLocaleString()}`; el.style.display = 'block'; }
                showToast('✅ Preços salvos no banco de dados!', 'success');
                console.log('✅ Prices saved, id:', savedId);

            } catch (err) {
                console.error('❌ savePriceSettings error:', err);
                updatePriceUI('error', 'Falha ao salvar: ' + err.message);
                showToast('Erro ao salvar: ' + err.message, 'error');
            } finally {
                btn.innerHTML = '<i class="fas fa-save"></i> Save Prices to Database';
                btn.disabled = false;
            }
        }

        // ============================================================
        // PRICE SETTINGS — RESET
        // ============================================================
        async function resetPriceSettings() {
            if (!confirm('Resetar todos os preços para os valores padrão?')) return;
            priceSettings = getDefaultPriceSettings();
            updatePriceInputFields();
            try {
                const dbRow = settingsToDbRow(priceSettings);
                if (priceSettingsDbId) {
                    const { error } = await sb.update('price_settings', dbRow, { id: priceSettingsDbId });
                    if (error) throw new Error(JSON.stringify(error));
                } else {
                    const { data, error } = await sb.insert('price_settings', dbRow);
                    if (error) throw new Error(JSON.stringify(error));
                    priceSettingsDbId = data?.[0]?.id;
                }
                updatePriceUI('loaded', '✓ Padrões restaurados e salvos');
                showToast('Preços resetados e salvos!', 'success');
            } catch (err) {
                showToast('Erro ao resetar: ' + err.message, 'error');
            }
        }

        function markChanged(el) { el.classList.add('changed'); }

        // ============================================================
        // PRICE CALCULATION
        // ============================================================
        function calculateEstimatedPrice() {
            const serviceType = document.getElementById('serviceType').value;
            const priceBox    = document.getElementById('estimatedPriceBox');
            const priceValueEl  = document.getElementById('estimatedPriceValue');
            const priceDetailEl = document.getElementById('estimatedPriceDetail');
            if (!serviceType) { priceBox.style.display = 'none'; return; }

            let total = 0, details = [];

            switch (serviceType) {
                case 'residential': {
                    const beds = parseInt(document.getElementById('bedrooms').value) || 0;
                    const baths = parseInt(document.getElementById('bathrooms').value) || 0;
                    const showers = parseInt(document.getElementById('showerBoxCount').value) || 0;
                    total = priceSettings.base;
                    details.push(`Base: $${priceSettings.base}`);
                    if (beds)    { total += beds * priceSettings.bedroom;   details.push(`${beds} quarto(s): $${beds * priceSettings.bedroom}`); }
                    if (baths)   { total += baths * priceSettings.bathroom; details.push(`${baths} banheiro(s): $${baths * priceSettings.bathroom}`); }
                    if (showers) { total += showers * priceSettings.shower; details.push(`${showers} box(es): $${showers * priceSettings.shower}`); }
                    break;
                }
                case 'carpet': {
                    const len = parseFloat(document.getElementById('carpetLength').value) || 0;
                    const wid = parseFloat(document.getElementById('carpetWidth').value) || 0;
                    const sqft = len * wid;
                    if (sqft > 0) {
                        total = Math.max(sqft * priceSettings.carpetSqFt, priceSettings.carpetMin);
                        details.push(`${sqft.toFixed(1)} sq ft @ $${priceSettings.carpetSqFt}/sqft`);
                        if (total === priceSettings.carpetMin) details.push(`(mínimo: $${priceSettings.carpetMin})`);
                    } else {
                        total = priceSettings.carpetMin;
                        details.push(`Mínimo: $${priceSettings.carpetMin}`);
                    }
                    break;
                }
                case 'move': {
                    const beds = parseInt(document.getElementById('bedrooms').value) || 0;
                    const baths = parseInt(document.getElementById('bathrooms').value) || 0;
                    total = priceSettings.moveBase;
                    details.push(`Base: $${priceSettings.moveBase}`);
                    if (beds)  { total += beds * priceSettings.moveBedroom;   details.push(`${beds} quarto(s): $${beds * priceSettings.moveBedroom}`); }
                    if (baths) { total += baths * priceSettings.moveBathroom; details.push(`${baths} banheiro(s): $${baths * priceSettings.moveBathroom}`); }
                    break;
                }
                case 'construction': total = priceSettings.constructionBase; details.push(`Base: $${priceSettings.constructionBase}`); break;
                case 'commercial':   total = priceSettings.commercialBase;   details.push(`Base: $${priceSettings.commercialBase}`); break;
                case 'church':       total = priceSettings.churchBase;       details.push(`Base: $${priceSettings.churchBase}`); break;
                case 'rv':           total = priceSettings.rvMedium;         details.push(`RV: $${priceSettings.rvMedium}`); break;
                default: total = 100; details.push('Base: $100');
            }

            if (document.getElementById('hasPets').value === 'true') {
                const pets = parseInt(document.getElementById('petCount').value) || 0;
                if (pets > 0 && priceSettings.petFee > 0) { total += pets * priceSettings.petFee; details.push(`${pets} pet(s): $${pets * priceSettings.petFee}`); }
            }
            if (document.getElementById('hasChildren').value === 'true') {
                const kids = parseInt(document.getElementById('childrenCount').value) || 0;
                if (kids > 0 && priceSettings.childFee > 0) { total += kids * priceSettings.childFee; details.push(`${kids} criança(s): $${kids * priceSettings.childFee}`); }
            }

            priceValueEl.textContent  = `$${total.toFixed(2)}`;
            priceDetailEl.textContent = details.join(' • ');
            priceBox.style.display = 'block';
        }

        // ============================================================
        // CONDITIONAL FIELDS
        // ============================================================
        function updateConditionalFields() {
            const t = document.getElementById('serviceType').value;
            const res = ['move','construction','commercial','church','residential'];
            document.querySelectorAll('.residential-fields').forEach(f => f.style.display = res.includes(t) ? 'block' : 'none');
            const cf = document.querySelector('.carpet-field');
            if (cf) cf.style.display = t === 'carpet' ? 'block' : 'none';
        }

        function togglePetCount()      { document.getElementById('petCountGroup').style.display      = document.getElementById('hasPets').value === 'true' ? 'block' : 'none'; }
        function toggleChildrenCount() { document.getElementById('childrenCountGroup').style.display = document.getElementById('hasChildren').value === 'true' ? 'block' : 'none'; }

        function initConditionalFields() {
            document.getElementById('hasPets').addEventListener('change', togglePetCount);
            document.getElementById('hasChildren').addEventListener('change', toggleChildrenCount);
            document.getElementById('serviceType').addEventListener('change', updateConditionalFields);
        }

        function initDatePicker() {
            const input = document.getElementById('cleaningDate');
            if (input && !flatpickrInstance) {
                flatpickrInstance = flatpickr(input, { minDate: 'today', dateFormat: 'Y-m-d', onChange: () => calculateEstimatedPrice() });
            }
        }

        function scrollCarousel(direction) {
            const c = document.getElementById('servicesCarousel');
            if (c) c.scrollBy({ left: 300 * direction, behavior: 'smooth' });
        }

        // ============================================================
        // MOBILE MENU
        // ============================================================
        function initMobileMenu() {
            const toggle = document.getElementById('menuToggle');
            const links  = document.getElementById('navLinks');
            if (toggle && links) {
                toggle.addEventListener('click', () => {
                    links.classList.toggle('active');
                    toggle.innerHTML = links.classList.contains('active') ? '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
                });
            }
        }

        function closeMobileMenu() {
            const toggle = document.getElementById('menuToggle');
            const links  = document.getElementById('navLinks');
            if (links?.classList.contains('active')) {
                links.classList.remove('active');
                if (toggle) toggle.innerHTML = '<i class="fas fa-bars"></i>';
            }
        }

        // ============================================================
        // NAVIGATION
        // ============================================================
        function scrollToSection(id) {
            showHomePage();
            setTimeout(() => {
                const s = document.getElementById(id);
                if (s) window.scrollTo({ top: s.offsetTop - document.querySelector('.navbar').offsetHeight, behavior: 'smooth' });
            }, 100);
            closeMobileMenu();
        }

        function showHomePage() {
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('scheduleFormContainer').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'none';
            closeMobileMenu();
        }

        function showScheduleForm() {
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('scheduleFormContainer').style.display = 'block';
            document.getElementById('adminPanel').style.display = 'none';
            setTimeout(initDatePicker, 100);
            closeMobileMenu();
        }

        function showAdminPanel() {
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('scheduleFormContainer').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'block';
            if (localStorage.getItem('adminLoggedIn') === 'true') {
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('adminDashboard').style.display = 'block';
                loadDashboardData();
            } else {
                document.getElementById('adminLogin').style.display = 'flex';
                document.getElementById('adminDashboard').style.display = 'none';
            }
            closeMobileMenu();
        }

        // ============================================================
        // SCHEDULE FORM SUBMISSION
        // ============================================================
        function initScheduleForm() {
            const form = document.getElementById('cleaningServiceForm');
            if (!form) return;
            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                const btn = form.querySelector('button[type="submit"]');
                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Enviando...';
                btn.disabled = true;

                const estimatedPrice = parseFloat(document.getElementById('estimatedPriceValue').textContent.replace('$','')) || 0;
                const formData = {
                    full_name:       document.getElementById('fullName').value,
                    phone:           document.getElementById('phone').value,
                    email:           document.getElementById('email').value,
                    address:         document.getElementById('address').value,
                    service_type:    document.getElementById('serviceType').value,
                    bedrooms:        parseInt(document.getElementById('bedrooms')?.value)       || 0,
                    bathrooms:       parseInt(document.getElementById('bathrooms')?.value)      || 0,
                    shower_box_count:parseInt(document.getElementById('showerBoxCount')?.value) || 0,
                    has_pets:        document.getElementById('hasPets').value === 'true',
                    pet_count:       parseInt(document.getElementById('petCount')?.value)       || 0,
                    has_children:    document.getElementById('hasChildren').value === 'true',
                    children_count:  parseInt(document.getElementById('childrenCount')?.value)  || 0,
                    cleaning_date:   document.getElementById('cleaningDate').value,
                    cleaning_time:   document.getElementById('cleaningTime').value,
                    description:     document.getElementById('description').value,
                    status:          'pending',
                    estimated_value: estimatedPrice,
                    agreed_value:    null,
                    created_at:      new Date().toISOString()
                };
                if (formData.service_type === 'carpet') {
                    formData.carpet_length = parseFloat(document.getElementById('carpetLength')?.value) || 0;
                    formData.carpet_width  = parseFloat(document.getElementById('carpetWidth')?.value)  || 0;
                }

                const msg = document.getElementById('formMessage');
                const required = ['full_name','phone','email','address','service_type','cleaning_date','cleaning_time','description'];
                if (required.some(k => !formData[k])) { showError('Please fill all required fields', msg, btn); return; }
                if (!/^\S+@\S+\.\S+$/.test(formData.email)) { showError('Invalid email', msg, btn); return; }

                const { error } = await sb.insert('service_requests', formData);
                if (!error) {
                    msg.className = 'form-message success';
                    msg.innerHTML = '<i class="fas fa-check-circle"></i> Submitted! We\'ll contact you soon.';
                    form.reset();
                    document.getElementById('estimatedPriceBox').style.display = 'none';
                    setTimeout(() => showHomePage(), 2500);
                } else {
                    showError((error.message || error.hint || JSON.stringify(error)), msg, btn);
                }
                btn.innerHTML = '<i class="fas fa-paper-plane"></i> Submit';
                btn.disabled = false;
            });
        }

        function showError(text, msg, btn) {
            msg.className = 'form-message error';
            msg.innerHTML = `<i class="fas fa-exclamation-circle"></i> ${text}`;
            if (btn) { btn.innerHTML = '<i class="fas fa-paper-plane"></i> Submit'; btn.disabled = false; }
        }

        // ============================================================
        // ADMIN PANEL
        // ============================================================
        function initAdminPanel() {
            document.getElementById('loginBtn')?.addEventListener('click', handleAdminLogin);
            document.getElementById('exportExcelBtn')?.addEventListener('click', () => showToast('Export coming soon!', 'info'));
            document.getElementById('refreshBtn')?.addEventListener('click', () => loadServiceRequests(1));
            document.getElementById('testConnectionBtn')?.addEventListener('click', testConnection);
            document.getElementById('statusFilter')?.addEventListener('change', function() { currentFilters.status = this.value; loadServiceRequests(1); });
            document.getElementById('dateFilter')?.addEventListener('change', function() { currentFilters.date = this.value; loadServiceRequests(1); });
            document.getElementById('searchFilter')?.addEventListener('input', debounce(function() { currentFilters.search = this.value; loadServiceRequests(1); }, 500));
        }

        function switchAdminTab(tab) {
            document.querySelectorAll('.dashboard-tab').forEach((t,i) => t.classList.toggle('active', (tab==='requests' && i===0)||(tab==='prices' && i===1)));
            document.querySelectorAll('.dashboard-tab-content').forEach((c,i) => c.classList.toggle('active', (tab==='requests' && i===0)||(tab==='prices' && i===1)));
            if (tab === 'requests') loadServiceRequests(1);
            else loadPriceSettings(true);
        }

        function handleAdminLogin() {
            const user = document.getElementById('adminUsername').value;
            const pass = document.getElementById('adminPassword').value;
            if (user === ADMIN_CREDENTIALS.username && pass === ADMIN_CREDENTIALS.password) {
                localStorage.setItem('adminLoggedIn', 'true');
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('adminDashboard').style.display = 'block';
                loadDashboardData();
                showToast('Login successful', 'success');
            } else {
                const m = document.getElementById('loginMessage');
                m.className = 'form-message error'; m.style.display = 'block';
                m.innerHTML = '<i class="fas fa-exclamation-circle"></i> Invalid credentials';
            }
        }

        function logoutAdmin() {
            localStorage.removeItem('adminLoggedIn');
            document.getElementById('adminDashboard').style.display = 'none';
            document.getElementById('adminLogin').style.display = 'flex';
        }

        async function loadDashboardData() {
            await loadStats();
            await loadServiceRequests(1);
        }

        async function loadStats() {
            try {
                const { data, error } = await sb.select('service_requests', 'select=status,agreed_value');
                if (error || !data) return;
                let pending=0, confirmed=0, completed=0, total=0;
                data.forEach(r => {
                    if (r.status==='pending') pending++;
                    else if (r.status==='confirmed') { confirmed++; total += parseFloat(r.agreed_value)||0; }
                    else if (r.status==='completed') { completed++; total += parseFloat(r.agreed_value)||0; }
                });
                document.getElementById('pendingCount').textContent   = pending;
                document.getElementById('confirmedCount').textContent = confirmed;
                document.getElementById('completedCount').textContent = completed;
                document.getElementById('totalValueConfirmed').textContent = '$' + total.toFixed(2);
            } catch(e) { console.error('loadStats error:', e); }
        }

        async function loadServiceRequests(page = 1) {
            currentPage = page;
            const tbody = document.getElementById('requestsTableBody');
            tbody.innerHTML = '<tr><td colspan="7" style="text-align:center;padding:40px"><i class="fas fa-spinner fa-spin"></i> Loading...</td></tr>';

            try {
                // Build query string
                let qs = 'select=*&order=created_at.desc';
                if (currentFilters.status !== 'all') qs += `&status=eq.${currentFilters.status}`;
                if (currentFilters.search.trim()) {
                    const s = currentFilters.search.trim();
                    qs += `&or=(full_name.ilike.*${s}*,email.ilike.*${s}*)`;
                }
                if (currentFilters.date !== 'all') {
                    const d = new Date();
                    if (currentFilters.date === 'today')  d.setHours(0,0,0,0);
                    if (currentFilters.date === 'week')   d.setDate(d.getDate()-7);
                    if (currentFilters.date === 'month')  d.setMonth(d.getMonth()-1);
                    qs += `&created_at=gte.${d.toISOString()}`;
                }

                // Get total count
                const countQs = qs.replace('select=*','select=id');
                const { count } = await sb.selectCount('service_requests', countQs);

                // Get page
                const from = (page-1)*pageSize, to = from+pageSize-1;
                const pageQs = qs + `&offset=${from}&limit=${pageSize}`;
                const { data, error } = await sb.select('service_requests', pageQs);
                if (error) throw new Error(JSON.stringify(error));

                if (!data || data.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="7" style="text-align:center;padding:40px">📭 No requests found</td></tr>';
                    document.getElementById('tableInfo').textContent = 'Showing 0 requests';
                    document.getElementById('pagination').innerHTML = '';
                    return;
                }

                const statusMap = {
                    pending:   ['status-pending','fa-clock'],
                    confirmed: ['status-confirmed','fa-check-circle'],
                    completed: ['status-completed','fa-flag-checkered'],
                    cancelled: ['status-cancelled','fa-times-circle']
                };

                let html = '';
                data.forEach(r => {
                    const [cls,icon] = statusMap[r.status] || ['status-pending','fa-clock'];
                    const dt   = r.cleaning_date ? new Date(r.cleaning_date+'T00:00:00').toLocaleDateString('en-US') : 'N/A';
                    const val  = r.agreed_value ? `$${parseFloat(r.agreed_value).toFixed(2)}` : (r.estimated_value ? `Est: $${parseFloat(r.estimated_value).toFixed(2)}` : '-');
                    html += `<tr>
                        <td><strong>${r.full_name||'N/A'}</strong></td>
                        <td>${r.phone||'N/A'}<br><small>${r.email||'N/A'}</small></td>
                        <td>${r.service_type||'N/A'}</td>
                        <td>${dt}<br><small>${r.cleaning_time||'N/A'}</small></td>
                        <td><span class="status-badge ${cls}"><i class="fas ${icon}"></i> ${r.status||'pending'}</span></td>
                        <td>${val}</td>
                        <td><div style="display:flex;gap:5px">
                            <button class="btn btn-primary btn-small" onclick="editServiceRequest('${r.id}')"><i class="fas fa-edit"></i></button>
                            <button class="btn btn-danger btn-small" onclick="deleteServiceRequest('${r.id}')"><i class="fas fa-trash"></i></button>
                        </div></td>
                    </tr>`;
                });
                tbody.innerHTML = html;
                document.getElementById('tableInfo').textContent = `Showing ${data.length} of ${count} requests`;

                const totalPages = Math.ceil(count/pageSize);
                let pHtml = '';
                for (let i=1;i<=totalPages;i++) pHtml += `<button class="${i===page?'active':''}" onclick="loadServiceRequests(${i})">${i}</button>`;
                document.getElementById('pagination').innerHTML = pHtml;

            } catch(err) {
                console.error('loadServiceRequests error:', err);
                tbody.innerHTML = `<tr><td colspan="7" style="text-align:center;padding:40px;color:#ff6b6b">❌ ${err.message}</td></tr>`;
                showToast('Error: ' + err.message, 'error');
            }
        }

        // ============================================================
        // TEST CONNECTION
        // ============================================================
        async function testConnection() {
            document.getElementById('debugPanel').style.display = 'block';
            const di = document.getElementById('debugInfo');
            di.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Testing...';
            let html = `<strong>Supabase REST API Test</strong>\nURL: ${SB_URL}\n\n`;
            try {
                // Test service_requests
                const r1 = await fetch(`${SB_URL}/rest/v1/service_requests?select=id&limit=1`, { headers: { apikey: SB_KEY, Authorization: 'Bearer ' + SB_KEY } });
                const d1 = await r1.json();
                if (r1.ok) {
                    html += `<span class="debug-success">✅ service_requests: OK (${Array.isArray(d1)?d1.length:0} rows)</span>\n`;
                } else {
                    html += `<span class="debug-error">❌ service_requests: ${r1.status} — ${d1.message||d1.hint||JSON.stringify(d1)}</span>\n`;
                    if (r1.status===401||r1.status===403) html += `<span class="debug-warning">   → RLS bloqueando. Veja SQL abaixo.</span>\n`;
                    if (r1.status===404) html += `<span class="debug-warning">   → Tabela não existe!</span>\n`;
                }

                // Test price_settings SELECT
                const r2 = await fetch(`${SB_URL}/rest/v1/price_settings?select=*&limit=1`, { headers: { apikey: SB_KEY, Authorization: 'Bearer ' + SB_KEY } });
                const d2 = await r2.json();
                if (r2.ok) {
                    html += `<span class="debug-success">✅ price_settings SELECT: OK</span>\n`;
                    if (Array.isArray(d2) && d2.length > 0) {
                        html += `<span class="debug-success">   ID: ${d2[0].id}</span>\n`;
                        html += `<span class="debug-success">   base=$${d2[0].base} | bedroom=$${d2[0].bedroom} | bathroom=$${d2[0].bathroom}</span>\n`;
                        html += `<span class="debug-success">   updated_at: ${d2[0].updated_at}</span>\n`;
                    } else {
                        html += `<span class="debug-warning">   ⚠️ Tabela vazia — clique "Reload from Database" para inserir padrões.</span>\n`;
                    }
                } else {
                    html += `<span class="debug-error">❌ price_settings SELECT: ${r2.status} — ${d2.message||d2.hint||JSON.stringify(d2)}</span>\n`;
                    if (r2.status===404 || d2.code==='42P01') html += `<span class="debug-warning">   → Tabela não existe! Execute o SQL abaixo no Supabase.</span>\n`;
                    if (r2.status===401||r2.status===403)     html += `<span class="debug-warning">   → RLS bloqueando leitura.</span>\n`;
                }

                // Test price_settings INSERT
                if (r2.ok) {
                    const testRow = { base: -999, updated_at: new Date().toISOString() };
                    const r3 = await fetch(`${SB_URL}/rest/v1/price_settings`, {
                        method: 'POST', headers: { apikey: SB_KEY, Authorization: 'Bearer '+SB_KEY, 'Content-Type':'application/json', Prefer:'return=representation' },
                        body: JSON.stringify(testRow)
                    });
                    const d3 = await r3.json();
                    if (r3.ok) {
                        html += `<span class="debug-success">✅ price_settings INSERT: OK</span>\n`;
                        const testId = Array.isArray(d3) ? d3[0]?.id : d3?.id;
                        if (testId) {
                            await fetch(`${SB_URL}/rest/v1/price_settings?id=eq.${testId}`, {
                                method:'DELETE', headers:{apikey:SB_KEY, Authorization:'Bearer '+SB_KEY}
                            });
                            html += `<span class="debug-success">   (test row deleted)</span>\n`;
                        }
                    } else {
                        html += `<span class="debug-error">❌ price_settings INSERT: ${r3.status} — ${d3.message||d3.hint||JSON.stringify(d3)}</span>\n`;
                        html += `<span class="debug-warning">   → Execute o SQL abaixo para liberar permissões.</span>\n`;
                    }
                }

                html += `\n<span class="debug-warning">📋 SQL para criar tabela + permissões (Supabase SQL Editor):

CREATE TABLE IF NOT EXISTS price_settings (
  id uuid DEFAULT gen_random_uuid() PRIMARY KEY,
  base numeric DEFAULT 50, bedroom numeric DEFAULT 35,
  bathroom numeric DEFAULT 40, shower numeric DEFAULT 25,
  carpet_sq_ft numeric DEFAULT 0.35, carpet_min numeric DEFAULT 50,
  move_base numeric DEFAULT 120, move_bedroom numeric DEFAULT 35,
  move_bathroom numeric DEFAULT 40, construction_base numeric DEFAULT 150,
  commercial_base numeric DEFAULT 100, church_base numeric DEFAULT 120,
  rv_medium numeric DEFAULT 200, pet_fee numeric DEFAULT 10,
  child_fee numeric DEFAULT 0, updated_at timestamptz DEFAULT now()
);
ALTER TABLE price_settings ENABLE ROW LEVEL SECURITY;
DROP POLICY IF EXISTS "anon_price" ON price_settings;
CREATE POLICY "anon_price" ON price_settings FOR ALL TO anon USING (true) WITH CHECK (true);
INSERT INTO price_settings (base) VALUES (50);</span>`;

            } catch(err) {
                html += `<span class="debug-error">❌ Fetch error: ${err.message}</span>\n`;
                html += `<span class="debug-warning">Verifique sua conexão com a internet.</span>`;
            }
            di.innerHTML = html;
        }

        function hideDebugPanel() { document.getElementById('debugPanel').style.display = 'none'; }

        // ============================================================
        // EDIT MODAL
        // ============================================================
        function initEditModal() {
            document.getElementById('editServiceForm')?.addEventListener('submit', async function(e) {
                e.preventDefault();
                const id = document.getElementById('editRequestId').value;
                const data = {
                    full_name:        document.getElementById('editFullName').value,
                    phone:            document.getElementById('editPhone').value,
                    email:            document.getElementById('editEmail').value,
                    address:          document.getElementById('editAddress').value,
                    service_type:     document.getElementById('editServiceType').value,
                    bedrooms:         parseInt(document.getElementById('editBedrooms').value)      || 0,
                    bathrooms:        parseInt(document.getElementById('editBathrooms').value)     || 0,
                    shower_box_count: parseInt(document.getElementById('editShowerBoxCount').value)|| 0,
                    has_pets:         document.getElementById('editHasPets').value === 'true',
                    pet_count:        parseInt(document.getElementById('editPetCount').value)      || 0,
                    has_children:     document.getElementById('editHasChildren').value === 'true',
                    children_count:   parseInt(document.getElementById('editChildrenCount').value) || 0,
                    cleaning_date:    document.getElementById('editCleaningDate').value,
                    cleaning_time:    document.getElementById('editCleaningTime').value,
                    status:           document.getElementById('editStatus').value,
                    agreed_value:     parseFloat(document.getElementById('editAgreedValue').value) || 0,
                    description:      document.getElementById('editDescription').value
                };
                const { error } = await sb.update('service_requests', data, { id });
                if (!error) {
                    closeEditModal();
                    loadServiceRequests(currentPage);
                    loadStats();
                    showToast('Updated successfully', 'success');
                } else {
                    showToast('Error: ' + (error.message || JSON.stringify(error)), 'error');
                }
            });
        }

        async function editServiceRequest(id) {
            const { data, error } = await sb.select('service_requests', `select=*&id=eq.${id}&limit=1`);
            if (error || !data || !data.length) { showToast('Error loading request', 'error'); return; }
            const r = data[0];
            document.getElementById('editRequestId').value    = r.id;
            document.getElementById('editFullName').value     = r.full_name || '';
            document.getElementById('editPhone').value        = r.phone || '';
            document.getElementById('editEmail').value        = r.email || '';
            document.getElementById('editAddress').value      = r.address || '';
            document.getElementById('editServiceType').value  = r.service_type || '';
            document.getElementById('editBedrooms').value     = r.bedrooms || 0;
            document.getElementById('editBathrooms').value    = r.bathrooms || 0;
            document.getElementById('editShowerBoxCount').value = r.shower_box_count || 0;
            document.getElementById('editHasPets').value      = r.has_pets ? 'true' : 'false';
            document.getElementById('editPetCount').value     = r.pet_count || 0;
            document.getElementById('editHasChildren').value  = r.has_children ? 'true' : 'false';
            document.getElementById('editChildrenCount').value= r.children_count || 0;
            document.getElementById('editCleaningDate').value = (r.cleaning_date||'').split('T')[0];
            document.getElementById('editCleaningTime').value = r.cleaning_time || '';
            document.getElementById('editStatus').value       = r.status || 'pending';
            document.getElementById('editAgreedValue').value  = r.agreed_value || 0;
            document.getElementById('editDescription').value  = r.description || '';
            openEditModal();
        }

        async function deleteServiceRequest(id) {
            if (!confirm('Delete this request? Cannot be undone.')) return;
            const { error } = await sb.delete('service_requests', { id });
            if (!error) { loadServiceRequests(currentPage); loadStats(); showToast('Deleted', 'success'); }
            else showToast('Error: ' + (error.message || JSON.stringify(error)), 'error');
        }

        function openEditModal()  { document.getElementById('editModal').style.display = 'flex'; }
        function closeEditModal() { document.getElementById('editModal').style.display = 'none'; }

        // ============================================================
        // UTILITIES
        // ============================================================
        function showToast(msg, type) {
            const colors = { success:'#00c853', error:'#ff6b6b', info:'#2a6eff', warning:'#ff9800' };
            const icons  = { success:'fa-check-circle', error:'fa-exclamation-circle', info:'fa-info-circle', warning:'fa-exclamation-triangle' };
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.style.borderLeftColor = colors[type] || '#2a6eff';
            toast.innerHTML = `<i class="fas ${icons[type]||'fa-info-circle'}" style="color:${colors[type]||'#2a6eff'}"></i> ${msg}`;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 4000);
        }

        function debounce(fn, delay) {
            let t;
            return function() { clearTimeout(t); t = setTimeout(() => fn.apply(this, arguments), delay); };
        }

        window.onclick = function(e) {
            if (e.target === document.getElementById('editModal')) closeEditModal();
        };
    </script>
</body>
</html>
