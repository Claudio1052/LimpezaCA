<!DOCTYPE html>
<html lang="en"> 
<head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover">
    <meta name="HandheldFriendly" content="true">
    <meta name="MobileOptimized" content="width">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="color-scheme" content="light dark">
    <meta name="theme-color" content="#2a6eff" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#1a1a2e" media="(prefers-color-scheme: dark)">
    <meta name="apple-mobile-web-app-title" content="Rio Cleaning">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="description" content="Professional cleaning services in Calgary for homes, churches, commercial spaces, post-construction, and upholstery. Get your free quote today.">
    
    <title>Rio Cleaning - Professional Cleaning Services in Calgary</title>
    
    <!-- CSS Styles (Embedded) -->
    <style>
        /* =========================================== */
        /* VARIÁVEIS CSS E RESET */
        /* =========================================== */
        :root {
            --primary-color: #2a6eff;
            --primary-dark: #1a56e0;
            --secondary-color: #00a896;
            --accent-color: #ff6b6b;
            --dark-color: #2d3748;
            --light-color: #f8f9fa;
            --gray-100: #f7fafc;
            --gray-200: #edf2f7;
            --gray-300: #e2e8f0;
            --gray-600: #718096;
            --gray-800: #2d3748;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
            --shadow-lg: 0 10px 25px rgba(0,0,0,0.1);
            --border-radius: 8px;
            --border-radius-lg: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            line-height: 1.6;
            color: var(--gray-800);
            background-color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* =========================================== */
        /* TYPOGRAPHY */
        /* =========================================== */
        h1, h2, h3, h4 {
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 1.5rem;
            color: var(--dark-color);
        }

        h1 { 
            font-size: clamp(2rem, 5vw, 3rem);
            color: var(--dark-color);
        }

        h2 { 
            font-size: clamp(1.75rem, 4vw, 2.5rem);
            position: relative;
            display: inline-block;
        }

        h2.section-title {
            text-align: center;
            width: 100%;
            margin-bottom: 3rem;
        }

        h2.section-title::after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 2px;
        }

        h3 { 
            font-size: clamp(1.25rem, 3.5vw, 1.75rem);
            color: var(--dark-color);
        }

        h4 { 
            font-size: clamp(1.125rem, 3vw, 1.25rem);
            color: var(--dark-color);
        }

        p {
            margin-bottom: 1rem;
            font-size: 1rem;
            line-height: 1.6;
            color: var(--gray-600);
        }

        a {
            text-decoration: none;
            color: var(--primary-color);
            transition: all 0.3s ease;
        }

        a:hover, a:focus {
            color: var(--primary-dark);
        }

        /* =========================================== */
        /* NAVBAR - LAYOUT CORRETO */
        /* =========================================== */
        .navbar {
            background: white;
            box-shadow: var(--shadow-sm);
            position: sticky;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
            padding: 10px 0;
        }

        .navbar .container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            min-height: auto;
            padding: 0 20px;
        }

        /* Logo area */
        .logo {
            display: flex;
            align-items: center;
        }

        .logo-img {
            height: 50px;
            width: auto;
            object-fit: contain;
        }

        /* Contact info in navbar */
        .nav-contact-info {
            display: flex;
            align-items: center;
            gap: 25px;
            margin-left: 20px;
            flex-wrap: wrap;
        }

        .nav-contact-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: var(--gray-800);
        }

        .nav-contact-item i {
            color: var(--primary-color);
            font-size: 1rem;
            width: 16px;
        }

        .nav-contact-item a {
            color: var(--gray-800);
            text-decoration: none;
            white-space: nowrap;
        }

        .nav-contact-item a:hover {
            color: var(--primary-color);
        }

        .instagram-link {
            color: #e4405f !important;
        }

        /* Navigation links */
        .nav-links {
            display: flex;
            list-style: none;
            align-items: center;
            gap: 10px;
            margin-left: auto;
        }

        .nav-links a {
            color: var(--dark-color);
            font-weight: 500;
            font-size: 0.9rem;
            padding: 8px 12px;
            border-radius: var(--border-radius);
            white-space: nowrap;
            cursor: pointer;
        }

        .nav-links a:hover, .nav-links a.active {
            color: var(--primary-color);
            background-color: var(--gray-100);
        }

        .menu-toggle {
            display: none;
            font-size: 1.5rem;
            cursor: pointer;
            background: none;
            border: none;
            padding: 10px;
            border-radius: var(--border-radius);
            z-index: 1001;
        }

        /* =========================================== */
        /* HERO SECTION */
        /* =========================================== */
        .hero {
            position: relative;
            color: white;
            padding: clamp(60px, 12vh, 100px) 0;
            overflow: hidden;
            text-align: center;
        }

        .hero-video-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .hero-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.5) 100%);
            z-index: 2;
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 3;
        }

        .hero h1 {
            color: white;
            font-size: clamp(2rem, 4vw, 3rem);
            margin-bottom: 1rem;
        }

        .hero h1 span {
            color: #ffd700;
        }

        .hero p {
            color: rgba(255,255,255,0.95);
            font-size: 1.1rem;
            margin-bottom: 2rem;
        }

        .hero-btn-container {
            margin: 2rem 0;
        }

        .hero-btn {
            padding: 16px 40px;
            font-size: 1.1rem;
            font-weight: 700;
        }

        .hero-contact {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius-lg);
            padding: 25px;
            display: inline-block;
            max-width: 700px;
            width: 100%;
        }

        .hero-contact-info {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }

        .hero-contact-info p {
            margin: 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .contact-link {
            color: white;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
        }

        .contact-link:hover {
            background: rgba(255,255,255,0.2);
        }

        /* =========================================== */
        /* CARPET GALLERY SECTION - NOVA ABA PROFISSIONAL */
        /* =========================================== */
        .carpet-gallery-section {
            padding: 60px 0;
            background: linear-gradient(135deg, #f8fafc 0%, #f0f7ff 100%);
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: 40px;
        }

        .gallery-card {
            background: white;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            transition: all 0.3s ease;
            border: 1px solid var(--gray-200);
            position: relative;
        }

        .gallery-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 30px rgba(42,110,255,0.15);
        }

        .gallery-card.featured {
            grid-column: span 3;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
        }

        .gallery-card.featured .gallery-image {
            height: 100%;
            min-height: 350px;
        }

        .gallery-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: transform 0.5s ease;
            border-bottom: 3px solid var(--primary-color);
        }

        .gallery-card:hover .gallery-image {
            transform: scale(1.05);
        }

        .gallery-content {
            padding: 25px;
        }

        .gallery-card.featured .gallery-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 40px;
            background: linear-gradient(135deg, rgba(42,110,255,0.03), rgba(0,168,150,0.03));
        }

        .gallery-badge {
            display: inline-block;
            padding: 6px 12px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .gallery-content h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--dark-color);
        }

        .gallery-content p {
            color: var(--gray-600);
            margin-bottom: 20px;
            font-size: 1rem;
        }

        .gallery-stats {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            color: var(--gray-800);
        }

        .stat-item i {
            color: var(--primary-color);
            font-size: 1.2rem;
        }

        .before-after-label {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 50px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 2;
            backdrop-filter: blur(5px);
        }

        .before-after-label i {
            margin-right: 5px;
            color: #ffd700;
        }

        /* Testimonials dentro da aba Carpet */
        .carpet-testimonials {
            margin-top: 60px;
            padding: 40px;
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--gray-200);
        }

        .carpet-testimonials h3 {
            text-align: center;
            margin-bottom: 40px;
            font-size: 2rem;
            color: var(--dark-color);
        }

        .testimonials-carpet-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
        }

        .testimonial-carpet-card {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 25px;
            background: linear-gradient(135deg, #f8fafc 0%, #f0f7ff 100%);
            border-radius: var(--border-radius-lg);
            border-left: 4px solid var(--primary-color);
        }

        .testimonial-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            overflow: hidden;
            border: 3px solid white;
            box-shadow: var(--shadow-md);
            flex-shrink: 0;
        }

        .testimonial-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .testimonial-carpet-content {
            flex: 1;
        }

        .testimonial-carpet-content p {
            font-style: italic;
            margin-bottom: 10px;
            color: var(--gray-800);
        }

        .testimonial-carpet-author {
            font-weight: 700;
            color: var(--primary-color);
        }

        .testimonial-carpet-date {
            font-size: 0.85rem;
            color: var(--gray-600);
        }

        .carpet-cta {
            text-align: center;
            margin-top: 50px;
        }

        .carpet-cta .btn {
            padding: 16px 50px;
            font-size: 1.2rem;
        }

        /* =========================================== */
        /* WHY DIFFERENT SECTION */
        /* =========================================== */
        .different-section {
            padding: 60px 0;
            background: linear-gradient(135deg, #f8fafc 0%, #f0f7ff 100%);
        }

        .different-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: 40px;
        }

        .different-card {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: 30px 25px;
            text-align: center;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            border: 1px solid var(--gray-200);
            position: relative;
            overflow: hidden;
        }

        .different-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .different-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .different-card .card-icon {
            width: 160px;
            height: 160px;
            margin: 0 auto 20px;
            border-radius: 20px;
            overflow: hidden;
            background: linear-gradient(135deg, rgba(42,110,255,0.1), rgba(0,168,150,0.1));
            padding: 10px;
            border: 3px solid white;
            box-shadow: 0 8px 20px rgba(42,110,255,0.15);
        }

        .different-card .card-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 15px;
        }

        .different-card h3 {
            font-size: 1.3rem;
            margin-bottom: 12px;
        }

        .different-card p {
            font-size: 0.95rem;
            color: var(--gray-600);
        }

        /* =========================================== */
        /* TESTIMONIALS SECTION */
        /* =========================================== */
        .testimonials-section {
            padding: 60px 0;
            background: white;
        }

        .testimonials-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-top: 40px;
        }

        .testimonial-card {
            background: linear-gradient(135deg, #f8fafc 0%, #f0f7ff 100%);
            border-radius: var(--border-radius-lg);
            padding: 30px 25px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--gray-200);
            position: relative;
        }

        .testimonial-card::before {
            content: '"';
            position: absolute;
            top: 10px;
            left: 20px;
            font-size: 5rem;
            color: var(--primary-color);
            opacity: 0.2;
            font-family: serif;
        }

        .testimonial-rating {
            color: #ffc107;
            margin-bottom: 15px;
        }

        .testimonial-text {
            font-style: italic;
            color: var(--gray-800);
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .testimonial-author {
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 5px;
        }

        .testimonial-date {
            font-size: 0.85rem;
            color: var(--gray-600);
        }

        .google-reviews-link {
            text-align: center;
            margin-top: 40px;
        }

        .google-reviews-link .btn {
            background: #4285f4;
            color: white;
        }

        /* =========================================== */
        /* SERVICES CAROUSEL */
        /* =========================================== */
        .services-carousel-section {
            padding: 60px 0;
            background: linear-gradient(135deg, #f8fafc 0%, #f0f7ff 100%);
            overflow: hidden;
        }

        .carousel-container {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 40px;
        }

        .services-carousel {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            scroll-behavior: smooth;
            scrollbar-width: none;
            -ms-overflow-style: none;
            padding: 20px 5px;
        }

        .services-carousel::-webkit-scrollbar {
            display: none;
        }

        .carousel-item {
            flex: 0 0 280px;
            background: white;
            border-radius: var(--border-radius-lg);
            padding: 25px 20px;
            text-align: center;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--gray-200);
            transition: all 0.3s ease;
        }

        .carousel-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary-color);
        }

        .carousel-item .carousel-icon {
            width: 160px;
            height: 160px;
            margin: 0 auto 20px;
            border-radius: 20px;
            overflow: hidden;
            background: linear-gradient(135deg, rgba(42,110,255,0.1), rgba(0,168,150,0.1));
            padding: 10px;
            border: 3px solid white;
            box-shadow: 0 8px 20px rgba(42,110,255,0.15);
        }

        .carousel-item .carousel-icon img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 15px;
        }

        .carousel-item h3 {
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .carousel-item p {
            font-size: 0.9rem;
            color: var(--gray-600);
        }

        .carousel-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: white;
            border: 2px solid var(--gray-200);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--primary-color);
            font-size: 1.2rem;
            z-index: 10;
        }

        .carousel-arrow:hover {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }

        .carousel-arrow.left {
            left: 0;
        }

        .carousel-arrow.right {
            right: 0;
        }

        /* =========================================== */
        /* ABOUT SECTION */
        /* =========================================== */
        .about {
            padding: 60px 0;
            background: white;
        }

        .about-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .about-content p {
            font-size: 1rem;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .contact-info {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, rgba(42,110,255,0.05), rgba(0,168,150,0.05));
            border-radius: var(--border-radius-lg);
            border-left: 4px solid var(--primary-color);
        }

        .contact-info p {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 12px;
        }

        .contact-info i {
            color: var(--primary-color);
            width: 20px;
        }

        /* =========================================== */
        /* FOOTER */
        /* =========================================== */
        footer {
            background: var(--dark-color);
            color: white;
            padding: 50px 0 20px;
            margin-top: auto;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 30px;
        }

        .footer-logo img {
            height: 60px;
            width: auto;
            margin-bottom: 15px;
        }

        .footer-logo p {
            color: rgba(255,255,255,0.8);
            font-size: 0.95rem;
        }

        .footer-contact h4,
        .footer-links h4 {
            color: white;
            margin-bottom: 20px;
        }

        .footer-contact p {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            color: rgba(255,255,255,0.8);
            margin-bottom: 12px;
            font-size: 0.95rem;
        }

        .footer-contact i {
            color: var(--primary-color);
            width: 20px;
        }

        .footer-contact a {
            color: white;
        }

        .footer-contact a:hover {
            color: var(--primary-color);
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: rgba(255,255,255,0.8);
        }

        .footer-links a:hover {
            color: var(--primary-color);
            transform: translateX(5px);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.6);
            font-size: 0.9rem;
        }
        
        /* Admin link discreto no rodapé */
        .admin-discreet {
            margin-top: 15px;
            font-size: 0.8rem;
            opacity: 0.6;
            transition: opacity 0.3s;
        }
        .admin-discreet:hover {
            opacity: 1;
        }
        .admin-discreet a {
            color: rgba(255,255,255,0.5);
            text-decoration: none;
            border-bottom: 1px dotted rgba(255,255,255,0.3);
        }
        .admin-discreet a:hover {
            color: white;
            border-bottom-color: white;
        }

        /* =========================================== */
        /* BUTTONS */
        /* =========================================== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 28px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            box-shadow: 0 4px 12px rgba(42,110,255,0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(42,110,255,0.4);
        }

        .btn-secondary {
            background: white;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }

        .btn-secondary:hover {
            background: var(--gray-100);
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .btn-danger {
            background: var(--accent-color);
            color: white;
        }

        .btn-success {
            background: #00a896;
            color: white;
        }

        .btn-warning {
            background: #ff9800;
            color: white;
        }

        /* =========================================== */
        /* FORM STYLES */
        /* =========================================== */
        .schedule-form {
            padding: 40px 0;
            background: linear-gradient(135deg, var(--gray-100) 0%, #f0f2f5 100%);
            min-height: calc(100vh - 80px);
        }

        .form-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-lg);
        }

        .form-header {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0;
        }

        .form-header h2 {
            color: white;
            margin-bottom: 10px;
        }

        .form-content {
            padding: 30px;
        }

        .form-section {
            background: var(--gray-100);
            border-radius: var(--border-radius-lg);
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid var(--gray-200);
        }

        .form-section h3 {
            margin-bottom: 20px;
            color: var(--primary-color);
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .form-group {
            margin-bottom: 0;
        }

        .form-group label {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .form-group label i {
            color: var(--primary-color);
            width: 16px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray-300);
            border-radius: var(--border-radius);
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(42,110,255,0.1);
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .required {
            color: var(--accent-color);
            margin-left: 4px;
        }

        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .form-actions .btn {
            flex: 1;
        }

        .form-message {
            margin-top: 20px;
            padding: 15px;
            border-radius: var(--border-radius);
            display: none;
        }

        .form-message.success {
            background: rgba(0,200,83,0.1);
            color: #00c853;
            border: 1px solid rgba(0,200,83,0.2);
            display: block;
        }

        .form-message.error {
            background: rgba(255,107,107,0.1);
            color: var(--accent-color);
            border: 1px solid rgba(255,107,107,0.2);
            display: block;
        }

        .form-footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(42,110,255,0.05), rgba(0,168,150,0.05));
            border-radius: var(--border-radius);
            border-left: 4px solid var(--primary-color);
        }
        
        /* Campos condicionais */
        .conditional-field {
            display: none;
        }
        
        .dimension-group {
            display: flex;
            gap: 10px;
        }
        .dimension-group input {
            width: 50%;
        }

        /* Estimated Price Box */
        .estimated-price-box {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            padding: 20px;
            border-radius: var(--border-radius-lg);
            margin-bottom: 25px;
            text-align: center;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .estimated-price-box::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .estimated-price-box h4 {
            color: white;
            font-size: 1.1rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .estimated-price-box .price-value {
            font-size: 2.5rem;
            font-weight: 800;
            line-height: 1;
            margin: 10px 0;
            position: relative;
            z-index: 1;
        }

        .estimated-price-box .price-detail {
            font-size: 0.9rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        /* =========================================== */
        /* ADMIN STYLES */
        /* =========================================== */
        .admin-container {
            min-height: calc(100vh - 80px);
            padding: 40px 0;
            background: linear-gradient(135deg, var(--gray-100) 0%, #f0f2f5 100%);
        }

        .admin-login {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: calc(100vh - 80px);
        }

        .login-container {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: 40px;
            box-shadow: var(--shadow-lg);
            max-width: 400px;
            width: 100%;
            text-align: center;
        }

        .admin-dashboard {
            padding: 20px 0;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .dashboard-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--gray-200);
            padding-bottom: 10px;
        }

        .dashboard-tab {
            padding: 10px 20px;
            cursor: pointer;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            font-weight: 600;
            color: var(--gray-600);
            transition: all 0.3s ease;
        }

        .dashboard-tab:hover {
            color: var(--primary-color);
        }

        .dashboard-tab.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }

        .dashboard-tab-content {
            display: none;
        }

        .dashboard-tab-content.active {
            display: block;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: 25px;
            display: flex;
            align-items: center;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--gray-200);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 1.5rem;
            color: white;
        }

        .stat-icon.pending {
            background: linear-gradient(135deg, #ffb74d, #ff9800);
        }

        .stat-icon.confirmed {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
        }

        .stat-icon.completed {
            background: linear-gradient(135deg, #00c853, #00a896);
        }

        .stat-icon.total {
            background: linear-gradient(135deg, #9c27b0, #7b1fa2);
        }

        .stat-info h3 {
            font-size: 2rem;
            margin: 0 0 5px 0;
        }

        .stat-info p {
            color: var(--gray-600);
            margin: 0;
        }

        .filters {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-md);
        }

        .filter-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        /* Price Settings Table */
        .price-settings {
            background: white;
            border-radius: var(--border-radius-lg);
            padding: 30px;
            box-shadow: var(--shadow-md);
        }

        .price-settings h3 {
            margin-bottom: 30px;
            color: var(--primary-color);
        }

        .price-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .price-card {
            background: linear-gradient(135deg, #f8fafc 0%, #f0f7ff 100%);
            border-radius: var(--border-radius-lg);
            padding: 25px;
            border: 1px solid var(--gray-200);
        }

        .price-card h4 {
            color: var(--primary-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .price-card h4 i {
            font-size: 1.3rem;
        }

        .price-item {
            margin-bottom: 15px;
        }

        .price-item label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--gray-800);
        }

        .price-item input {
            width: 100%;
            padding: 10px;
            border: 2px solid var(--gray-300);
            border-radius: var(--border-radius);
            font-size: 1rem;
        }

        .price-item input:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        .service-requests {
            background: white;
            border-radius: var(--border-radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .table-header {
            padding: 20px 25px;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 1000px;
        }

        thead {
            background: linear-gradient(135deg, var(--dark-color), #1a202c);
        }

        th {
            padding: 15px 16px;
            text-align: left;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
        }

        tbody tr {
            border-bottom: 1px solid var(--gray-200);
        }

        tbody tr:hover {
            background-color: var(--gray-100);
        }

        td {
            padding: 15px 16px;
            color: var(--gray-800);
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
            border: 2px solid transparent;
        }

        .status-pending {
            background: rgba(255,183,77,0.1);
            color: #ff9800;
            border-color: rgba(255,183,77,0.3);
        }

        .status-confirmed {
            background: rgba(42,110,255,0.1);
            color: var(--primary-color);
            border-color: rgba(42,110,255,0.3);
        }

        .status-completed {
            background: rgba(0,200,83,0.1);
            color: #00c853;
            border-color: rgba(0,200,83,0.3);
        }

        .status-cancelled {
            background: rgba(255,107,107,0.1);
            color: var(--accent-color);
            border-color: rgba(255,107,107,0.3);
        }

        .action-buttons {
            display: flex;
            gap: 8px;
        }

        .pagination {
            display: flex;
            gap: 8px;
            justify-content: center;
            padding: 20px;
            flex-wrap: wrap;
        }

        .pagination button {
            padding: 8px 12px;
            border: 2px solid var(--gray-300);
            background: white;
            border-radius: var(--border-radius);
            cursor: pointer;
            min-width: 40px;
        }

        .pagination button:hover {
            background: var(--gray-100);
        }

        .pagination button.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Debug Panel */
        .debug-panel {
            background: #1a1a2e;
            color: #fff;
            padding: 20px;
            border-radius: var(--border-radius-lg);
            margin-bottom: 30px;
            font-family: monospace;
        }

        .debug-panel h4 {
            color: #fff;
            margin-bottom: 15px;
        }

        .debug-info {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            font-size: 0.9rem;
            white-space: pre-wrap;
            word-break: break-word;
        }

        .debug-success {
            color: #00c853;
        }

        .debug-error {
            color: #ff6b6b;
        }

        .debug-warning {
            color: #ff9800;
        }

        /* =========================================== */
        /* MODAL */
        /* =========================================== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(4px);
            z-index: 1100;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-content {
            background: white;
            width: 100%;
            max-width: 700px;
            border-radius: var(--border-radius-lg);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 25px;
            border-bottom: 1px solid var(--gray-200);
        }

        .modal-header h3 {
            margin: 0;
            font-size: 1.3rem;
        }

        .close-modal {
            font-size: 1.8rem;
            cursor: pointer;
            color: var(--gray-600);
            background: none;
            border: none;
        }

        .modal-body {
            padding: 25px;
        }

        .modal-form-group {
            margin-bottom: 20px;
        }

        .modal-form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .modal-form-group input,
        .modal-form-group select,
        .modal-form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--gray-300);
            border-radius: var(--border-radius);
        }

        .modal-actions {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }

        .modal-actions .btn {
            flex: 1;
        }

        /* =========================================== */
        /* MOBILE STYLES */
        /* =========================================== */
        @media (max-width: 992px) {
            .nav-contact-info {
                display: none;
            }
            
            .menu-toggle {
                display: block;
            }
            
            .nav-links {
                position: fixed;
                top: 70px;
                left: 0;
                width: 100%;
                background: white;
                flex-direction: column;
                align-items: stretch;
                padding: 20px;
                box-shadow: var(--shadow-lg);
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 1000;
                max-height: calc(100vh - 70px);
                overflow-y: auto;
            }
            
            .nav-links.active {
                transform: translateX(0);
            }
            
            .nav-links a {
                display: block;
                padding: 15px;
                border-bottom: 1px solid var(--gray-200);
            }
            
            .different-grid,
            .testimonials-grid,
            .dashboard-stats,
            .price-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .gallery-card.featured {
                grid-column: span 2;
                grid-template-columns: 1fr;
            }
            
            .testimonials-carpet-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .different-grid,
            .testimonials-grid,
            .gallery-grid,
            .price-grid {
                grid-template-columns: 1fr;
            }
            
            .gallery-card.featured {
                grid-column: span 1;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .dashboard-stats {
                grid-template-columns: 1fr;
            }
            
            .filter-controls {
                grid-template-columns: 1fr;
            }
            
            .carousel-item {
                flex: 0 0 240px;
            }
            
            .testimonial-carpet-card {
                flex-direction: column;
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            .hero-btn {
                padding: 14px 30px;
                font-size: 1rem;
            }
            
            .hero-contact-info {
                flex-direction: column;
                gap: 10px;
            }
            
            .carousel-item {
                flex: 0 0 200px;
            }
            
            .carousel-item .carousel-icon {
                width: 140px;
                height: 140px;
            }
        }

        /* Utility classes */
        .text-center { text-align: center; }
        .mt-20 { margin-top: 20px; }
        .mb-20 { margin-bottom: 20px; }
        .hidden { display: none !important; }
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: white;
            padding: 15px 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 12px;
            max-width: 400px;
            z-index: 9999;
            border-left: 4px solid;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <a href="#" onclick="showHomePage()">
                    <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/logo_marca_fundo.png" alt="Rio Cleaning" class="logo-img">
                </a>
            </div>
            
            <div class="nav-contact-info">
                <div class="nav-contact-item">
                    <i class="fas fa-phone"></i>
                    <a href="tel:5192806261">519-280-6261</a>
                </div>
                <div class="nav-contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Calgary, Chestermere, Airdrie, Okotoks</span>
                </div>
                <div class="nav-contact-item">
                    <i class="fab fa-instagram instagram-link"></i>
                    <a href="https://www.instagram.com/riocleaningyyc" target="_blank">@riocleaningyyc</a>
                </div>
            </div>
            
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
            
            <ul class="nav-links" id="navLinks">
                <li><a href="#home" onclick="scrollToSection('home')">Home</a></li>
                <li><a href="#different" onclick="scrollToSection('different')">Why Choose Us</a></li>
                <li><a href="#services-carousel" onclick="scrollToSection('services-carousel')">Services</a></li>
                <li><a href="#carpet-gallery" onclick="scrollToSection('carpet-gallery')">Carpet</a></li>
                <li><a href="#testimonials" onclick="scrollToSection('testimonials')">Reviews</a></li>
                <li><a href="#about" onclick="scrollToSection('about')">About</a></li>
                <li><a href="#" onclick="showScheduleForm()">Schedule</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <div id="mainContent">
        <!-- Hero Section -->
        <section id="home" class="hero">
            <div class="hero-video-container">
                <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/website%20rio%20cleaning.png" alt="Rio Cleaning" class="hero-video">
                <div class="hero-overlay"></div>
            </div>
            <div class="container">
                <div class="hero-content">
                    <h1>Professional Cleaning Services <span>in Calgary</span></h1>
                    <p>Residential, Commercial, Post-Construction, Church Cleaning and more. Quality service with guaranteed satisfaction.</p>
                    
                    <div class="hero-btn-container">
                        <button class="btn btn-primary hero-btn" onclick="showScheduleForm()">
                            <i class="fas fa-calendar-check"></i> Free Quote
                        </button>
                    </div>
                    
                    <div class="hero-contact">
                        <div class="hero-contact-info">
                            <p><a href="tel:5192806261" class="contact-link"><i class="fas fa-phone"></i> 519-280-6261</a></p>
                            <p><a href="mailto:riocleaningyyc@gmail.com" class="contact-link"><i class="fas fa-envelope"></i> Email</a></p>
                            <p><a href="https://www.instagram.com/riocleaningyyc" target="_blank" class="contact-link"><i class="fab fa-instagram"></i> Instagram</a></p>
                            <p><i class="fas fa-map-marker-alt"></i> Calgary & Area</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Why Different Section (3 cards) -->
        <section id="different" class="different-section">
            <div class="container">
                <h2 class="section-title">What Makes Rio Cleaning Different?</h2>
                <div class="different-grid">
                    <div class="different-card">
                        <div class="card-icon">
                            <img src="https://images.unsplash.com/photo-1581578731548-c64695cc6952?w=500&h=500&fit=crop" alt="Deep Cleaning">
                        </div>
                        <h3>A REAL CLEANING</h3>
                        <p>We don't believe that a quick wipe is enough. Our service goes beyond the surface and focuses on real, detailed deep cleaning.</p>
                    </div>
                    <div class="different-card">
                        <div class="card-icon">
                            <img src="https://images.unsplash.com/photo-1600880292203-757bb62b4baf?w=500&h=500&fit=crop" alt="Affordable">
                        </div>
                        <h3>AFFORDABLE</h3>
                        <p>High-quality service for a fair and honest price. We offer free quotes so you understand exactly what you're getting.</p>
                    </div>
                    <div class="different-card">
                        <div class="card-icon">
                            <img src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=500&h=500&fit=crop" alt="Trustworthy">
                        </div>
                        <h3>TRUSTWORTHY</h3>
                        <p>Trust is at the heart of everything we do. Professional, reliable, and responsible. Your home is treated with care.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- NEW CARPET GALLERY SECTION - PROFESSIONAL TAB -->
        <section id="carpet-gallery" class="carpet-gallery-section">
            <div class="container">
                <h2 class="section-title">Carpet & Upholstery Cleaning</h2>
                <p class="text-center" style="max-width: 700px; margin: 0 auto 40px;">See the dramatic difference our professional cleaning makes. Before and after results that speak for themselves.</p>
                
                <div class="gallery-grid">
                    <!-- Featured Card: Ramon's Testimonial with Photo -->
                    <div class="gallery-card featured">
                        <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/Ramon_foto.png" alt="Ramon - Satisfied Client" class="gallery-image">
                        <div class="gallery-content">
                            <span class="gallery-badge"><i class="fas fa-star"></i> Client Spotlight</span>
                            <h3>Ramon's Experience</h3>
                            <p>"I was amazed by the results! My carpets look brand new. The team was professional, on time, and paid attention to every detail. Highly recommend Rio Cleaning for anyone looking for quality carpet care."</p>
                            <div class="gallery-stats">
                                <div class="stat-item"><i class="fas fa-calendar-check"></i> 5+ years client</div>
                                <div class="stat-item"><i class="fas fa-thumbs-up"></i> 100% satisfied</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Before/After: Carpet -->
                    <div class="gallery-card">
                        <div class="before-after-label"><i class="fas fa-images"></i> Before & After</div>
                        <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/Capet_antes_depois.png" alt="Carpet Before and After" class="gallery-image">
                        <div class="gallery-content">
                            <h3>Residential Carpet</h3>
                            <p>Deep cleaning removed years of embedded dirt and stains, restoring the carpet's original color and texture.</p>
                        </div>
                    </div>
                    
                    <!-- Before/After: Office Carpet -->
                    <div class="gallery-card">
                        <div class="before-after-label"><i class="fas fa-images"></i> Before & After</div>
                        <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/Carpet_escritorio_antes_depois.png" alt="Office Carpet Before and After" class="gallery-image">
                        <div class="gallery-content">
                            <h3>Commercial Office</h3>
                            <p>High-traffic office carpet revitalized, creating a fresh and professional environment for employees and clients.</p>
                        </div>
                    </div>
                    
                    <!-- Before/After: Upholstery -->
                    <div class="gallery-card">
                        <div class="before-after-label"><i class="fas fa-images"></i> Before & After</div>
                        <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/Estofado_antes_depois.png" alt="Upholstery Before and After" class="gallery-image">
                        <div class="gallery-content">
                            <h3>Upholstery Cleaning</h3>
                            <p>Furniture deep cleaning that removes allergens, stains, and odors, extending the life of your pieces.</p>
                        </div>
                    </div>
                    
                    <!-- Ramon's Photo with Result -->
                    <div class="gallery-card">
                        <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/Ramon.png" alt="Ramon's Clean Carpet" class="gallery-image">
                        <div class="gallery-content">
                            <h3>Spotless Results</h3>
                            <p>Ramon's carpet after professional treatment - stain-free, fresh, and deeply cleaned.</p>
                        </div>
                    </div>
                    
                    <!-- Final Result -->
                    <div class="gallery-card">
                        <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/Resultado.png" alt="Final Cleaning Result" class="gallery-image">
                        <div class="gallery-content">
                            <h3>Impeccable Finish</h3>
                            <p>The final result speaks for itself. Our process ensures every fiber is thoroughly cleaned and sanitized.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Testimonials específicos para Carpete -->
                <div class="carpet-testimonials">
                    <h3><i class="fas fa-quote-right"></i> What Clients Say About Our Carpet Cleaning</h3>
                    <div class="testimonials-carpet-grid">
                        <div class="testimonial-carpet-card">
                            <div class="testimonial-avatar">
                                
                            </div>
                            <div class="testimonial-carpet-content">
                                <p>"Incredible work! The Rio Cleaning team is extremely diligent, friendly and attentive to details. They did a fantastic job cleaning our carpet; when we got home everything smelled wonderful."</p>
                                <div class="testimonial-carpet-author">- Arthur de Oliveira Bandeira</div>
                                <div class="testimonial-carpet-date">4 days ago</div>
                            </div>
                        </div>
                        <div class="testimonial-carpet-card">
                            <div class="testimonial-avatar">
                              
                            </div>
                            <div class="testimonial-carpet-content">
                                <p>"Exceptional cleaning services! Total peace of mind during my recent move. They did a thorough deep cleaning of bathrooms and kitchen: that means cleaning literally every nook and cranny."</p>
                                <div class="testimonial-carpet-author">- Rodrigo Dal Ben</div>
                                <div class="testimonial-carpet-date">3 days ago</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="carpet-cta">
                    <button class="btn btn-primary" onclick="showScheduleForm()">
                        <i class="fas fa-calendar-check"></i> Schedule Your Carpet Cleaning
                    </button>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials" class="testimonials-section">
            <div class="container">
                <h2 class="section-title">What Our Clients Say</h2>
                <div class="testimonials-grid">
                    <div class="testimonial-card">
                        <div class="testimonial-rating">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"I hired Rio to make sure my apartment was perfect for the move‑out inspection. It was definitely the best investment – we got our full security deposit back and I could focus on unpacking in our new home. Thank you Sabrina and team for the incredible work!"</p>
                        <p class="testimonial-author">- Thais Gonçalves</p>
                        <p class="testimonial-date">5 months ago</p>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-rating">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"Rio Cleaning YYC exceeded my expectations. The cleaning was impeccable and detailed, exactly what I needed for my home. I recommend their services without reservation."</p>
                        <p class="testimonial-author">- Marina Barreto</p>
                        <p class="testimonial-date">4 days ago (edited)</p>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-rating">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"I highly recommend Rio Cleaning YYC for their reliable and trustworthy service. I couldn't be more satisfied. What really stood out was the comfort I felt trusting my home and belongings to them."</p>
                        <p class="testimonial-author">- Tata Miller</p>
                        <p class="testimonial-date">7 months ago</p>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-rating">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"I was lucky to have Sabrina clean my house – I've never seen a house so clean!! She is extremely detail‑oriented, very experienced and professional. Also very fast and doesn't waste time. I will definitely hire Rio Cleaning again!"</p>
                        <p class="testimonial-author">- Gabriela Camarotti</p>
                        <p class="testimonial-date">8 months ago</p>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-rating">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"Sabrina from Rio Cleaning is incredibly attentive to details and always goes the extra mile, cleaning areas most people wouldn't even think of. It's rare to find someone who takes such pride in their own work."</p>
                        <p class="testimonial-author">- Aghata Oliveira</p>
                        <p class="testimonial-date">8 months ago</p>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-rating">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"A true lifesaver. Forget paying for each service individually, forget being unsatisfied. The cleaning is done with great care and attention from start to finish. They really clean everything, on top and under cabinets; my bathrooms are unrecognizable."</p>
                        <p class="testimonial-author">- jozzi jordao</p>
                        <p class="testimonial-date">8 months ago</p>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-rating">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"I had an amazing experience with the cleaning service provided by this company. Everything was absolutely perfect, they paid attention to every detail, worked quickly and efficiently and left the space spotless."</p>
                        <p class="testimonial-author">- Iris Specht</p>
                        <p class="testimonial-date">8 months ago</p>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-rating">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"The best cleaning services in town! Highly recommend."</p>
                        <p class="testimonial-author">- Sandro Brito</p>
                        <p class="testimonial-date">2 days ago</p>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-rating">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"Exceptional cleaning services! Total peace of mind during my recent move. They did a thorough deep cleaning of bathrooms and kitchen: that means cleaning literally every nook and cranny of tubs, showers, cabinets..."</p>
                        <p class="testimonial-author">- Rodrigo Dal Ben</p>
                        <p class="testimonial-date">3 days ago</p>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-rating">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"Incredible work! The Rio Cleaning team is extremely diligent, friendly and attentive to details. They did a fantastic job cleaning our carpet; when we got home everything smelled wonderful."</p>
                        <p class="testimonial-author">- Arthur de Oliveira Bandeira</p>
                        <p class="testimonial-date">4 days ago</p>
                    </div>
                    <div class="testimonial-card">
                        <div class="testimonial-rating">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"I recently hired Rio Cleaning for a deep cleaning of my house and was extremely impressed with the service. Attention to detail is exceptional — they didn't leave any corner uncleaned. The team went above and beyond."</p>
                        <p class="testimonial-author">- Heloisa0702</p>
                        <p class="testimonial-date">1 week ago</p>
                    </div>
                </div>
                <div class="google-reviews-link">
                    <a href="https://www.google.com/search?q=Rio+Cleaning+YYC" target="_blank" class="btn btn-primary">
                        <i class="fab fa-google"></i> See All Reviews
                    </a>
                </div>
            </div>
        </section>

        <!-- Services Carousel (7 services in order) -->
        <section id="services-carousel" class="services-carousel-section">
            <div class="container">
                <h2 class="section-title">Our Services</h2>
                <div class="carousel-container">
                    <div class="carousel-arrow left" onclick="scrollCarousel(-1)"><i class="fas fa-chevron-left"></i></div>
                    <div class="services-carousel" id="servicesCarousel">
                        <!-- 1. Move In/Out -->
                        <div class="carousel-item">
                            <div class="carousel-icon">
                                <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/Move%20in-%20move%20out.jpeg" alt="Move In/Out">
                            </div>
                            <h3>Move In/Out</h3>
                            <p>Professional move-in and move-out cleaning with deposit guarantee.</p>
                        </div>
                        <!-- 2. Post-Construction -->
                        <div class="carousel-item">
                            <div class="carousel-icon">
                                <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/post-construction.png" alt="Post-Construction">
                            </div>
                            <h3>Post-Construction</h3>
                            <p>Detailed cleaning after construction or renovation.</p>
                        </div>
                        <!-- 3. Commercial -->
                        <div class="carousel-item">
                            <div class="carousel-icon">
                                <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/limpeza1.jpg" alt="Commercial">
                            </div>
                            <h3>Commercial</h3>
                            <p>Tailored cleaning for offices and businesses.</p>
                        </div>
                        <!-- 4. Worship Facility -->
                        <div class="carousel-item">
                            <div class="carousel-icon">
                                <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/limpeza2.jpg" alt="Worship">
                            </div>
                            <h3>Worship Facility</h3>
                            <p>Respectful cleaning for worship spaces.</p>
                        </div>
                        <!-- 5. Residential -->
                        <div class="carousel-item">
                            <div class="carousel-icon">
                                <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/limpeza5.jpg" alt="Residential">
                            </div>
                            <h3>Residential</h3>
                            <p>High-quality home cleaning services.</p>
                        </div>
                        <!-- 6. Carpet -->
                        <div class="carousel-item">
                            <div class="carousel-icon">
                                <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/carpet%20cleaning.png" alt="Carpet">
                            </div>
                            <h3>Carpet Cleaning</h3>
                            <p>Deep clean with professional equipment.</p>
                        </div>
                        <!-- 7. RV -->
                        <div class="carousel-item">
                            <div class="carousel-icon">
                                <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/RV%20cleaning.jpg.jpeg" alt="RV">
                            </div>
                            <h3>RV Cleaning</h3>
                            <p>Detailed interior RV cleaning.</p>
                        </div>
                    </div>
                    <div class="carousel-arrow right" onclick="scrollCarousel(1)"><i class="fas fa-chevron-right"></i></div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="about">
            <div class="container">
                <div class="about-content">
                    <h2 class="section-title">About Rio Cleaning</h2>
                    <p>At Rio Cleaning, we believe in providing more than just a surface clean. We're committed to delivering real, detailed deep cleaning that makes a noticeable difference in your space.</p>
                    <p>Our team is professionally trained, bonded, and insured. We bring our own transportation and environmentally preferable cleaning products to every job.</p>
                    <p>We serve Calgary, Chestermere, Airdrie, and Okotoks with reliable, high-quality cleaning services.</p>
                    
                    <div class="contact-info">
                        <p><i class="fas fa-phone"></i> <a href="tel:5192806261">519-280-6261</a></p>
                        <p><i class="fas fa-envelope"></i> <a href="mailto:riocleaningyyc@gmail.com">riocleaningyyc@gmail.com</a></p>
                        <p><i class="fab fa-instagram"></i> <a href="https://www.instagram.com/riocleaningyyc" target="_blank">@riocleaningyyc</a></p>
                        <p><i class="fas fa-map-marker-alt"></i> Calgary, Chestermere, Airdrie, Okotoks</p>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Schedule Form (sem botão Back) -->
    <div id="scheduleFormContainer" class="schedule-form" style="display: none;">
        <div class="container">
            <div class="form-container">
                <div class="form-header">
                    <h2>Schedule Your Cleaning</h2>
                    <p>Fill out the form and we'll contact you to confirm.</p>
                </div>
                <div class="form-content">
                    <!-- Estimated Price Box -->
                    <div class="estimated-price-box" id="estimatedPriceBox" style="display: none;">
                        <h4><i class="fas fa-calculator"></i> Estimated Price</h4>
                        <div class="price-value" id="estimatedPriceValue">$0.00</div>
                        <div class="price-detail" id="estimatedPriceDetail">Based on current rates</div>
                    </div>
                    
                    <form id="cleaningServiceForm">
                        <div class="form-section">
                            <h3><i class="fas fa-user"></i> Personal Information</h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label><i class="fas fa-user-circle"></i> Full Name <span class="required">*</span></label>
                                    <input type="text" id="fullName" required placeholder="Your name">
                                </div>
                                <div class="form-group">
                                    <label><i class="fas fa-phone"></i> Phone <span class="required">*</span></label>
                                    <input type="tel" id="phone" required placeholder="(519) 280-6261">
                                </div>
                                <div class="form-group">
                                    <label><i class="fas fa-envelope"></i> Email <span class="required">*</span></label>
                                    <input type="email" id="email" required placeholder="your@email.com">
                                </div>
                                <div class="form-group">
                                    <label><i class="fas fa-map-marker-alt"></i> Address <span class="required">*</span></label>
                                    <input type="text" id="address" required placeholder="Full address">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3><i class="fas fa-broom"></i> Service Details</h3>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label><i class="fas fa-tasks"></i> Service Type <span class="required">*</span></label>
                                    <select id="serviceType" required onchange="updateConditionalFields(); calculateEstimatedPrice();">
                                        <option value="">Select</option>
                                        <option value="move">Move In/Out Cleaning</option>
                                        <option value="construction">Post-Construction</option>
                                        <option value="commercial">Commercial Cleaning</option>
                                        <option value="church">Worship Facility</option>
                                        <option value="residential">Residential Cleaning</option>
                                        <option value="carpet">Carpet Cleaning</option>
                                        <option value="rv">RV Cleaning</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                
                                <!-- Campos para serviços residenciais (quartos, banheiros, shower) -->
                                <div class="form-group conditional-field residential-fields" style="display:none">
                                    <label><i class="fas fa-bed"></i> Bedrooms</label>
                                    <select id="bedrooms" onchange="calculateEstimatedPrice()">
                                        <option value="0">None</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5+</option>
                                    </select>
                                </div>
                                <div class="form-group conditional-field residential-fields" style="display:none">
                                    <label><i class="fas fa-bath"></i> Bathrooms</label>
                                    <select id="bathrooms" onchange="calculateEstimatedPrice()">
                                        <option value="0">None</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5+</option>
                                    </select>
                                </div>
                                <div class="form-group conditional-field residential-fields" style="display:none">
                                    <label><i class="fas fa-shower"></i> Shower Box</label>
                                    <select id="showerBoxCount" onchange="calculateEstimatedPrice()">
                                        <option value="0">None</option>
                                        <option value="1">1</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4+</option>
                                    </select>
                                </div>
                                
                                <!-- Campo para carpete (dimensões) -->
                                <div class="form-group conditional-field carpet-field" style="display:none; grid-column: span 2;">
                                    <label><i class="fas fa-ruler"></i> Carpet Dimensions (sq ft)</label>
                                    <div class="dimension-group">
                                        <input type="number" id="carpetLength" placeholder="Length (ft)" min="0" step="0.1" onchange="calculateEstimatedPrice()">
                                        <input type="number" id="carpetWidth" placeholder="Width (ft)" min="0" step="0.1" onchange="calculateEstimatedPrice()">
                                    </div>
                                </div>
                                
                                <!-- Pets: apenas SIM/NÃO -->
                                <div class="form-group">
                                    <label><i class="fas fa-paw"></i> Pets?</label>
                                    <select id="hasPets" onchange="togglePetCount(); calculateEstimatedPrice();">
                                        <option value="false">Não</option>
                                        <option value="true">Sim</option>
                                    </select>
                                </div>
                                <div class="form-group" id="petCountGroup" style="display:none">
                                    <label><i class="fas fa-dog"></i> How many?</label>
                                    <input type="number" id="petCount" min="0" value="0" onchange="calculateEstimatedPrice()">
                                </div>
                                
                                <!-- Children: apenas SIM/NÃO -->
                                <div class="form-group">
                                    <label><i class="fas fa-child"></i> Children?</label>
                                    <select id="hasChildren" onchange="toggleChildrenCount(); calculateEstimatedPrice();">
                                        <option value="false">Não</option>
                                        <option value="true">Sim</option>
                                    </select>
                                </div>
                                <div class="form-group" id="childrenCountGroup" style="display:none">
                                    <label><i class="fas fa-baby"></i> How many?</label>
                                    <input type="number" id="childrenCount" min="0" value="0" onchange="calculateEstimatedPrice()">
                                </div>
                                
                                <div class="form-group">
                                    <label><i class="fas fa-calendar"></i> Date <span class="required">*</span></label>
                                    <input type="text" id="cleaningDate" class="datepicker" required placeholder="Select date">
                                </div>
                                <div class="form-group">
                                    <label><i class="fas fa-clock"></i> Time <span class="required">*</span></label>
                                    <select id="cleaningTime" required>
                                        <option value="">Select</option>
                                        <option value="morning">Morning (8-12)</option>
                                        <option value="afternoon">Afternoon (1-5)</option>
                                        <option value="evening">Evening (6-8)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3><i class="fas fa-file-alt"></i> Description</h3>
                            <div class="form-group">
                                <textarea id="description" rows="4" required placeholder="Describe what you need cleaned..."></textarea>
                            </div>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary"><i class="fas fa-paper-plane"></i> Submit</button>
                            <!-- Botão Back removido -->
                        </div>
                        <div id="formMessage" class="form-message"></div>
                    </form>
                    <div class="form-footer">
                        <p><i class="fas fa-info-circle"></i> We'll contact you within 24 hours.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel (Hidden) -->
    <div id="adminPanel" class="admin-container" style="display: none;">
        <div id="adminLogin" class="admin-login">
            <div class="login-container">
                <h2><i class="fas fa-lock"></i> Admin Login</h2>
                <p>Enter credentials</p>
                <div class="form-group">
                    <input type="text" id="adminUsername" placeholder="Username">
                </div>
                <div class="form-group">
                    <input type="password" id="adminPassword" placeholder="Password">
                </div>
                <button id="loginBtn" class="btn btn-primary">Login</button>
                <div id="loginMessage" class="form-message mt-20"></div>
                <button class="btn btn-secondary mt-20" onclick="showHomePage()">Back to Home</button>
            </div>
        </div>
        
        <div id="adminDashboard" class="admin-dashboard" style="display: none;">
            <div class="container">
                <div class="dashboard-header">
                    <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
                    <div>
                        <button id="testConnectionBtn" class="btn btn-warning"><i class="fas fa-vial"></i> Test Connection</button>
                        <button id="exportExcelBtn" class="btn btn-success"><i class="fas fa-file-excel"></i> Export</button>
                        <button class="btn btn-danger" onclick="logoutAdmin()"><i class="fas fa-sign-out-alt"></i> Logout</button>
                    </div>
                </div>
                
                <!-- Debug Panel -->
                <div id="debugPanel" class="debug-panel" style="display: none;">
                    <h4><i class="fas fa-bug"></i> Debug Information</h4>
                    <div id="debugInfo" class="debug-info">
                        Loading debug information...
                    </div>
                    <button class="btn btn-secondary btn-small" onclick="hideDebugPanel()">Hide Debug</button>
                </div>
                
                <!-- Tabs -->
                <div class="dashboard-tabs">
                    <div class="dashboard-tab active" onclick="switchAdminTab('requests')">Service Requests</div>
                    <div class="dashboard-tab" onclick="switchAdminTab('prices')">Price Settings</div>
                </div>
                
                <!-- Service Requests Tab -->
                <div id="requestsTab" class="dashboard-tab-content active">
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-icon pending"><i class="fas fa-clock"></i></div>
                            <div class="stat-info"><h3 id="pendingCount">0</h3><p>Pending</p></div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon confirmed"><i class="fas fa-check-circle"></i></div>
                            <div class="stat-info"><h3 id="confirmedCount">0</h3><p>Confirmed</p></div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon completed"><i class="fas fa-flag-checkered"></i></div>
                            <div class="stat-info"><h3 id="completedCount">0</h3><p>Completed</p></div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon total"><i class="fas fa-dollar-sign"></i></div>
                            <div class="stat-info"><h3 id="totalValueConfirmed">$0</h3><p>Confirmed Value</p></div>
                        </div>
                    </div>
                    
                    <div class="filters">
                        <h3>Service Requests</h3>
                        <div class="filter-controls">
                            <select id="statusFilter">
                                <option value="all">All Status</option>
                                <option value="pending">Pending</option>
                                <option value="confirmed">Confirmed</option>
                                <option value="completed">Completed</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                            <select id="dateFilter">
                                <option value="all">All Dates</option>
                                <option value="today">Today</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                            </select>
                            <input type="text" id="searchFilter" placeholder="Search...">
                            <button id="refreshBtn" class="btn btn-secondary"><i class="fas fa-sync-alt"></i> Refresh</button>
                        </div>
                    </div>
                    
                    <div class="service-requests">
                        <div class="table-header">
                            <h4>Requests</h4>
                            <span id="tableInfo">Showing 0 requests</span>
                        </div>
                        <div class="table-container">
                            <table id="requestsTable">
                                <thead>
                                    <tr>
                                        <th>Name</th>
                                        <th>Contact</th>
                                        <th>Service</th>
                                        <th>Date/Time</th>
                                        <th>Status</th>
                                        <th>Value</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="requestsTableBody">
                                    <tr>
                                        <td colspan="7" style="text-align:center; padding: 40px;">
                                            <i class="fas fa-spinner fa-spin"></i> Loading requests...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="pagination" id="pagination"></div>
                    </div>
                </div>
                
                <!-- Price Settings Tab -->
                <div id="pricesTab" class="dashboard-tab-content">
                    <div class="price-settings">
                        <h3><i class="fas fa-tags"></i> Price Settings</h3>
                        <p class="text-center mb-20">Configure the base prices for each service. These values will be saved directly to the database and used to calculate the estimated price in the schedule form.</p>
                        
                        <div class="price-grid">
                            <!-- Residential Cleaning -->
                            <div class="price-card">
                                <h4><i class="fas fa-home"></i> Residential Cleaning</h4>
                                <div class="price-item">
                                    <label>Per Bedroom ($)</label>
                                    <input type="number" id="priceBedroom" class="price-input" value="35" min="0" step="5">
                                </div>
                                <div class="price-item">
                                    <label>Per Bathroom ($)</label>
                                    <input type="number" id="priceBathroom" class="price-input" value="40" min="0" step="5">
                                </div>
                                <div class="price-item">
                                    <label>Per Shower Box ($)</label>
                                    <input type="number" id="priceShower" class="price-input" value="25" min="0" step="5">
                                </div>
                                <div class="price-item">
                                    <label>Base Rate ($)</label>
                                    <input type="number" id="priceBase" class="price-input" value="50" min="0" step="10">
                                </div>
                            </div>
                            
                            <!-- Carpet Cleaning -->
                            <div class="price-card">
                                <h4><i class="fas fa-carpet"></i> Carpet Cleaning</h4>
                                <div class="price-item">
                                    <label>Per Square Foot ($/sq ft)</label>
                                    <input type="number" id="priceCarpetSqFt" class="price-input" value="0.35" min="0" step="0.05">
                                </div>
                                <div class="price-item">
                                    <label>Minimum Charge ($)</label>
                                    <input type="number" id="priceCarpetMin" class="price-input" value="50" min="0" step="10">
                                </div>
                            </div>
                            
                            <!-- Move In/Out -->
                            <div class="price-card">
                                <h4><i class="fas fa-truck-moving"></i> Move In/Out</h4>
                                <div class="price-item">
                                    <label>Base Rate ($)</label>
                                    <input type="number" id="priceMoveBase" class="price-input" value="120" min="0" step="10">
                                </div>
                                <div class="price-item">
                                    <label>Per Bedroom ($)</label>
                                    <input type="number" id="priceMoveBedroom" class="price-input" value="35" min="0" step="5">
                                </div>
                                <div class="price-item">
                                    <label>Per Bathroom ($)</label>
                                    <input type="number" id="priceMoveBathroom" class="price-input" value="40" min="0" step="5">
                                </div>
                            </div>
                            
                            <!-- Post-Construction -->
                            <div class="price-card">
                                <h4><i class="fas fa-hard-hat"></i> Post-Construction</h4>
                                <div class="price-item">
                                    <label>Base Rate ($)</label>
                                    <input type="number" id="priceConstructionBase" class="price-input" value="150" min="0" step="10">
                                </div>
                                <div class="price-item">
                                    <label>Per 100 sq ft ($)</label>
                                    <input type="number" id="priceConstructionSqFt" class="price-input" value="0.50" min="0" step="0.10">
                                </div>
                            </div>
                            
                            <!-- Commercial -->
                            <div class="price-card">
                                <h4><i class="fas fa-building"></i> Commercial</h4>
                                <div class="price-item">
                                    <label>Base Rate ($)</label>
                                    <input type="number" id="priceCommercialBase" class="price-input" value="100" min="0" step="10">
                                </div>
                                <div class="price-item">
                                    <label>Per 100 sq ft ($)</label>
                                    <input type="number" id="priceCommercialSqFt" class="price-input" value="0.30" min="0" step="0.05">
                                </div>
                            </div>
                            
                            <!-- Church/Worship -->
                            <div class="price-card">
                                <h4><i class="fas fa-church"></i> Worship Facility</h4>
                                <div class="price-item">
                                    <label>Base Rate ($)</label>
                                    <input type="number" id="priceChurchBase" class="price-input" value="120" min="0" step="10">
                                </div>
                                <div class="price-item">
                                    <label>Per 100 sq ft ($)</label>
                                    <input type="number" id="priceChurchSqFt" class="price-input" value="0.40" min="0" step="0.05">
                                </div>
                            </div>
                            
                            <!-- RV Cleaning -->
                            <div class="price-card">
                                <h4><i class="fas fa-campground"></i> RV Cleaning</h4>
                                <div class="price-item">
                                    <label>Small RV ($)</label>
                                    <input type="number" id="priceRvSmall" class="price-input" value="150" min="0" step="10">
                                </div>
                                <div class="price-item">
                                    <label>Medium RV ($)</label>
                                    <input type="number" id="priceRvMedium" class="price-input" value="200" min="0" step="10">
                                </div>
                                <div class="price-item">
                                    <label>Large RV ($)</label>
                                    <input type="number" id="priceRvLarge" class="price-input" value="300" min="0" step="10">
                                </div>
                            </div>
                            
                            <!-- Additional Fees -->
                            <div class="price-card">
                                <h4><i class="fas fa-plus-circle"></i> Additional Fees</h4>
                                <div class="price-item">
                                    <label>Per Pet ($)</label>
                                    <input type="number" id="pricePetFee" class="price-input" value="10" min="0" step="5">
                                </div>
                                <div class="price-item">
                                    <label>Per Child ($)</label>
                                    <input type="number" id="priceChildFee" class="price-input" value="0" min="0" step="5">
                                </div>
                                <div class="price-item">
                                    <label>Urgent/Same Day ($)</label>
                                    <input type="number" id="priceUrgentFee" class="price-input" value="25" min="0" step="5">
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-actions mt-20" style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button class="btn btn-primary" onclick="savePriceSettings()"><i class="fas fa-save"></i> Save All Prices to Database</button>
                            <button class="btn btn-secondary" onclick="resetPriceSettings()"><i class="fas fa-undo"></i> Reset to Default</button>
                            <button class="btn btn-warning" onclick="testPriceSettingsTable()"><i class="fas fa-vial"></i> Test Connection</button>
                        </div>
                        
                        <div class="form-message" id="priceSettingsMessage" style="margin-top: 20px; display: none;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Modal (com campo de valor acordado) -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-edit"></i> Edit Service Request</h3>
                <button class="close-modal" onclick="closeEditModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editServiceForm">
                    <input type="hidden" id="editRequestId">
                    <div class="modal-form-group">
                        <label>Full Name *</label>
                        <input type="text" id="editFullName" required>
                    </div>
                    <div class="modal-form-group">
                        <label>Phone Number *</label>
                        <input type="tel" id="editPhone" required>
                    </div>
                    <div class="modal-form-group">
                        <label>Email Address *</label>
                        <input type="email" id="editEmail" required>
                    </div>
                    <div class="modal-form-group">
                        <label>Address *</label>
                        <input type="text" id="editAddress" required>
                    </div>
                    <div class="modal-form-group">
                        <label>Service Type *</label>
                        <select id="editServiceType" required>
                            <option value="">Select</option>
                            <option value="move">Move In/Out</option>
                            <option value="construction">Post-Construction</option>
                            <option value="commercial">Commercial</option>
                            <option value="church">Worship Facility</option>
                            <option value="residential">Residential</option>
                            <option value="carpet">Carpet</option>
                            <option value="rv">RV</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="modal-form-group">
                        <label>Bedrooms</label>
                        <select id="editBedrooms">
                            <option value="0">None</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5+</option>
                        </select>
                    </div>
                    <div class="modal-form-group">
                        <label>Bathrooms</label>
                        <select id="editBathrooms">
                            <option value="0">None</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5+</option>
                        </select>
                    </div>
                    <div class="modal-form-group">
                        <label>Shower Box</label>
                        <select id="editShowerBoxCount">
                            <option value="0">None</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4+</option>
                        </select>
                    </div>
                    <div class="modal-form-group">
                        <label>Pets?</label>
                        <select id="editHasPets">
                            <option value="false">Não</option>
                            <option value="true">Sim</option>
                        </select>
                    </div>
                    <div class="modal-form-group">
                        <label>Number of Pets</label>
                        <input type="number" id="editPetCount" value="0">
                    </div>
                    <div class="modal-form-group">
                        <label>Children?</label>
                        <select id="editHasChildren">
                            <option value="false">Não</option>
                            <option value="true">Sim</option>
                        </select>
                    </div>
                    <div class="modal-form-group">
                        <label>Number of Children</label>
                        <input type="number" id="editChildrenCount" value="0">
                    </div>
                    <div class="modal-form-group">
                        <label>Cleaning Date *</label>
                        <input type="date" id="editCleaningDate" required>
                    </div>
                    <div class="modal-form-group">
                        <label>Cleaning Time *</label>
                        <select id="editCleaningTime" required>
                            <option value="">Select</option>
                            <option value="morning">Morning</option>
                            <option value="afternoon">Afternoon</option>
                            <option value="evening">Evening</option>
                        </select>
                    </div>
                    <div class="modal-form-group">
                        <label>Status *</label>
                        <select id="editStatus" required>
                            <option value="pending">Pending</option>
                            <option value="confirmed">Confirmed</option>
                            <option value="completed">Completed</option>
                            <option value="cancelled">Cancelled</option>
                        </select>
                    </div>
                    <div class="modal-form-group">
                        <label>Agreed Value ($)</label>
                        <input type="number" id="editAgreedValue" step="0.01" value="0">
                    </div>
                    <div class="modal-form-group">
                        <label>Description *</label>
                        <textarea id="editDescription" rows="4" required></textarea>
                    </div>
                    <div class="modal-actions">
                        <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Save</button>
                        <button type="button" class="btn btn-secondary" onclick="closeEditModal()"><i class="fas fa-times"></i> Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer com admin discreto -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="https://nekbbkenxcukoortusge.supabase.co/storage/v1/object/public/imagens_ca/logo_marca_fundo.png" alt="Rio Cleaning">
                    <p>Professional cleaning services in Calgary and surrounding areas.</p>
                </div>
                <div class="footer-contact">
                    <h4>Contact</h4>
                    <p><i class="fas fa-phone"></i> <a href="tel:5192806261">519-280-6261</a></p>
                    <p><i class="fas fa-envelope"></i> <a href="mailto:riocleaningyyc@gmail.com">riocleaningyyc@gmail.com</a></p>
                    <p><i class="fab fa-instagram"></i> <a href="https://www.instagram.com/riocleaningyyc" target="_blank">@riocleaningyyc</a></p>
                    <p><i class="fas fa-map-marker-alt"></i> Calgary, Chestermere, Airdrie, Okotoks</p>
                </div>
                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#" onclick="showHomePage()">Home</a></li>
                        <li><a href="#different" onclick="scrollToSection('different')">Why Choose Us</a></li>
                        <li><a href="#services-carousel" onclick="scrollToSection('services-carousel')">Services</a></li>
                        <li><a href="#carpet-gallery" onclick="scrollToSection('carpet-gallery')">Carpet</a></li>
                        <li><a href="#testimonials" onclick="scrollToSection('testimonials')">Reviews</a></li>
                        <li><a href="#" onclick="showScheduleForm()">Schedule</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; <span id="currentYear"></span> Rio Cleaning Services. All rights reserved.</p>
                <!-- Admin link discreto no rodapé -->
                <div class="admin-discreet">
                    <a href="#" onclick="showAdminPanel()"><i class="fas fa-lock"></i> admin</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <script>
        // Configuration
        const ADMIN_CREDENTIALS = {
            username: "admin_rio_cleaning",
            password: "SecurePass2024!"
        };
        const SUPABASE_URL = 'https://nekbbkenxcukoortusge.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5la2Jia2VueGN1a29vcnR1c2dlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzOTU5MDIsImV4cCI6MjA3ODk3MTkwMn0.D72914Vyz1du1ZDKoNDdwT7YI-D8WPgZe38LbBV2bfc';

        let supabaseClient = null;
        let currentPage = 1;
        let pageSize = 10;
        let currentFilters = { status: 'all', date: 'all', search: '' };
        let flatpickrInstance = null;

        // Price settings (loaded from database)
        let priceSettings = {};

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initSupabase();
            initMobileMenu();
            initScheduleForm();
            initAdminPanel();
            initEditModal();
            initConditionalFields();
            // Carregar preços do banco de dados
            loadPriceSettings().catch(error => {
                console.error('Error loading price settings:', error);
                priceSettings = getDefaultPriceSettings();
                updatePriceInputFields();
            });
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            // Inicializar campos condicionais
            updateConditionalFields();
        });

        // Carousel scroll
        function scrollCarousel(direction) {
            const carousel = document.getElementById('servicesCarousel');
            if (carousel) carousel.scrollBy({ left: 300 * direction, behavior: 'smooth' });
        }

        // Mobile menu
        function initMobileMenu() {
            const toggle = document.getElementById('menuToggle');
            const links = document.getElementById('navLinks');
            if (toggle && links) {
                toggle.addEventListener('click', () => {
                    links.classList.toggle('active');
                    toggle.innerHTML = links.classList.contains('active') ? '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
                });
            }
        }

        // Navigation
        function scrollToSection(id) {
            const section = document.getElementById(id);
            if (section) {
                showHomePage();
                setTimeout(() => {
                    const offset = document.querySelector('.navbar').offsetHeight;
                    window.scrollTo({ top: section.offsetTop - offset, behavior: 'smooth' });
                }, 100);
            }
            closeMobileMenu();
        }

        function showHomePage() {
            document.getElementById('mainContent').style.display = 'block';
            document.getElementById('scheduleFormContainer').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'none';
            closeMobileMenu();
        }

        function showScheduleForm() {
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('scheduleFormContainer').style.display = 'block';
            document.getElementById('adminPanel').style.display = 'none';
            setTimeout(initDatePicker, 100);
            closeMobileMenu();
        }

        function showAdminPanel() {
            document.getElementById('mainContent').style.display = 'none';
            document.getElementById('scheduleFormContainer').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'block';
            
            // Check if already logged in
            if (localStorage.getItem('adminLoggedIn') === 'true') {
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('adminDashboard').style.display = 'block';
                loadDashboardData();
            } else {
                document.getElementById('adminLogin').style.display = 'flex';
                document.getElementById('adminDashboard').style.display = 'none';
            }
            
            closeMobileMenu();
        }

        function closeMobileMenu() {
            const toggle = document.getElementById('menuToggle');
            const links = document.getElementById('navLinks');
            if (links && links.classList.contains('active')) {
                links.classList.remove('active');
                if (toggle) toggle.innerHTML = '<i class="fas fa-bars"></i>';
            }
        }

        // Conditional fields functions
        function updateConditionalFields() {
            const serviceType = document.getElementById('serviceType').value;
            const residentialFields = document.querySelectorAll('.residential-fields');
            const carpetField = document.querySelector('.carpet-field');
            
            const residentialTypes = ['move', 'construction', 'commercial', 'church', 'residential'];
            
            if (residentialTypes.includes(serviceType)) {
                residentialFields.forEach(field => field.style.display = 'block');
            } else {
                residentialFields.forEach(field => field.style.display = 'none');
            }
            
            if (serviceType === 'carpet') {
                carpetField.style.display = 'block';
            } else {
                carpetField.style.display = 'none';
            }
        }

        function togglePetCount() {
            const hasPets = document.getElementById('hasPets').value;
            document.getElementById('petCountGroup').style.display = hasPets === 'true' ? 'block' : 'none';
        }

        function toggleChildrenCount() {
            const hasChildren = document.getElementById('hasChildren').value;
            document.getElementById('childrenCountGroup').style.display = hasChildren === 'true' ? 'block' : 'none';
        }

        function initConditionalFields() {
            document.getElementById('hasPets').addEventListener('change', togglePetCount);
            document.getElementById('hasChildren').addEventListener('change', toggleChildrenCount);
            document.getElementById('serviceType').addEventListener('change', updateConditionalFields);
        }

        // Price calculation
        function calculateEstimatedPrice() {
            const serviceType = document.getElementById('serviceType').value;
            const priceBox = document.getElementById('estimatedPriceBox');
            const priceValue = document.getElementById('estimatedPriceValue');
            const priceDetail = document.getElementById('estimatedPriceDetail');
            
            if (!serviceType) {
                priceBox.style.display = 'none';
                return;
            }
            
            let total = 0;
            let details = [];
            
            switch(serviceType) {
                case 'residential':
                    const bedrooms = parseInt(document.getElementById('bedrooms').value) || 0;
                    const bathrooms = parseInt(document.getElementById('bathrooms').value) || 0;
                    const showers = parseInt(document.getElementById('showerBoxCount').value) || 0;
                    
                    total = priceSettings.base || 50;
                    details.push(`Base: $${priceSettings.base || 50}`);
                    
                    if (bedrooms > 0) {
                        total += bedrooms * (priceSettings.bedroom || 35);
                        details.push(`${bedrooms} bedroom(s): $${bedrooms * (priceSettings.bedroom || 35)}`);
                    }
                    if (bathrooms > 0) {
                        total += bathrooms * (priceSettings.bathroom || 40);
                        details.push(`${bathrooms} bathroom(s): $${bathrooms * (priceSettings.bathroom || 40)}`);
                    }
                    if (showers > 0) {
                        total += showers * (priceSettings.shower || 25);
                        details.push(`${showers} shower box(es): $${showers * (priceSettings.shower || 25)}`);
                    }
                    break;
                    
                case 'carpet':
                    const length = parseFloat(document.getElementById('carpetLength').value) || 0;
                    const width = parseFloat(document.getElementById('carpetWidth').value) || 0;
                    const sqFt = length * width;
                    
                    if (sqFt > 0) {
                        total = sqFt * (priceSettings.carpetSqFt || 0.35);
                        details.push(`${sqFt} sq ft: $${(sqFt * (priceSettings.carpetSqFt || 0.35)).toFixed(2)}`);
                        
                        if (total < (priceSettings.carpetMin || 50)) {
                            total = priceSettings.carpetMin || 50;
                            details.push(`Minimum charge: $${priceSettings.carpetMin || 50}`);
                        }
                    } else {
                        total = priceSettings.carpetMin || 50;
                        details.push(`Base rate: $${priceSettings.carpetMin || 50}`);
                    }
                    break;
                    
                case 'move':
                    const moveBedrooms = parseInt(document.getElementById('bedrooms').value) || 0;
                    const moveBathrooms = parseInt(document.getElementById('bathrooms').value) || 0;
                    
                    total = priceSettings.moveBase || 120;
                    details.push(`Base: $${priceSettings.moveBase || 120}`);
                    
                    if (moveBedrooms > 0) {
                        total += moveBedrooms * (priceSettings.moveBedroom || 35);
                        details.push(`${moveBedrooms} bedroom(s): $${moveBedrooms * (priceSettings.moveBedroom || 35)}`);
                    }
                    if (moveBathrooms > 0) {
                        total += moveBathrooms * (priceSettings.moveBathroom || 40);
                        details.push(`${moveBathrooms} bathroom(s): $${moveBathrooms * (priceSettings.moveBathroom || 40)}`);
                    }
                    break;
                    
                case 'construction':
                    total = priceSettings.constructionBase || 150;
                    details.push(`Base rate: $${priceSettings.constructionBase || 150}`);
                    break;
                    
                case 'commercial':
                    total = priceSettings.commercialBase || 100;
                    details.push(`Base rate: $${priceSettings.commercialBase || 100}`);
                    break;
                    
                case 'church':
                    total = priceSettings.churchBase || 120;
                    details.push(`Base rate: $${priceSettings.churchBase || 120}`);
                    break;
                    
                case 'rv':
                    total = priceSettings.rvMedium || 200; // Default to medium
                    details.push(`RV cleaning: $${priceSettings.rvMedium || 200}`);
                    break;
                    
                default:
                    total = 100; // Default for other services
                    details.push(`Base rate: $100`);
            }
            
            // Add pet fee
            const hasPets = document.getElementById('hasPets').value === 'true';
            const petCount = parseInt(document.getElementById('petCount').value) || 0;
            if (hasPets && petCount > 0 && (priceSettings.petFee || 0) > 0) {
                const petFee = petCount * (priceSettings.petFee || 10);
                total += petFee;
                details.push(`Pets (${petCount}): $${petFee}`);
            }
            
            // Add child fee
            const hasChildren = document.getElementById('hasChildren').value === 'true';
            const childCount = parseInt(document.getElementById('childrenCount').value) || 0;
            if (hasChildren && childCount > 0 && (priceSettings.childFee || 0) > 0) {
                const childFee = childCount * (priceSettings.childFee || 0);
                total += childFee;
                details.push(`Children (${childCount}): $${childFee}`);
            }
            
            // Show the price
            priceValue.textContent = `$${total.toFixed(2)}`;
            priceDetail.textContent = details.join(' • ');
            priceBox.style.display = 'block';
        }

        // ============== PRICE SETTINGS FUNCTIONS (DATABASE) ==============

        // Carregar preços do Supabase
        async function loadPriceSettings() {
            if (!supabaseClient) {
                console.error('Supabase not initialized');
                return;
            }
            
            try {
                const { data, error } = await supabaseClient
                    .from('price_settings')
                    .select('*')
                    .limit(1)
                    .single();
                
                if (error) {
                    console.error('Error loading price settings:', error);
                    // Fallback para valores padrão se não conseguir carregar
                    priceSettings = getDefaultPriceSettings();
                } else if (data) {
                    // Mapear os nomes das colunas do banco para os nomes usados no código
                    priceSettings = {
                        bedroom: data.bedroom || 35,
                        bathroom: data.bathroom || 40,
                        shower: data.shower || 25,
                        base: data.base || 50,
                        carpetSqFt: data.carpet_sq_ft || 0.35,
                        carpetMin: data.carpet_min || 50,
                        moveBase: data.move_base || 120,
                        moveBedroom: data.move_bedroom || 35,
                        moveBathroom: data.move_bathroom || 40,
                        constructionBase: data.construction_base || 150,
                        constructionSqFt: data.construction_sq_ft || 0.50,
                        commercialBase: data.commercial_base || 100,
                        commercialSqFt: data.commercial_sq_ft || 0.30,
                        churchBase: data.church_base || 120,
                        churchSqFt: data.church_sq_ft || 0.40,
                        rvSmall: data.rv_small || 150,
                        rvMedium: data.rv_medium || 200,
                        rvLarge: data.rv_large || 300,
                        petFee: data.pet_fee || 10,
                        childFee: data.child_fee || 0,
                        urgentFee: data.urgent_fee || 25
                    };
                }
                
                // Atualizar os campos do formulário
                updatePriceInputFields();
                
            } catch (error) {
                console.error('Error in loadPriceSettings:', error);
                priceSettings = getDefaultPriceSettings();
                updatePriceInputFields();
            }
        }

        // Valores padrão caso não consiga carregar do banco
        function getDefaultPriceSettings() {
            return {
                bedroom: 35,
                bathroom: 40,
                shower: 25,
                base: 50,
                carpetSqFt: 0.35,
                carpetMin: 50,
                moveBase: 120,
                moveBedroom: 35,
                moveBathroom: 40,
                constructionBase: 150,
                constructionSqFt: 0.50,
                commercialBase: 100,
                commercialSqFt: 0.30,
                churchBase: 120,
                churchSqFt: 0.40,
                rvSmall: 150,
                rvMedium: 200,
                rvLarge: 300,
                petFee: 10,
                childFee: 0,
                urgentFee: 25
            };
        }

        // Atualizar campos de input com os valores carregados
        function updatePriceInputFields() {
            const fields = [
                'priceBedroom', 'priceBathroom', 'priceShower', 'priceBase',
                'priceCarpetSqFt', 'priceCarpetMin', 'priceMoveBase', 'priceMoveBedroom',
                'priceMoveBathroom', 'priceConstructionBase', 'priceConstructionSqFt',
                'priceCommercialBase', 'priceCommercialSqFt', 'priceChurchBase', 'priceChurchSqFt',
                'priceRvSmall', 'priceRvMedium', 'priceRvLarge', 'pricePetFee',
                'priceChildFee', 'priceUrgentFee'
            ];
            
            fields.forEach(fieldId => {
                const element = document.getElementById(fieldId);
                if (element) {
                    const priceKey = fieldId.replace('price', '')
                        .replace('Bedroom', 'bedroom')
                        .replace('Bathroom', 'bathroom')
                        .replace('Shower', 'shower')
                        .replace('Base', 'base')
                        .replace('CarpetSqFt', 'carpetSqFt')
                        .replace('CarpetMin', 'carpetMin')
                        .replace('MoveBase', 'moveBase')
                        .replace('MoveBedroom', 'moveBedroom')
                        .replace('MoveBathroom', 'moveBathroom')
                        .replace('ConstructionBase', 'constructionBase')
                        .replace('ConstructionSqFt', 'constructionSqFt')
                        .replace('CommercialBase', 'commercialBase')
                        .replace('CommercialSqFt', 'commercialSqFt')
                        .replace('ChurchBase', 'churchBase')
                        .replace('ChurchSqFt', 'churchSqFt')
                        .replace('RvSmall', 'rvSmall')
                        .replace('RvMedium', 'rvMedium')
                        .replace('RvLarge', 'rvLarge')
                        .replace('PetFee', 'petFee')
                        .replace('ChildFee', 'childFee')
                        .replace('UrgentFee', 'urgentFee');
                    
                    element.value = priceSettings[priceKey] || 0;
                }
            });
        }

        // Salvar preços no Supabase
        async function savePriceSettings() {
            if (!supabaseClient) {
                showToast('Supabase not initialized', 'error');
                return;
            }
            
            // Coletar valores dos inputs
            const newSettings = {
                bedroom: parseFloat(document.getElementById('priceBedroom').value) || 35,
                bathroom: parseFloat(document.getElementById('priceBathroom').value) || 40,
                shower: parseFloat(document.getElementById('priceShower').value) || 25,
                base: parseFloat(document.getElementById('priceBase').value) || 50,
                carpet_sq_ft: parseFloat(document.getElementById('priceCarpetSqFt').value) || 0.35,
                carpet_min: parseFloat(document.getElementById('priceCarpetMin').value) || 50,
                move_base: parseFloat(document.getElementById('priceMoveBase').value) || 120,
                move_bedroom: parseFloat(document.getElementById('priceMoveBedroom').value) || 35,
                move_bathroom: parseFloat(document.getElementById('priceMoveBathroom').value) || 40,
                construction_base: parseFloat(document.getElementById('priceConstructionBase').value) || 150,
                construction_sq_ft: parseFloat(document.getElementById('priceConstructionSqFt').value) || 0.50,
                commercial_base: parseFloat(document.getElementById('priceCommercialBase').value) || 100,
                commercial_sq_ft: parseFloat(document.getElementById('priceCommercialSqFt').value) || 0.30,
                church_base: parseFloat(document.getElementById('priceChurchBase').value) || 120,
                church_sq_ft: parseFloat(document.getElementById('priceChurchSqFt').value) || 0.40,
                rv_small: parseFloat(document.getElementById('priceRvSmall').value) || 150,
                rv_medium: parseFloat(document.getElementById('priceRvMedium').value) || 200,
                rv_large: parseFloat(document.getElementById('priceRvLarge').value) || 300,
                pet_fee: parseFloat(document.getElementById('pricePetFee').value) || 10,
                child_fee: parseFloat(document.getElementById('priceChildFee').value) || 0,
                urgent_fee: parseFloat(document.getElementById('priceUrgentFee').value) || 25
            };
            
            try {
                // Verificar se já existe um registro
                const { data: existingData, error: checkError } = await supabaseClient
                    .from('price_settings')
                    .select('id')
                    .limit(1);
                
                if (checkError) throw checkError;
                
                let result;
                if (existingData && existingData.length > 0) {
                    // Atualizar registro existente
                    result = await supabaseClient
                        .from('price_settings')
                        .update(newSettings)
                        .eq('id', existingData[0].id);
                } else {
                    // Inserir novo registro
                    result = await supabaseClient
                        .from('price_settings')
                        .insert([newSettings]);
                }
                
                if (result.error) throw result.error;
                
                // Atualizar a variável local
                priceSettings = {
                    bedroom: newSettings.bedroom,
                    bathroom: newSettings.bathroom,
                    shower: newSettings.shower,
                    base: newSettings.base,
                    carpetSqFt: newSettings.carpet_sq_ft,
                    carpetMin: newSettings.carpet_min,
                    moveBase: newSettings.move_base,
                    moveBedroom: newSettings.move_bedroom,
                    moveBathroom: newSettings.move_bathroom,
                    constructionBase: newSettings.construction_base,
                    constructionSqFt: newSettings.construction_sq_ft,
                    commercialBase: newSettings.commercial_base,
                    commercialSqFt: newSettings.commercial_sq_ft,
                    churchBase: newSettings.church_base,
                    churchSqFt: newSettings.church_sq_ft,
                    rvSmall: newSettings.rv_small,
                    rvMedium: newSettings.rv_medium,
                    rvLarge: newSettings.rv_large,
                    petFee: newSettings.pet_fee,
                    childFee: newSettings.child_fee,
                    urgentFee: newSettings.urgent_fee
                };
                
                showToast('Price settings saved successfully to database!', 'success');
                
                // Recalculate if on schedule form
                if (document.getElementById('scheduleFormContainer').style.display === 'block') {
                    calculateEstimatedPrice();
                }
                
            } catch (error) {
                console.error('Error saving price settings:', error);
                showToast('Error saving price settings: ' + error.message, 'error');
            }
        }

        // Resetar para valores padrão
        async function resetPriceSettings() {
            if (confirm('Reset all price settings to default values?')) {
                const defaultSettings = getDefaultPriceSettings();
                
                // Converter para formato do banco
                const dbSettings = {
                    bedroom: defaultSettings.bedroom,
                    bathroom: defaultSettings.bathroom,
                    shower: defaultSettings.shower,
                    base: defaultSettings.base,
                    carpet_sq_ft: defaultSettings.carpetSqFt,
                    carpet_min: defaultSettings.carpetMin,
                    move_base: defaultSettings.moveBase,
                    move_bedroom: defaultSettings.moveBedroom,
                    move_bathroom: defaultSettings.moveBathroom,
                    construction_base: defaultSettings.constructionBase,
                    construction_sq_ft: defaultSettings.constructionSqFt,
                    commercial_base: defaultSettings.commercialBase,
                    commercial_sq_ft: defaultSettings.commercialSqFt,
                    church_base: defaultSettings.churchBase,
                    church_sq_ft: defaultSettings.churchSqFt,
                    rv_small: defaultSettings.rvSmall,
                    rv_medium: defaultSettings.rvMedium,
                    rv_large: defaultSettings.rvLarge,
                    pet_fee: defaultSettings.petFee,
                    child_fee: defaultSettings.childFee,
                    urgent_fee: defaultSettings.urgentFee
                };
                
                try {
                    // Verificar se já existe um registro
                    const { data: existingData, error: checkError } = await supabaseClient
                        .from('price_settings')
                        .select('id')
                        .limit(1);
                    
                    if (checkError) throw checkError;
                    
                    if (existingData && existingData.length > 0) {
                        // Atualizar registro existente
                        await supabaseClient
                            .from('price_settings')
                            .update(dbSettings)
                            .eq('id', existingData[0].id);
                    } else {
                        // Inserir novo registro
                        await supabaseClient
                            .from('price_settings')
                            .insert([dbSettings]);
                    }
                    
                    // Recarregar os preços
                    await loadPriceSettings();
                    showToast('Price settings reset to default', 'success');
                    
                } catch (error) {
                    console.error('Error resetting price settings:', error);
                    showToast('Error resetting price settings: ' + error.message, 'error');
                }
            }
        }

        // Testar conexão com a tabela de preços
        async function testPriceSettingsTable() {
            if (!supabaseClient) {
                showToast('Supabase not initialized', 'error');
                return;
            }
            
            try {
                const { data, error } = await supabaseClient
                    .from('price_settings')
                    .select('*');
                
                if (error) {
                    showToast('Error: ' + error.message, 'error');
                    console.error('Error testing price settings:', error);
                } else {
                    showToast(`Success! Found ${data.length} price setting record(s)`, 'success');
                    console.log('Price settings data:', data);
                    
                    // Mostrar detalhes no console
                    if (data.length > 0) {
                        console.log('Current settings:', data[0]);
                    }
                }
            } catch (error) {
                showToast('Error: ' + error.message, 'error');
            }
        }

        // Date picker
        function initDatePicker() {
            const input = document.getElementById('cleaningDate');
            if (input && !flatpickrInstance) {
                flatpickrInstance = flatpickr(input, { 
                    minDate: 'today', 
                    dateFormat: 'Y-m-d',
                    onChange: function() {
                        calculateEstimatedPrice();
                    }
                });
            }
        }

        // Supabase
        function initSupabase() {
            if (window.supabase) {
                supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                console.log('Supabase initialized');
            } else {
                console.error('Supabase library not loaded');
            }
        }

        // Test Supabase Connection
        async function testSupabaseConnection() {
            showDebugPanel();
            const debugInfo = document.getElementById('debugInfo');
            
            if (!supabaseClient) {
                debugInfo.innerHTML = '<span class="debug-error">❌ Supabase not initialized</span>';
                return;
            }
            
            let html = '<strong>Testing Supabase Connection...</strong><br><br>';
            
            try {
                // Test 1: Basic connection
                html += '🔍 Test 1: Basic connection... ';
                const { data: testData, error: testError } = await supabaseClient.from('service_requests').select('count', { count: 'exact', head: true });
                
                if (testError) {
                    html += `<span class="debug-error">❌ Failed - ${testError.message}</span><br>`;
                } else {
                    html += '<span class="debug-success">✅ Success</span><br>';
                }
                
                // Test 2: Fetch all requests
                html += '🔍 Test 2: Fetching all requests... ';
                const { data: allData, error: allError } = await supabaseClient
                    .from('service_requests')
                    .select('*')
                    .limit(5);
                
                if (allError) {
                    html += `<span class="debug-error">❌ Failed - ${allError.message}</span><br>`;
                } else {
                    html += `<span class="debug-success">✅ Success - Found ${allData.length} requests</span><br>`;
                    if (allData.length > 0) {
                        html += '<br><strong>Sample data:</strong><br>';
                        allData.forEach((item, index) => {
                            // Converter ID para string para exibição
                            const idStr = item.id ? String(item.id) : 'N/A';
                            html += `${index + 1}. ${item.full_name} - ${item.service_type} - ${item.status} (ID: ${idStr.substring(0, 8)}...)<br>`;
                        });
                    }
                }
                
                // Test 3: Check table structure
                html += '🔍 Test 3: Checking table structure... ';
                if (allData && allData.length > 0) {
                    const columns = Object.keys(allData[0]);
                    html += `<span class="debug-success">✅ Success - Columns: ${columns.join(', ')}</span><br>`;
                } else {
                    html += '<span class="debug-warning">⚠️ No data to analyze structure</span><br>';
                }
                
                // Test 4: Test price settings table
                html += '🔍 Test 4: Testing price settings table... ';
                const { data: priceData, error: priceError } = await supabaseClient
                    .from('price_settings')
                    .select('*')
                    .limit(1);
                
                if (priceError) {
                    html += `<span class="debug-error">❌ Failed - ${priceError.message}</span><br>`;
                } else {
                    html += `<span class="debug-success">✅ Success - Found ${priceData.length} price record(s)</span><br>`;
                    if (priceData.length > 0) {
                        html += '<br><strong>Price settings:</strong><br>';
                        Object.entries(priceData[0]).forEach(([key, value]) => {
                            if (key !== 'id' && key !== 'created_at' && key !== 'updated_at') {
                                html += `- ${key}: $${value}<br>`;
                            }
                        });
                    }
                }
                
            } catch (error) {
                html += `<span class="debug-error">❌ Unexpected error: ${error.message}</span>`;
            }
            
            debugInfo.innerHTML = html;
        }

        async function insertTestRecord() {
            if (!supabaseClient) {
                alert('Supabase not initialized');
                return;
            }
            
            const testData = {
                full_name: 'Test User',
                phone: '123-456-7890',
                email: 'test@example.com',
                address: '123 Test Street',
                service_type: 'test',
                bedrooms: 2,
                bathrooms: 1,
                shower_box_count: 1,
                has_pets: false,
                pet_count: 0,
                has_children: false,
                children_count: 0,
                cleaning_date: new Date().toISOString().split('T')[0],
                cleaning_time: 'morning',
                description: 'This is a test record',
                status: 'pending',
                estimated_value: 100,
                created_at: new Date().toISOString()
            };
            
            const { data, error } = await supabaseClient
                .from('service_requests')
                .insert([testData])
                .select();
            
            if (error) {
                alert('Error inserting test record: ' + error.message);
                console.error('Insert error:', error);
            } else {
                alert('Test record inserted successfully!');
                console.log('Inserted:', data);
                testSupabaseConnection(); // Refresh debug info
                loadServiceRequests(); // Reload requests table
            }
        }

        function showDebugPanel() {
            document.getElementById('debugPanel').style.display = 'block';
        }

        function hideDebugPanel() {
            document.getElementById('debugPanel').style.display = 'none';
        }

        // Form submission
        function initScheduleForm() {
            const form = document.getElementById('cleaningServiceForm');
            if (!form) return;
            
            form.addEventListener('submit', async function(e) {
                e.preventDefault();
                const btn = form.querySelector('button[type="submit"]');
                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...';
                btn.disabled = true;
                
                // Calcular preço estimado
                const estimatedPrice = parseFloat(document.getElementById('estimatedPriceValue').textContent.replace('$', '')) || 0;
                
                const formData = {
                    full_name: document.getElementById('fullName').value,
                    phone: document.getElementById('phone').value,
                    email: document.getElementById('email').value,
                    address: document.getElementById('address').value,
                    service_type: document.getElementById('serviceType').value,
                    bedrooms: parseInt(document.getElementById('bedrooms')?.value) || 0,
                    bathrooms: parseInt(document.getElementById('bathrooms')?.value) || 0,
                    shower_box_count: parseInt(document.getElementById('showerBoxCount')?.value) || 0,
                    has_pets: document.getElementById('hasPets').value === 'true',
                    pet_count: parseInt(document.getElementById('petCount')?.value) || 0,
                    has_children: document.getElementById('hasChildren').value === 'true',
                    children_count: parseInt(document.getElementById('childrenCount')?.value) || 0,
                    cleaning_date: document.getElementById('cleaningDate').value,
                    cleaning_time: document.getElementById('cleaningTime').value,
                    description: document.getElementById('description').value,
                    status: 'pending',
                    estimated_value: estimatedPrice,
                    agreed_value: null,
                    created_at: new Date().toISOString()
                };
                
                if (formData.service_type === 'carpet') {
                    formData.carpet_length = parseFloat(document.getElementById('carpetLength')?.value) || 0;
                    formData.carpet_width = parseFloat(document.getElementById('carpetWidth')?.value) || 0;
                }
                
                const msg = document.getElementById('formMessage');
                
                if (!formData.full_name || !formData.phone || !formData.email || !formData.address || !formData.service_type || !formData.cleaning_date || !formData.cleaning_time || !formData.description) {
                    showError('Please fill all required fields', msg, btn);
                    return;
                }
                
                if (!/^\S+@\S+\.\S+$/.test(formData.email)) {
                    showError('Invalid email', msg, btn);
                    return;
                }
                
                const result = await addServiceRequest(formData);
                if (result.success) {
                    msg.className = 'form-message success';
                    msg.innerHTML = '<i class="fas fa-check-circle"></i> Submitted successfully!';
                    form.reset();
                    
                    // Esconder a caixa de preço após submit
                    document.getElementById('estimatedPriceBox').style.display = 'none';
                    
                    setTimeout(() => showHomePage(), 2000);
                } else {
                    showError(result.error || 'Submission failed', msg, btn);
                }
                btn.innerHTML = '<i class="fas fa-paper-plane"></i> Submit';
                btn.disabled = false;
            });
        }

        function showError(text, msg, btn) {
            msg.className = 'form-message error';
            msg.innerHTML = `<i class="fas fa-exclamation-circle"></i> ${text}`;
            btn.innerHTML = '<i class="fas fa-paper-plane"></i> Submit';
            btn.disabled = false;
        }

        async function addServiceRequest(data) {
            if (!supabaseClient) return { success: false, error: 'No connection' };
            try {
                const { error } = await supabaseClient.from('service_requests').insert([data]);
                return error ? { success: false, error: error.message } : { success: true };
            } catch (e) {
                return { success: false, error: e.message };
            }
        }

        // Admin functions
        function initAdminPanel() {
            document.getElementById('loginBtn')?.addEventListener('click', handleAdminLogin);
            document.getElementById('exportExcelBtn')?.addEventListener('click', exportToExcel);
            document.getElementById('refreshBtn')?.addEventListener('click', () => loadServiceRequests(1));
            document.getElementById('testConnectionBtn')?.addEventListener('click', testSupabaseConnection);
            
            document.getElementById('statusFilter')?.addEventListener('change', function() {
                currentFilters.status = this.value;
                loadServiceRequests(1);
            });
            
            document.getElementById('dateFilter')?.addEventListener('change', function() {
                currentFilters.date = this.value;
                loadServiceRequests(1);
            });
            
            document.getElementById('searchFilter')?.addEventListener('input', debounce(function() {
                currentFilters.search = this.value;
                loadServiceRequests(1);
            }, 500));
        }

        function switchAdminTab(tab) {
            const tabs = document.querySelectorAll('.dashboard-tab');
            const contents = document.querySelectorAll('.dashboard-tab-content');
            
            tabs.forEach(t => t.classList.remove('active'));
            contents.forEach(c => c.classList.remove('active'));
            
            if (tab === 'requests') {
                tabs[0].classList.add('active');
                document.getElementById('requestsTab').classList.add('active');
                loadServiceRequests(1);
            } else {
                tabs[1].classList.add('active');
                document.getElementById('pricesTab').classList.add('active');
                loadPriceSettings();
            }
        }

        function handleAdminLogin() {
            const user = document.getElementById('adminUsername').value;
            const pass = document.getElementById('adminPassword').value;
            if (user === ADMIN_CREDENTIALS.username && pass === ADMIN_CREDENTIALS.password) {
                localStorage.setItem('adminLoggedIn', 'true');
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('adminDashboard').style.display = 'block';
                loadDashboardData();
                showToast('Login successful', 'success');
            } else {
                document.getElementById('loginMessage').innerHTML = '<i class="fas fa-exclamation-circle"></i> Invalid credentials';
            }
        }

        function logoutAdmin() {
            localStorage.removeItem('adminLoggedIn');
            document.getElementById('adminDashboard').style.display = 'none';
            document.getElementById('adminLogin').style.display = 'flex';
        }

        async function loadDashboardData() {
            await loadStats();
            await loadServiceRequests(1);
        }

        async function loadStats() {
            if (!supabaseClient) return;
            
            try {
                const { data: all, error } = await supabaseClient.from('service_requests').select('status, agreed_value');
                
                if (error) {
                    console.error('Error loading stats:', error);
                    return;
                }
                
                let pending = 0, confirmed = 0, completed = 0, totalValue = 0;
                
                all?.forEach(r => {
                    if (r.status === 'pending') pending++;
                    else if (r.status === 'confirmed') {
                        confirmed++;
                        totalValue += r.agreed_value || 0;
                    }
                    else if (r.status === 'completed') {
                        completed++;
                        totalValue += r.agreed_value || 0;
                    }
                });
                
                document.getElementById('pendingCount').textContent = pending;
                document.getElementById('confirmedCount').textContent = confirmed;
                document.getElementById('completedCount').textContent = completed;
                document.getElementById('totalValueConfirmed').textContent = '$' + totalValue.toFixed(2);
                
            } catch (error) {
                console.error('Error in loadStats:', error);
            }
        }

        async function loadServiceRequests(page = 1) {
            if (!supabaseClient) {
                console.error('Supabase not initialized');
                document.getElementById('requestsTableBody').innerHTML = '<tr><td colspan="7" style="text-align:center; padding: 40px; color: #ff6b6b;">❌ Supabase not initialized</td></tr>';
                return;
            }
            
            currentPage = page;
            
            try {
                // Show loading state
                document.getElementById('requestsTableBody').innerHTML = '<tr><td colspan="7" style="text-align:center; padding: 40px;"><i class="fas fa-spinner fa-spin"></i> Loading requests...</td></tr>';
                
                // Build query
                let query = supabaseClient
                    .from('service_requests')
                    .select('*', { count: 'exact' });
                
                // Apply status filter
                if (currentFilters.status && currentFilters.status !== 'all') {
                    query = query.eq('status', currentFilters.status);
                }
                
                // Apply search filter
                if (currentFilters.search && currentFilters.search.trim() !== '') {
                    const searchTerm = `%${currentFilters.search.trim()}%`;
                    query = query.or(`full_name.ilike.${searchTerm},email.ilike.${searchTerm}`);
                }
                
                // Apply date filter
                if (currentFilters.date && currentFilters.date !== 'all') {
                    const today = new Date();
                    let startDate = new Date();
                    
                    if (currentFilters.date === 'today') {
                        startDate.setHours(0, 0, 0, 0);
                    } else if (currentFilters.date === 'week') {
                        startDate.setDate(today.getDate() - 7);
                    } else if (currentFilters.date === 'month') {
                        startDate.setMonth(today.getMonth() - 1);
                    }
                    
                    query = query.gte('created_at', startDate.toISOString());
                }
                
                // Get total count first
                const { count, error: countError } = await query;
                
                if (countError) {
                    throw countError;
                }
                
                // Apply pagination
                const from = (page - 1) * pageSize;
                const to = from + pageSize - 1;
                
                const { data, error } = await query
                    .order('created_at', { ascending: false })
                    .range(from, to);
                
                if (error) {
                    throw error;
                }
                
                console.log(`Loaded ${data?.length || 0} requests (total: ${count})`);
                
                const tbody = document.getElementById('requestsTableBody');
                
                if (!data || data.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="7" style="text-align:center; padding: 40px;">📭 No requests found</td></tr>';
                    document.getElementById('tableInfo').textContent = 'Showing 0 requests';
                    document.getElementById('pagination').innerHTML = '';
                    return;
                }
                
                let html = '';
                data.forEach(r => {
                    // Determinar classe e ícone do status
                    let statusClass = '';
                    let statusIcon = '';
                    
                    switch(r.status) {
                        case 'pending':
                            statusClass = 'status-pending';
                            statusIcon = '<i class="fas fa-clock"></i>';
                            break;
                        case 'confirmed':
                            statusClass = 'status-confirmed';
                            statusIcon = '<i class="fas fa-check-circle"></i>';
                            break;
                        case 'completed':
                            statusClass = 'status-completed';
                            statusIcon = '<i class="fas fa-flag-checkered"></i>';
                            break;
                        case 'cancelled':
                            statusClass = 'status-cancelled';
                            statusIcon = '<i class="fas fa-times-circle"></i>';
                            break;
                        default:
                            statusClass = 'status-pending';
                            statusIcon = '<i class="fas fa-clock"></i>';
                    }
                    
                    // Formatar ID (converter para string)
                    let displayId = 'N/A';
                    if (r.id) {
                        const idStr = String(r.id);
                        displayId = idStr.substring(0, 8) + '...';
                    }
                    
                    // Formatar data
                    const cleaningDate = r.cleaning_date ? new Date(r.cleaning_date).toLocaleDateString('en-US') : 'N/A';
                    
                    // Formatar valor
                    let valueDisplay = '-';
                    if (r.agreed_value) {
                        valueDisplay = '$' + parseFloat(r.agreed_value).toFixed(2);
                    } else if (r.estimated_value) {
                        valueDisplay = 'Est: $' + parseFloat(r.estimated_value).toFixed(2);
                    }
                    
                    html += `<tr>
                        <td>
                            <strong>${r.full_name || 'N/A'}</strong><br>
                            <small style="color: #718096;">ID: ${displayId}</small>
                        </td>
                        <td>
                            ${r.phone || 'N/A'}<br>
                            <small style="color: #718096;">${r.email || 'N/A'}</small>
                        </td>
                        <td>${r.service_type || 'N/A'}</td>
                        <td>
                            ${cleaningDate}<br>
                            <small style="color: #718096;">${r.cleaning_time || 'N/A'}</small>
                        </td>
                        <td>
                            <span class="status-badge ${statusClass}">
                                ${statusIcon} ${r.status || 'pending'}
                            </span>
                        </td>
                        <td>${valueDisplay}</td>
                        <td>
                            <div style="display: flex; gap: 5px;">
                                <button class="btn btn-primary btn-small" onclick="editServiceRequest('${String(r.id)}')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-danger btn-small" onclick="deleteServiceRequest('${String(r.id)}')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>`;
                });
                
                tbody.innerHTML = html;
                document.getElementById('tableInfo').textContent = `Showing ${data.length} of ${count} requests`;
                
                // Gerar paginação
                const totalPages = Math.ceil(count / pageSize);
                let paginationHtml = '';
                
                for (let i = 1; i <= totalPages; i++) {
                    paginationHtml += `<button class="${i === page ? 'active' : ''}" onclick="loadServiceRequests(${i})">${i}</button>`;
                }
                
                document.getElementById('pagination').innerHTML = paginationHtml;
                
            } catch (error) {
                console.error('Error loading requests:', error);
                document.getElementById('requestsTableBody').innerHTML = `<tr><td colspan="7" style="text-align:center; padding: 40px; color: #ff6b6b;">❌ Error: ${error.message}</td></tr>`;
                showToast('Error loading requests: ' + error.message, 'error');
            }
        }

        // Export to Excel (placeholder)
        function exportToExcel() {
            showToast('Export functionality coming soon!', 'info');
        }

        // Edit modal
        function initEditModal() {
            document.getElementById('editServiceForm')?.addEventListener('submit', async function(e) {
                e.preventDefault();
                const id = document.getElementById('editRequestId').value;
                const data = {
                    full_name: document.getElementById('editFullName').value,
                    phone: document.getElementById('editPhone').value,
                    email: document.getElementById('editEmail').value,
                    address: document.getElementById('editAddress').value,
                    service_type: document.getElementById('editServiceType').value,
                    bedrooms: parseInt(document.getElementById('editBedrooms').value) || 0,
                    bathrooms: parseInt(document.getElementById('editBathrooms').value) || 0,
                    shower_box_count: parseInt(document.getElementById('editShowerBoxCount').value) || 0,
                    has_pets: document.getElementById('editHasPets').value === 'true',
                    pet_count: parseInt(document.getElementById('editPetCount').value) || 0,
                    has_children: document.getElementById('editHasChildren').value === 'true',
                    children_count: parseInt(document.getElementById('editChildrenCount').value) || 0,
                    cleaning_date: document.getElementById('editCleaningDate').value,
                    cleaning_time: document.getElementById('editCleaningTime').value,
                    status: document.getElementById('editStatus').value,
                    agreed_value: parseFloat(document.getElementById('editAgreedValue').value) || 0,
                    description: document.getElementById('editDescription').value
                };
                
                if (supabaseClient) {
                    const { error } = await supabaseClient.from('service_requests').update(data).eq('id', id);
                    if (!error) {
                        closeEditModal();
                        loadServiceRequests(currentPage);
                        loadStats();
                        showToast('Updated successfully', 'success');
                    } else {
                        showToast('Error updating: ' + error.message, 'error');
                    }
                }
            });
        }

        async function editServiceRequest(id) {
            if (!supabaseClient) return;
            
            // Converter id para string
            const idStr = String(id);
            
            const { data, error } = await supabaseClient
                .from('service_requests')
                .select()
                .eq('id', idStr)
                .single();
                
            if (error) {
                showToast('Error loading request: ' + error.message, 'error');
                return;
            }
            
            if (data) {
                document.getElementById('editRequestId').value = data.id;
                document.getElementById('editFullName').value = data.full_name || '';
                document.getElementById('editPhone').value = data.phone || '';
                document.getElementById('editEmail').value = data.email || '';
                document.getElementById('editAddress').value = data.address || '';
                document.getElementById('editServiceType').value = data.service_type || '';
                document.getElementById('editBedrooms').value = data.bedrooms || 0;
                document.getElementById('editBathrooms').value = data.bathrooms || 0;
                document.getElementById('editShowerBoxCount').value = data.shower_box_count || 0;
                document.getElementById('editHasPets').value = data.has_pets ? 'true' : 'false';
                document.getElementById('editPetCount').value = data.pet_count || 0;
                document.getElementById('editHasChildren').value = data.has_children ? 'true' : 'false';
                document.getElementById('editChildrenCount').value = data.children_count || 0;
                document.getElementById('editCleaningDate').value = data.cleaning_date?.split('T')[0] || data.cleaning_date;
                document.getElementById('editCleaningTime').value = data.cleaning_time || '';
                document.getElementById('editStatus').value = data.status || 'pending';
                document.getElementById('editAgreedValue').value = data.agreed_value || 0;
                document.getElementById('editDescription').value = data.description || '';
                openEditModal();
            }
        }

        async function deleteServiceRequest(id) {
            if (confirm('Are you sure you want to delete this request? This action cannot be undone.')) {
                // Converter id para string
                const idStr = String(id);
                
                const { error } = await supabaseClient
                    .from('service_requests')
                    .delete()
                    .eq('id', idStr);
                    
                if (!error) {
                    loadServiceRequests(currentPage);
                    loadStats();
                    showToast('Request deleted successfully', 'success');
                } else {
                    showToast('Error deleting: ' + error.message, 'error');
                }
            }
        }

        function openEditModal() {
            document.getElementById('editModal').style.display = 'flex';
        }

        function closeEditModal() {
            document.getElementById('editModal').style.display = 'none';
        }

        // Toast
        function showToast(msg, type) {
            const toast = document.createElement('div');
            toast.className = `toast toast-${type}`;
            toast.style.borderLeftColor = type === 'success' ? '#00c853' : (type === 'error' ? '#ff6b6b' : '#ff9800');
            
            let icon = 'fa-info-circle';
            if (type === 'success') icon = 'fa-check-circle';
            if (type === 'error') icon = 'fa-exclamation-circle';
            
            toast.innerHTML = `<i class="fas ${icon}" style="color: ${type === 'success' ? '#00c853' : (type === 'error' ? '#ff6b6b' : '#ff9800')};"></i> ${msg}`;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        function debounce(fn, delay) {
            let t;
            return function() {
                clearTimeout(t);
                t = setTimeout(() => fn.apply(this, arguments), delay);
            };
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('editModal');
            if (event.target === modal) {
                closeEditModal();
            }
        }
    </script>
</body>
</html>
